{% extends "base.html" %}
{% load staticfiles %}

{% block includes %}
<link rel="stylesheet" type="text/css" href="{% static 'browse/css/msa0.4.6.css' %}" />
<script src="{% static 'browse/js/xhr@latest.js' %}"></script>
<script src="{% static 'browse/js/msa@0.4.6.js' %}"></script>
<script src="{% static 'browse/js/biojs-io-fasta.js' %}"></script>
<script src="{% static 'browse/js/biojs-io-gff.js' %}"></script>
<script src="{% static 'browse/js/msa.js' %}"></script>

<!-- Bootstrap core JavaScript
================================================== -->
<!-- Placed at the end of the document so the pages load faster -->
<script type="text/javascript" src="{% static 'browse/js/jquery-2.1.3.min.js' %}"></script>
<script type="text/javascript" src="{% static 'browse/js/bootstrap.min.js' %}"></script>
<script type="text/javascript" src="{% static 'browse/js/jquery.csv.min.js' %}"></script>
<script type="text/javascript" src="{% static 'browse/js/jquery.dataTables.min.js' %}"></script>
<script type="text/javascript" src="{% static 'browse/js/dataTables.bootstrap.js' %}"></script>
<script type="text/javascript" src="{% static 'browse/js/csv_to_html_table.js' %}"></script>
{% endblock %}

{% block content %}
<div class="container">
  <div class="page-header">
	  <h1>List of human histones</h1>
  </div>

    <div class="container-fluid">

{#      <h2>Список всех взаимодействующих с пептидами нуклеосом и гистонов человека</h2>#}

      <div id='table-container'></div>

    </div><!-- /.container -->
{#  To add sequences, use the browse or search pages and click 'Add to Basket' when you have selected your desired sequences." To remove sequences, select the sequences you want to remove and click 'Remove from Basket.' Alternatively, you can <a href="#" id="remove_all">Remove all sequences</a>.#}
{#  {% include "sequences.html" with page_name="basket" formatNoMatches="No sequences in basket." %}#}
</div>

<script type="text/javascript">

    function format_variant(variant){
        var exclude_variants = ['', 'H1', 'H1.3', 'H1.4', 'H1.5', 'H10', 'H2.1', 'H2.2', 'H2A.2', 'H2A.J', 'H2B.M',
            'H2B.S ', 'H4', 'TS_H2A ', 'TS_H2B', 'cenH3_CENPA'];
        if (!exclude_variants.includes(variant))
            return "<a href='/variant/" + variant + "'>" + variant + "</a>";
        else
            return variant;
    };

    function format_type(histone_type){
        if (histone_type)
            return "<a href='/type/" + histone_type + "'>" + histone_type + "</a>";
        else
            return "";
    };

    CsvToHtmlTable.init({
        csv_path: "{% static 'browse/human_histones.csv' %}",
        element: 'table-container',
        allow_download: true,
        csv_options: {separator: ',', delimiter: '"'},
        datatables_options: {"paging": false} ,
        custom_formatting: [[0, format_type], [3, format_variant]]
    });
</script>
{% endblock %}
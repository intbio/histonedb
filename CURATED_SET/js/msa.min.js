!function(n){var r={};function i(t){if(r[t])return r[t].exports;var e=r[t]={exports:{},id:t,loaded:!1};return n[t].call(e.exports,e,e.exports,i),e.loaded=!0,e.exports}i.m=n,i.c=r,i.p="",i(0)}([function(t,e,n){"use strict";var r=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(1));n(141);var i,o=r.default;for(i in r)r.hasOwnProperty(i)&&(o[i]=r[i]);window&&(window.msa=o),t.exports=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.io=e.$=e.boneView=e.view=e.selcol=e.selection=e.utils=e.menu=e.model=e.msa=void 0;var r=n(2);Object.defineProperty(e,"selection",{enumerable:!0,get:function(){return g(r).default}});var i=n(13);Object.defineProperty(e,"selcol",{enumerable:!0,get:function(){return g(i).default}});var o=n(14);Object.defineProperty(e,"view",{enumerable:!0,get:function(){return g(o).default}});var s=n(16);Object.defineProperty(e,"boneView",{enumerable:!0,get:function(){return g(s).default}});var a=n(15);Object.defineProperty(e,"$",{enumerable:!0,get:function(){return g(a).default}});var u=g(n(17)),l=d(n(127)),c=d(n(128)),h=d(n(121)),f=n(67);function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function g(t){return t&&t.__esModule?t:{default:t}}e.default=function(){function t(t){return u.default.apply(this,t)}return t.prototype=u.default.prototype,new t(arguments)},e.msa=u.default,e.model=l,e.menu=c,e.utils=h;f={xhr:n(70),fasta:f.fasta,clustal:f.clustal,gff:f.gff};e.io=f;f="imported",f="0.0.0",e.version=f},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.columnsel=e.rowsel=e.possel=e.sel=void 0;var r=n(3),i=n(6).Model.extend({defaults:{type:"super"}}),o=i.extend({defaults:(0,r.extend)({},i.prototype.defaults,{type:"row",seqId:""}),inRow:function(t){return t===this.get("seqId")},inColumn:function(t){return!0},getLength:function(){return 1}}),n=i.extend({defaults:(0,r.extend)({},i.prototype.defaults,{type:"column",xStart:-1,xEnd:-1}),inRow:function(){return!0},inColumn:function(t){return xStart<=t&&t<=xEnd},getLength:function(){return xEnd-xStart}}),r=o.extend((0,r.extend)({},(0,r.pick)(n,"inColumn"),(0,r.pick)(n,"getLength"),{defaults:(0,r.extend)({},n.prototype.defaults,o.prototype.defaults,{type:"pos"})}));e.sel=i,e.possel=r,e.rowsel=o,e.columnsel=n},function(t,A,L){var q;(function(O,T){"use strict";var uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};(function(){var Do,Ho="Expected a function",Uo="__lodash_hash_undefined__",Vo="__lodash_placeholder__",Go=128,$o=9007199254740991,Xo=NaN,Zo=4294967295,Yo=[["ary",Go],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],Jo="[object Arguments]",Ko="[object Array]",Qo="[object Boolean]",ts="[object Date]",es="[object Error]",ns="[object Function]",rs="[object GeneratorFunction]",is="[object Map]",os="[object Number]",ss="[object Object]",as="[object Promise]",us="[object RegExp]",ls="[object Set]",cs="[object String]",hs="[object Symbol]",fs="[object WeakMap]",ds="[object ArrayBuffer]",gs="[object DataView]",ps="[object Float32Array]",ms="[object Float64Array]",vs="[object Int8Array]",_s="[object Int16Array]",bs="[object Int32Array]",ys="[object Uint8Array]",xs="[object Uint8ClampedArray]",ws="[object Uint16Array]",Ss="[object Uint32Array]",ks=/\b__p \+= '';/g,zs=/\b(__p \+=) '' \+/g,Cs=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ms=/&(?:amp|lt|gt|quot|#39);/g,js=/[&<>"']/g,Es=RegExp(Ms.source),Os=RegExp(js.source),Ts=/<%-([\s\S]+?)%>/g,As=/<%([\s\S]+?)%>/g,Ls=/<%=([\s\S]+?)%>/g,qs=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Rs=/^\w*$/,Ns=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Is=/[\\^$.*+?()[\]{}|]/g,Ps=RegExp(Is.source),Ws=/^\s+/,n=/\s/,Fs=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bs=/\{\n\/\* \[wrapped with (.+)\] \*/,Ds=/,? & /,Hs=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Us=/[()=,{}\[\]\/\s]/,Vs=/\\(\\)?/g,Gs=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,$s=/\w*$/,Xs=/^[-+]0x[0-9a-f]+$/i,Zs=/^0b[01]+$/i,Ys=/^\[object .+?Constructor\]$/,Js=/^0o[0-7]+$/i,Ks=/^(?:0|[1-9]\d*)$/,Qs=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ta=/($^)/,ea=/['\n\r\u2028\u2029\\]/g,t="\\ud800-\\udfff",e="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",r="\\u2700-\\u27bf",i="a-z\\xdf-\\xf6\\xf8-\\xff",o="A-Z\\xc0-\\xd6\\xd8-\\xde",s="\\ufe0e\\ufe0f",a="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",u="['’]",l="["+t+"]",c="["+a+"]",h="["+e+"]",f="\\d+",d="["+r+"]",g="["+i+"]",p="[^"+t+a+f+r+i+o+"]",m="\\ud83c[\\udffb-\\udfff]",v="[^"+t+"]",_="(?:\\ud83c[\\udde6-\\uddff]){2}",b="[\\ud800-\\udbff][\\udc00-\\udfff]",y="["+o+"]",x="\\u200d",w="(?:"+g+"|"+p+")",a="(?:"+y+"|"+p+")",r="(?:['’](?:d|ll|m|re|s|t|ve))?",i="(?:['’](?:D|LL|M|RE|S|T|VE))?",o="(?:"+h+"|"+m+")"+"?",p="["+s+"]?",o=p+o+("(?:"+x+"(?:"+[v,_,b].join("|")+")"+p+o+")*"),d="(?:"+[d,_,b].join("|")+")"+o,l="(?:"+[v+h+"?",h,_,b,l].join("|")+")",na=RegExp(u,"g"),ra=RegExp(h,"g"),S=RegExp(m+"(?="+m+")|"+l+o,"g"),ia=RegExp([y+"?"+g+"+"+r+"(?="+[c,y,"$"].join("|")+")",a+"+"+i+"(?="+[c,y+w,"$"].join("|")+")",y+"?"+w+"+"+r,y+"+"+i,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",f,d].join("|"),"g"),k=RegExp("["+x+t+e+s+"]"),oa=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,sa=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],aa=-1,ua={};ua[ps]=ua[ms]=ua[vs]=ua[_s]=ua[bs]=ua[ys]=ua[xs]=ua[ws]=ua[Ss]=!0,ua[Jo]=ua[Ko]=ua[ds]=ua[Qo]=ua[gs]=ua[ts]=ua[es]=ua[ns]=ua[is]=ua[os]=ua[ss]=ua[us]=ua[ls]=ua[cs]=ua[fs]=!1;var la={};la[Jo]=la[Ko]=la[ds]=la[gs]=la[Qo]=la[ts]=la[ps]=la[ms]=la[vs]=la[_s]=la[bs]=la[is]=la[os]=la[ss]=la[us]=la[ls]=la[cs]=la[hs]=la[ys]=la[xs]=la[ws]=la[Ss]=!0,la[es]=la[ns]=la[fs]=!1;var z={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ca=parseFloat,ha=parseInt,e="object"==(void 0===O?"undefined":uu(O))&&O&&O.Object===Object&&O,s="object"==("undefined"==typeof self?"undefined":uu(self))&&self&&self.Object===Object&&self,fa=e||s||Function("return this")(),s="object"==uu(A)&&A&&!A.nodeType&&A,C=s&&"object"==uu(T)&&T&&!T.nodeType&&T,da=C&&C.exports===s,M=da&&e.process,e=function(){try{var t=C&&C.require&&C.require("util").types;return t?t:M&&M.binding&&M.binding("util")}catch(t){}}(),ga=e&&e.isArrayBuffer,pa=e&&e.isDate,ma=e&&e.isMap,va=e&&e.isRegExp,_a=e&&e.isSet,ba=e&&e.isTypedArray;function ya(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function xa(t,e,n,r){for(var i=-1,o=null==t?0:t.length;++i<o;){var s=t[i];e(r,s,n(s),t)}return r}function wa(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););return t}function Sa(t,e){for(var n=null==t?0:t.length;n--&&!1!==e(t[n],n,t););return t}function ka(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function za(t,e){for(var n=-1,r=null==t?0:t.length,i=0,o=[];++n<r;){var s=t[n];e(s,n,t)&&(o[i++]=s)}return o}function Ca(t,e){return!!(null==t?0:t.length)&&-1<Ra(t,e,0)}function Ma(t,e,n){for(var r=-1,i=null==t?0:t.length;++r<i;)if(n(e,t[r]))return!0;return!1}function ja(t,e){for(var n=-1,r=null==t?0:t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function Ea(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function Oa(t,e,n,r){var i=-1,o=null==t?0:t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function Ta(t,e,n,r){var i=null==t?0:t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function Aa(t,e){for(var n=-1,r=null==t?0:t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}var j=Wa("length");function La(t,r,e){var i;return e(t,function(t,e,n){if(r(t,e,n))return i=e,!1}),i}function qa(t,e,n,r){for(var i=t.length,o=n+(r?1:-1);r?o--:++o<i;)if(e(t[o],o,t))return o;return-1}function Ra(t,e,n){return e==e?function(t,e,n){var r=n-1,i=t.length;for(;++r<i;)if(t[r]===e)return r;return-1}(t,e,n):qa(t,Ia,n)}function Na(t,e,n,r){for(var i=n-1,o=t.length;++i<o;)if(r(t[i],e))return i;return-1}function Ia(t){return t!=t}function Pa(t,e){var n=null==t?0:t.length;return n?Ba(t,e)/n:Xo}function Wa(e){return function(t){return null==t?Do:t[e]}}function E(e){return function(t){return null==e?Do:e[t]}}function Fa(t,r,i,o,e){return e(t,function(t,e,n){i=o?(o=!1,t):r(i,t,e,n)}),i}function Ba(t,e){for(var n,r=-1,i=t.length;++r<i;){var o=e(t[r]);o!==Do&&(n=n===Do?o:n+o)}return n}function Da(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}function Ha(t){return t&&t.slice(0,ou(t)+1).replace(Ws,"")}function Ua(e){return function(t){return e(t)}}function Va(e,t){return ja(t,function(t){return e[t]})}function Ga(t,e){return t.has(e)}function $a(t,e){for(var n=-1,r=t.length;++n<r&&-1<Ra(e,t[n],0););return n}function Xa(t,e){for(var n=t.length;n--&&-1<Ra(e,t[n],0););return n}var Za=E({"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"}),Ya=E({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function Ja(t){return"\\"+z[t]}function Ka(t){return k.test(t)}function Qa(t){var n=-1,r=Array(t.size);return t.forEach(function(t,e){r[++n]=[e,t]}),r}function tu(e,n){return function(t){return e(n(t))}}function eu(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s=t[n];s!==e&&s!==Vo||(t[n]=Vo,o[i++]=n)}return o}function nu(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}function ru(t){return(Ka(t)?function(t){var e=S.lastIndex=0;for(;S.test(t);)++e;return e}:j)(t)}function iu(t){return Ka(t)?t.match(S)||[]:t.split("")}function ou(t){for(var e=t.length;e--&&n.test(t.charAt(e)););return e}var su=E({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var au=function t(e){var S=(e=null==e?fa:au.defaults(fa.Object(),e,au.pick(fa,sa))).Array,n=e.Date,h=e.Error,f=e.Function,i=e.Math,p=e.Object,d=e.RegExp,c=e.String,w=e.TypeError,o=S.prototype,r=f.prototype,g=p.prototype,s=e["__core-js_shared__"],a=r.toString,_=g.hasOwnProperty,u=0,l=(Lo=/[^.]+$/.exec(s&&s.keys&&s.keys.IE_PROTO||""))?"Symbol(src)_1."+Lo:"",m=g.toString,v=a.call(p),b=fa._,y=d("^"+a.call(_).replace(Is,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),x=da?e.Buffer:Do,k=e.Symbol,z=e.Uint8Array,C=x?x.allocUnsafe:Do,M=tu(p.getPrototypeOf,p),j=p.create,E=g.propertyIsEnumerable,O=o.splice,T=k?k.isConcatSpreadable:Do,A=k?k.iterator:Do,L=k?k.toStringTag:Do,q=function(){try{var t=Dn(p,"defineProperty");return t({},"",{}),t}catch(t){}}(),R=e.clearTimeout!==fa.clearTimeout&&e.clearTimeout,N=n&&n.now!==fa.Date.now&&n.now,I=e.setTimeout!==fa.setTimeout&&e.setTimeout,P=i.ceil,W=i.floor,F=p.getOwnPropertySymbols,B=x?x.isBuffer:Do,D=e.isFinite,H=o.join,U=tu(p.keys,p),V=i.max,G=i.min,$=n.now,X=e.parseInt,Z=i.random,Y=o.reverse,J=Dn(e,"DataView"),K=Dn(e,"Map"),Q=Dn(e,"Promise"),tt=Dn(e,"Set"),et=Dn(e,"WeakMap"),nt=Dn(p,"create"),rt=et&&new et,it={},ot=mr(J),st=mr(K),at=mr(Q),ut=mr(tt),lt=mr(et),ct=k?k.prototype:Do,ht=ct?ct.valueOf:Do,ft=ct?ct.toString:Do;function dt(t){if(Li(t)&&!wi(t)&&!(t instanceof _t)){if(t instanceof vt)return t;if(_.call(t,"__wrapped__"))return vr(t)}return new vt(t)}var gt=function(t){if(!Ai(t))return{};if(j)return j(t);pt.prototype=t;t=new pt;return pt.prototype=Do,t};function pt(){}function mt(){}function vt(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=Do}function _t(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zo,this.__views__=[]}function bt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function yt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function xt(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}function wt(t){var e=-1,n=null==t?0:t.length;for(this.__data__=new xt;++e<n;)this.add(t[e])}function St(t){t=this.__data__=new yt(t);this.size=t.size}function kt(t,e){var n,r=wi(t),i=!r&&xi(t),o=!r&&!i&&Ci(t),s=!r&&!i&&!o&&Bi(t),a=r||i||o||s,u=a?Da(t.length,c):[],l=u.length;for(n in t)!e&&!_.call(t,n)||a&&("length"==n||o&&("offset"==n||"parent"==n)||s&&("buffer"==n||"byteLength"==n||"byteOffset"==n)||Zn(n,l))||u.push(n);return u}function zt(t){var e=t.length;return e?t[we(0,e-1)]:Do}function Ct(t,e){return hr(rn(t),Rt(e,0,t.length))}function Mt(t){return hr(rn(t))}function jt(t,e,n){(n===Do||_i(t[e],n))&&(n!==Do||e in t)||Lt(t,e,n)}function Et(t,e,n){var r=t[e];_.call(t,e)&&_i(r,n)&&(n!==Do||e in t)||Lt(t,e,n)}function Ot(t,e){for(var n=t.length;n--;)if(_i(t[n][0],e))return n;return-1}function Tt(t,r,i,o){return Ft(t,function(t,e,n){r(o,t,i(t),n)}),o}function At(t,e){return t&&on(e,lo(e),t)}function Lt(t,e,n){"__proto__"==e&&q?q(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function qt(t,e){for(var n=-1,r=e.length,i=S(r),o=null==t;++n<r;)i[n]=o?Do:io(t,e[n]);return i}function Rt(t,e,n){return t==t&&(n!==Do&&(t=t<=n?t:n),e!==Do&&(t=e<=t?t:e)),t}function Nt(n,r,i,t,e,o){var s,a=1&r,u=2&r,l=4&r;if(i&&(s=e?i(n,t,e,o):i(n)),s!==Do)return s;if(!Ai(n))return n;var c,h,f=wi(n);if(f){if(s=function(t){var e=t.length,n=new t.constructor(e);e&&"string"==typeof t[0]&&_.call(t,"index")&&(n.index=t.index,n.input=t.input);return n}(n),!a)return rn(n,s)}else{var d=Vn(n),t=d==ns||d==rs;if(Ci(n))return Je(n,a);if(d==ss||d==Jo||t&&!e){if(s=u||t?{}:$n(n),!a)return u?(t=c=n,h=(h=s)&&on(t,co(t),h),on(c,Un(c),h)):(h=At(s,c=n),on(c,Hn(c),h))}else{if(!la[d])return e?n:{};s=function(t,e,n){var r=t.constructor;switch(e){case ds:return Ke(t);case Qo:case ts:return new r(+t);case gs:return function(t,e){e=e?Ke(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.byteLength)}(t,n);case ps:case ms:case vs:case _s:case bs:case ys:case xs:case ws:case Ss:return Qe(t,n);case is:return new r;case os:case cs:return new r(t);case us:return function(t){var e=new t.constructor(t.source,$s.exec(t));return e.lastIndex=t.lastIndex,e}(t);case ls:return new r;case hs:return function(t){return ht?p(ht.call(t)):{}}(t)}}(n,d,a)}}a=(o=o||new St).get(n);if(a)return a;o.set(n,s),Pi(n)?n.forEach(function(t){s.add(Nt(t,r,i,t,n,o))}):qi(n)&&n.forEach(function(t,e){s.set(e,Nt(t,r,i,e,n,o))});var g=f?Do:(l?u?Rn:qn:u?co:lo)(n);return wa(g||n,function(t,e){g&&(t=n[e=t]),Et(s,e,Nt(t,r,i,e,n,o))}),s}function It(t,e,n){var r=n.length;if(null==t)return!r;for(t=p(t);r--;){var i=n[r],o=e[i],s=t[i];if(s===Do&&!(i in t)||!o(s))return!1}return!0}function Pt(t,e,n){if("function"!=typeof t)throw new w(Ho);return ar(function(){t.apply(Do,n)},e)}function Wt(t,e,n,r){var i=-1,o=Ca,s=!0,a=t.length,u=[],l=e.length;if(!a)return u;n&&(e=ja(e,Ua(n))),r?(o=Ma,s=!1):200<=e.length&&(o=Ga,s=!1,e=new wt(e));t:for(;++i<a;){var c=t[i],h=null==n?c:n(c),c=r||0!==c?c:0;if(s&&h==h){for(var f=l;f--;)if(e[f]===h)continue t;u.push(c)}else o(e,h,r)||u.push(c)}return u}dt.templateSettings={escape:Ts,evaluate:As,interpolate:Ls,variable:"",imports:{_:dt}},(dt.prototype=mt.prototype).constructor=dt,(vt.prototype=gt(mt.prototype)).constructor=vt,(_t.prototype=gt(mt.prototype)).constructor=_t,bt.prototype.clear=function(){this.__data__=nt?nt(null):{},this.size=0},bt.prototype.delete=function(t){return t=this.has(t)&&delete this.__data__[t],this.size-=t?1:0,t},bt.prototype.get=function(t){var e=this.__data__;if(nt){var n=e[t];return n===Uo?Do:n}return _.call(e,t)?e[t]:Do},bt.prototype.has=function(t){var e=this.__data__;return nt?e[t]!==Do:_.call(e,t)},bt.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=nt&&e===Do?Uo:e,this},yt.prototype.clear=function(){this.__data__=[],this.size=0},yt.prototype.delete=function(t){var e=this.__data__;return!((t=Ot(e,t))<0)&&(t==e.length-1?e.pop():O.call(e,t,1),--this.size,!0)},yt.prototype.get=function(t){var e=this.__data__;return(t=Ot(e,t))<0?Do:e[t][1]},yt.prototype.has=function(t){return-1<Ot(this.__data__,t)},yt.prototype.set=function(t,e){var n=this.__data__,r=Ot(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this},xt.prototype.clear=function(){this.size=0,this.__data__={hash:new bt,map:new(K||yt),string:new bt}},xt.prototype.delete=function(t){return t=Fn(this,t).delete(t),this.size-=t?1:0,t},xt.prototype.get=function(t){return Fn(this,t).get(t)},xt.prototype.has=function(t){return Fn(this,t).has(t)},xt.prototype.set=function(t,e){var n=Fn(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this},wt.prototype.add=wt.prototype.push=function(t){return this.__data__.set(t,Uo),this},wt.prototype.has=function(t){return this.__data__.has(t)},St.prototype.clear=function(){this.__data__=new yt,this.size=0},St.prototype.delete=function(t){var e=this.__data__,t=e.delete(t);return this.size=e.size,t},St.prototype.get=function(t){return this.__data__.get(t)},St.prototype.has=function(t){return this.__data__.has(t)},St.prototype.set=function(t,e){var n=this.__data__;if(n instanceof yt){var r=n.__data__;if(!K||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new xt(r)}return n.set(t,e),this.size=n.size,this};var Ft=un(Xt),Bt=un(Zt,!0);function Dt(t,r){var i=!0;return Ft(t,function(t,e,n){return i=!!r(t,e,n)}),i}function Ht(t,e,n){for(var r=-1,i=t.length;++r<i;){var o,s,a=t[r],u=e(a);null!=u&&(o===Do?u==u&&!Fi(u):n(u,o))&&(o=u,s=a)}return s}function Ut(t,r){var i=[];return Ft(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function Vt(t,e,n,r,i){var o=-1,s=t.length;for(n=n||Xn,i=i||[];++o<s;){var a=t[o];0<e&&n(a)?1<e?Vt(a,e-1,n,r,i):Ea(i,a):r||(i[i.length]=a)}return i}var Gt=ln(),$t=ln(!0);function Xt(t,e){return t&&Gt(t,e,lo)}function Zt(t,e){return t&&$t(t,e,lo)}function Yt(e,t){return za(t,function(t){return Ei(e[t])})}function Jt(t,e){for(var n=0,r=(e=$e(e,t)).length;null!=t&&n<r;)t=t[pr(e[n++])];return n&&n==r?t:Do}function Kt(t,e,n){e=e(t);return wi(t)?e:Ea(e,n(t))}function Qt(t){return null==t?t===Do?"[object Undefined]":"[object Null]":L&&L in p(t)?function(t){var e=_.call(t,L),n=t[L];try{t[L]=Do;var r=!0}catch(t){}var i=m.call(t);r&&(e?t[L]=n:delete t[L]);return i}(t):(t=t,m.call(t))}function te(t,e){return e<t}function ee(t,e){return null!=t&&_.call(t,e)}function ne(t,e){return null!=t&&e in p(t)}function re(t,e,n){for(var r=n?Ma:Ca,i=t[0].length,o=t.length,s=o,a=S(o),u=1/0,l=[];s--;){var c=t[s];s&&e&&(c=ja(c,Ua(e))),u=G(c.length,u),a[s]=!n&&(e||120<=i&&120<=c.length)?new wt(s&&c):Do}c=t[0];var h=-1,f=a[0];t:for(;++h<i&&l.length<u;){var d=c[h],g=e?e(d):d,d=n||0!==d?d:0;if(!(f?Ga(f,g):r(l,g,n))){for(s=o;--s;){var p=a[s];if(!(p?Ga(p,g):r(t[s],g,n)))continue t}f&&f.push(g),l.push(d)}}return l}function ie(t,e,n){e=null==(t=ir(t,e=$e(e,t)))?t:t[pr(jr(e))];return null==e?Do:ya(e,t,n)}function oe(t){return Li(t)&&Qt(t)==Jo}function se(t,e,n,r,i){return t===e||(null==t||null==e||!Li(t)&&!Li(e)?t!=t&&e!=e:function(t,e,n,r,i,o){var s=wi(t),a=wi(e),u=s?Ko:Vn(t),l=a?Ko:Vn(e),c=(u=u==Jo?ss:u)==ss,a=(l=l==Jo?ss:l)==ss,l=u==l;if(l&&Ci(t)){if(!Ci(e))return!1;c=!(s=!0)}if(l&&!c)return o=o||new St,s||Bi(t)?An(t,e,n,r,i,o):function(t,e,n,r,i,o,s){switch(n){case gs:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case ds:return t.byteLength==e.byteLength&&o(new z(t),new z(e))?!0:!1;case Qo:case ts:case os:return _i(+t,+e);case es:return t.name==e.name&&t.message==e.message;case us:case cs:return t==e+"";case is:var a=Qa;case ls:var u=1&r;if(a=a||nu,t.size!=e.size&&!u)return!1;u=s.get(t);if(u)return u==e;r|=2,s.set(t,e);a=An(a(t),a(e),r,i,o,s);return s.delete(t),a;case hs:if(ht)return ht.call(t)==ht.call(e)}return!1}(t,e,u,n,r,i,o);if(!(1&n)){c=c&&_.call(t,"__wrapped__"),a=a&&_.call(e,"__wrapped__");if(c||a){c=c?t.value():t,a=a?e.value():e;return o=o||new St,i(c,a,n,r,o)}}return l&&(o=o||new St,function(t,e,n,r,i,o){var s=1&n,a=qn(t),u=a.length,l=qn(e).length;if(u!=l&&!s)return!1;var c=u;for(;c--;){var h=a[c];if(!(s?h in e:_.call(e,h)))return!1}var f=o.get(t),l=o.get(e);if(f&&l)return f==e&&l==t;var d=!0;o.set(t,e),o.set(e,t);var g=s;for(;++c<u;){h=a[c];var p,m=t[h],v=e[h];if(r&&(p=s?r(v,m,h,e,t,o):r(m,v,h,t,e,o)),!(p===Do?m===v||i(m,v,n,r,o):p)){d=!1;break}g=g||"constructor"==h}d&&!g&&(f=t.constructor,l=e.constructor,f!=l&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof l&&l instanceof l)&&(d=!1));return o.delete(t),o.delete(e),d}(t,e,n,r,i,o))}(t,e,n,r,se,i))}function ae(t,e,n,r){var i=n.length,o=i,s=!r;if(null==t)return!o;for(t=p(t);i--;){var a=n[i];if(s&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++i<o;){var u=(a=n[i])[0],l=t[u],c=a[1];if(s&&a[2]){if(l===Do&&!(u in t))return!1}else{var h,f=new St;if(r&&(h=r(l,c,u,t,e,f)),!(h===Do?se(c,l,3,r,f):h))return!1}}return!0}function ue(t){return!(!Ai(t)||(e=t,l&&l in e))&&(Ei(t)?y:Ys).test(mr(t));var e}function le(t){return"function"==typeof t?t:null==t?qo:"object"==(void 0===t?"undefined":uu(t))?wi(t)?pe(t[0],t[1]):ge(t):Po(t)}function ce(t){if(!tr(t))return U(t);var e,n=[];for(e in p(t))_.call(t,e)&&"constructor"!=e&&n.push(e);return n}function he(t){if(!Ai(t))return function(t){var e=[];if(null!=t)for(var n in p(t))e.push(n);return e}(t);var e,n=tr(t),r=[];for(e in t)("constructor"!=e||!n&&_.call(t,e))&&r.push(e);return r}function fe(t,e){return t<e}function de(t,r){var i=-1,o=ki(t)?S(t.length):[];return Ft(t,function(t,e,n){o[++i]=r(t,e,n)}),o}function ge(e){var n=Bn(e);return 1==n.length&&n[0][2]?nr(n[0][0],n[0][1]):function(t){return t===e||ae(t,e,n)}}function pe(n,r){return Jn(n)&&er(r)?nr(pr(n),r):function(t){var e=io(t,n);return e===Do&&e===r?oo(t,n):se(r,e,3)}}function me(r,i,o,s,a){r!==i&&Gt(i,function(t,e){var n;a=a||new St,Ai(t)?function(t,e,n,r,i,o,s){var a=or(t,n),u=or(e,n),l=s.get(u);if(l)return jt(t,n,l);var c,h=o?o(a,u,n+"",t,e,s):Do,f=h===Do;f&&(c=wi(u),l=!c&&Ci(u),e=!c&&!l&&Bi(u),h=u,c||l||e?h=wi(a)?a:zi(a)?rn(a):l?Je(u,!(f=!1)):e?Qe(u,!(f=!1)):[]:Ni(u)||xi(u)?xi(h=a)?h=Zi(a):Ai(a)&&!Ei(a)||(h=$n(u)):f=!1),f&&(s.set(u,h),i(h,u,r,o,s),s.delete(u)),jt(t,n,h)}(r,i,e,o,me,s,a):((n=s?s(or(r,e),t,e+"",r,i,a):Do)===Do&&(n=t),jt(r,e,n))},co)}function ve(t,e){var n=t.length;if(n)return Zn(e+=e<0?n:0,n)?t[e]:Do}function _e(t,r,n){r=r.length?ja(r,function(e){return wi(e)?function(t){return Jt(t,1===e.length?e[0]:e)}:e}):[qo];var i=-1;return r=ja(r,Ua(Wn())),function(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}(de(t,function(e,t,n){return{criteria:ja(r,function(t){return t(e)}),index:++i,value:e}}),function(t,e){return function(t,e,n){var r=-1,i=t.criteria,o=e.criteria,s=i.length,a=n.length;for(;++r<s;){var u=tn(i[r],o[r]);if(u){if(a<=r)return u;var l=n[r];return u*("desc"==l?-1:1)}}return t.index-e.index}(t,e,n)})}function be(t,e,n){for(var r=-1,i=e.length,o={};++r<i;){var s=e[r],a=Jt(t,s);n(a,s)&&Me(o,$e(s,t),a)}return o}function ye(t,e,n,r){var i=r?Na:Ra,o=-1,s=e.length,a=t;for(t===e&&(e=rn(e)),n&&(a=ja(t,Ua(n)));++o<s;)for(var u=0,l=e[o],c=n?n(l):l;-1<(u=i(a,c,u,r));)a!==t&&O.call(a,u,1),O.call(t,u,1);return t}function xe(t,e){for(var n=t?e.length:0,r=n-1;n--;){var i,o=e[n];n!=r&&o===i||(Zn(i=o)?O.call(t,o,1):We(t,o))}return t}function we(t,e){return t+W(Z()*(e-t+1))}function Se(t,e){var n="";if(!t||e<1||$o<e)return n;for(;e%2&&(n+=t),(e=W(e/2))&&(t+=t),e;);return n}function ke(t,e){return ur(rr(t,e,qo),t+"")}function ze(t){return zt(bo(t))}function Ce(t,e){t=bo(t);return hr(t,Rt(e,0,t.length))}function Me(t,e,n,r){if(!Ai(t))return t;for(var i=-1,o=(e=$e(e,t)).length,s=o-1,a=t;null!=a&&++i<o;){var u,l=pr(e[i]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;i!=s&&(u=a[l],(c=r?r(u,l,a):Do)===Do&&(c=Ai(u)?u:Zn(e[i+1])?[]:{})),Et(a,l,c),a=a[l]}return t}var je=rt?function(t,e){return rt.set(t,e),t}:qo,Ee=q?function(t,e){return q(t,"toString",{configurable:!0,enumerable:!1,value:Ao(e),writable:!0})}:qo;function Oe(t){return hr(bo(t))}function Te(t,e,n){var r=-1,i=t.length;e<0&&(e=i<-e?0:i+e),(n=i<n?i:n)<0&&(n+=i),i=n<e?0:n-e>>>0,e>>>=0;for(var o=S(i);++r<i;)o[r]=t[r+e];return o}function Ae(t,r){var i;return Ft(t,function(t,e,n){return!(i=r(t,e,n))}),!!i}function Le(t,e,n){var r=0,i=null==t?r:t.length;if("number"==typeof e&&e==e&&i<=2147483647){for(;r<i;){var o=r+i>>>1,s=t[o];null!==s&&!Fi(s)&&(n?s<=e:s<e)?r=1+o:i=o}return i}return qe(t,e,qo,n)}function qe(t,e,n,r){var i=0,o=null==t?0:t.length;if(0===o)return 0;for(var s=(e=n(e))!=e,a=null===e,u=Fi(e),l=e===Do;i<o;){var c=W((i+o)/2),h=n(t[c]),f=h!==Do,d=null===h,g=h==h,p=Fi(h),h=s?r||g:l?g&&(r||f):a?g&&f&&(r||!d):u?g&&f&&!d&&(r||!p):!d&&!p&&(r?h<=e:h<e);h?i=c+1:o=c}return G(o,4294967294)}function Re(t,e){for(var n=-1,r=t.length,i=0,o=[];++n<r;){var s,a=t[n],u=e?e(a):a;n&&_i(u,s)||(s=u,o[i++]=0===a?0:a)}return o}function Ne(t){return"number"==typeof t?t:Fi(t)?Xo:+t}function Ie(t){if("string"==typeof t)return t;if(wi(t))return ja(t,Ie)+"";if(Fi(t))return ft?ft.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Pe(t,e,n){var r=-1,i=Ca,o=t.length,s=!0,a=[],u=a;if(n)s=!1,i=Ma;else if(200<=o){var l=e?null:Cn(t);if(l)return nu(l);s=!1,i=Ga,u=new wt}else u=e?[]:a;t:for(;++r<o;){var c=t[r],h=e?e(c):c,c=n||0!==c?c:0;if(s&&h==h){for(var f=u.length;f--;)if(u[f]===h)continue t;e&&u.push(h),a.push(c)}else i(u,h,n)||(u!==a&&u.push(h),a.push(c))}return a}function We(t,e){return null==(t=ir(t,e=$e(e,t)))||delete t[pr(jr(e))]}function Fe(t,e,n,r){return Me(t,e,n(Jt(t,e)),r)}function Be(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Te(t,r?0:o,r?o+1:i):Te(t,r?o+1:0,r?i:o)}function De(t,e){return t instanceof _t&&(t=t.value()),Oa(e,function(t,e){return e.func.apply(e.thisArg,Ea([t],e.args))},t)}function He(t,e,n){var r=t.length;if(r<2)return r?Pe(t[0]):[];for(var i=-1,o=S(r);++i<r;)for(var s=t[i],a=-1;++a<r;)a!=i&&(o[i]=Wt(o[i]||s,t[a],e,n));return Pe(Vt(o,1),e,n)}function Ue(t,e,n){for(var r=-1,i=t.length,o=e.length,s={};++r<i;){var a=r<o?e[r]:Do;n(s,t[r],a)}return s}function Ve(t){return zi(t)?t:[]}function Ge(t){return"function"==typeof t?t:qo}function $e(t,e){return wi(t)?t:Jn(t,e)?[t]:gr(Yi(t))}var Xe=ke;function Ze(t,e,n){var r=t.length;return n=n===Do?r:n,!e&&r<=n?t:Te(t,e,n)}var Ye=R||function(t){return fa.clearTimeout(t)};function Je(t,e){if(e)return t.slice();e=t.length,e=C?C(e):new t.constructor(e);return t.copy(e),e}function Ke(t){var e=new t.constructor(t.byteLength);return new z(e).set(new z(t)),e}function Qe(t,e){e=e?Ke(t.buffer):t.buffer;return new t.constructor(e,t.byteOffset,t.length)}function tn(t,e){if(t!==e){var n=t!==Do,r=null===t,i=t==t,o=Fi(t),s=e!==Do,a=null===e,u=e==e,l=Fi(e);if(!a&&!l&&!o&&e<t||o&&s&&u&&!a&&!l||r&&s&&u||!n&&u||!i)return 1;if(!r&&!o&&!l&&t<e||l&&n&&i&&!r&&!o||a&&n&&i||!s&&i||!u)return-1}return 0}function en(t,e,n,r){for(var i=-1,o=t.length,s=n.length,a=-1,u=e.length,l=V(o-s,0),c=S(u+l),h=!r;++a<u;)c[a]=e[a];for(;++i<s;)(h||i<o)&&(c[n[i]]=t[i]);for(;l--;)c[a++]=t[i++];return c}function nn(t,e,n,r){for(var i=-1,o=t.length,s=-1,a=n.length,u=-1,l=e.length,c=V(o-a,0),h=S(c+l),f=!r;++i<c;)h[i]=t[i];for(var d=i;++u<l;)h[d+u]=e[u];for(;++s<a;)(f||i<o)&&(h[d+n[s]]=t[i++]);return h}function rn(t,e){var n=-1,r=t.length;for(e=e||S(r);++n<r;)e[n]=t[n];return e}function on(t,e,n,r){var i=!n;n=n||{};for(var o=-1,s=e.length;++o<s;){var a=e[o],u=r?r(n[a],t[a],a,n,t):Do;u===Do&&(u=t[a]),(i?Lt:Et)(n,a,u)}return n}function sn(i,o){return function(t,e){var n=wi(t)?xa:Tt,r=o?o():{};return n(t,i,Wn(e,2),r)}}function an(a){return ke(function(t,e){var n=-1,r=e.length,i=1<r?e[r-1]:Do,o=2<r?e[2]:Do,i=3<a.length&&"function"==typeof i?(r--,i):Do;for(o&&Yn(e[0],e[1],o)&&(i=r<3?Do:i,r=1),t=p(t);++n<r;){var s=e[n];s&&a(t,s,n,i)}return t})}function un(o,s){return function(t,e){if(null==t)return t;if(!ki(t))return o(t,e);for(var n=t.length,r=s?n:-1,i=p(t);(s?r--:++r<n)&&!1!==e(i[r],r,i););return t}}function ln(u){return function(t,e,n){for(var r=-1,i=p(t),o=n(t),s=o.length;s--;){var a=o[u?s:++r];if(!1===e(i[a],a,i))break}return t}}function cn(r){return function(t){var e=Ka(t=Yi(t))?iu(t):Do,n=e?e[0]:t.charAt(0),t=e?Ze(e,1).join(""):t.slice(1);return n[r]()+t}}function hn(e){return function(t){return Oa(Oo(wo(t).replace(na,"")),e,"")}}function fn(r){return function(){var t=arguments;switch(t.length){case 0:return new r;case 1:return new r(t[0]);case 2:return new r(t[0],t[1]);case 3:return new r(t[0],t[1],t[2]);case 4:return new r(t[0],t[1],t[2],t[3]);case 5:return new r(t[0],t[1],t[2],t[3],t[4]);case 6:return new r(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new r(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var e=gt(r.prototype),n=r.apply(e,t);return Ai(n)?n:e}}function dn(o,s,a){var u=fn(o);return function t(){for(var e=arguments.length,n=S(e),r=e,i=Pn(t);r--;)n[r]=arguments[r];i=e<3&&n[0]!==i&&n[e-1]!==i?[]:eu(n,i);return(e-=i.length)<a?kn(o,s,mn,t.placeholder,Do,n,i,Do,Do,a-e):ya(this&&this!==fa&&this instanceof t?u:o,this,n)}}function gn(o){return function(t,e,n){var r,i=p(t);ki(t)||(r=Wn(e,3),t=lo(t),e=function(t){return r(i[t],t,i)});n=o(t,e,n);return-1<n?i[r?t[n]:n]:Do}}function pn(u){return Ln(function(i){var o=i.length,t=o,e=vt.prototype.thru;for(u&&i.reverse();t--;){var n=i[t];if("function"!=typeof n)throw new w(Ho);e&&!a&&"wrapper"==In(n)&&(a=new vt([],!0))}for(t=a?t:o;++t<o;)var r=In(n=i[t]),s="wrapper"==r?Nn(n):Do,a=s&&Kn(s[0])&&424==s[1]&&!s[4].length&&1==s[9]?a[In(s[0])].apply(a,s[3]):1==n.length&&Kn(n)?a[r]():a.thru(n);return function(){var t=arguments,e=t[0];if(a&&1==t.length&&wi(e))return a.plant(e).value();for(var n=0,r=o?i[n].apply(this,t):e;++n<o;)r=i[n].call(this,r);return r}})}function mn(a,u,l,c,h,f,d,g,p,m){var v=u&Go,_=1&u,b=2&u,y=24&u,x=512&u,w=b?Do:fn(a);return function t(){for(var e,n=S(s=arguments.length),r=s;r--;)n[r]=arguments[r];if(y&&(e=function(t,e){for(var n=t.length,r=0;n--;)t[n]===e&&++r;return r}(n,o=Pn(t))),c&&(n=en(n,c,h,y)),f&&(n=nn(n,f,d,y)),s-=e,y&&s<m){var i=eu(n,o);return kn(a,u,mn,t.placeholder,l,n,i,g,p,m-s)}var o=_?l:this,i=b?o[a]:a,s=n.length;return g?n=function(t,e){for(var n=t.length,r=G(e.length,n),i=rn(t);r--;){var o=e[r];t[r]=Zn(o,n)?i[o]:Do}return t}(n,g):x&&1<s&&n.reverse(),v&&p<s&&(n.length=p),this&&this!==fa&&this instanceof t&&(i=w||fn(i)),i.apply(o,n)}}function vn(n,s){return function(t,e){return t=t,r=n,i=s(e),o={},Xt(t,function(t,e,n){r(o,i(t),e,n)}),o;var r,i,o}}function _n(r,i){return function(t,e){var n;if(t===Do&&e===Do)return i;if(t!==Do&&(n=t),e!==Do){if(n===Do)return e;e="string"==typeof t||"string"==typeof e?(t=Ie(t),Ie(e)):(t=Ne(t),Ne(e)),n=r(t,e)}return n}}function bn(r){return Ln(function(t){return t=ja(t,Ua(Wn())),ke(function(e){var n=this;return r(t,function(t){return ya(t,n,e)})})})}function yn(t,e){var n=(e=e===Do?" ":Ie(e)).length;if(n<2)return n?Se(e,t):e;n=Se(e,P(t/ru(e)));return Ka(e)?Ze(iu(n),0,t).join(""):n.slice(0,t)}function xn(a,t,u,l){var c=1&t,h=fn(a);return function t(){for(var e=-1,n=arguments.length,r=-1,i=l.length,o=S(i+n),s=this&&this!==fa&&this instanceof t?h:a;++r<i;)o[r]=l[r];for(;n--;)o[r++]=arguments[++e];return ya(s,c?u:this,o)}}function wn(r){return function(t,e,n){return n&&"number"!=typeof n&&Yn(t,e,n)&&(e=n=Do),t=Vi(t),e===Do?(e=t,t=0):e=Vi(e),function(t,e,n,r){for(var i=-1,o=V(P((e-t)/(n||1)),0),s=S(o);o--;)s[r?o:++i]=t,t+=n;return s}(t,e,n=n===Do?t<e?1:-1:Vi(n),r)}}function Sn(n){return function(t,e){return"string"==typeof t&&"string"==typeof e||(t=Xi(t),e=Xi(e)),n(t,e)}}function kn(t,e,n,r,i,o,s,a,u,l){var c=8&e;e|=c?32:64,4&(e&=~(c?64:32))||(e&=-4);l=[t,e,i,c?o:Do,c?s:Do,c?Do:o,c?Do:s,a,u,l],n=n.apply(Do,l);return Kn(t)&&sr(n,l),n.placeholder=r,lr(n,t,e)}function zn(t){var r=i[t];return function(t,e){if(t=Xi(t),(e=null==e?0:G(Gi(e),292))&&D(t)){var n=(Yi(t)+"e").split("e");return+((n=(Yi(r(n[0]+"e"+(+n[1]+e)))+"e").split("e"))[0]+"e"+(+n[1]-e))}return r(t)}}var Cn=tt&&1/nu(new tt([,-0]))[1]==1/0?function(t){return new tt(t)}:Io;function Mn(o){return function(t){var e,n,r,i=Vn(t);return i==is?Qa(t):i==ls?(i=t,e=-1,n=Array(i.size),i.forEach(function(t){n[++e]=[t,t]}),n):ja(o(r=t),function(t){return[t,r[t]]})}}function jn(t,e,n,r,i,o,s,a){var u=2&e;if(!u&&"function"!=typeof t)throw new w(Ho);var l=r?r.length:0;l||(e&=-97,r=i=Do),s=s===Do?s:V(Gi(s),0),a=a===Do?a:Gi(a),l-=i?i.length:0,64&e&&(g=r,p=i,r=i=Do);var c,h,f,d,g,p,m,v,_,b,y=u?Do:Nn(t),x=[t,e,n,r,i,g,p,o,s,a];return y&&(h=y,d=(c=x)[1],g=h[1],o=(p=d|g)<131,s=g==Go&&8==d||g==Go&&256==d&&c[7].length<=h[8]||384==g&&h[7].length<=h[8]&&8==d,(o||s)&&(1&g&&(c[2]=h[2],p|=1&d?0:4),(d=h[3])&&(f=c[3],c[3]=f?en(f,d,h[4]):d,c[4]=f?eu(c[3],Vo):h[4]),(d=h[5])&&(f=c[5],c[5]=f?nn(f,d,h[6]):d,c[6]=f?eu(c[5],Vo):h[6]),(d=h[7])&&(c[7]=d),g&Go&&(c[8]=null==c[8]?h[8]:G(c[8],h[8])),null==c[9]&&(c[9]=h[9]),c[0]=h[0],c[1]=p)),t=x[0],e=x[1],n=x[2],r=x[3],i=x[4],!(a=x[9]=x[9]===Do?u?0:t.length:V(x[9]-l,0))&&24&e&&(e&=-25),n=e&&1!=e?8==e||16==e?dn(t,e,a):32!=e&&33!=e||i.length?mn.apply(Do,x):xn(t,e,n,r):(v=n,_=1&e,b=fn(m=t),function t(){return(this&&this!==fa&&this instanceof t?b:m).apply(_?v:this,arguments)}),lr((y?je:sr)(n,x),t,e)}function En(t,e,n,r){return t===Do||_i(t,g[n])&&!_.call(r,n)?e:t}function On(t,e,n,r,i,o){return Ai(t)&&Ai(e)&&(o.set(e,t),me(t,e,Do,On,o),o.delete(e)),t}function Tn(t){return Ni(t)?Do:t}function An(t,e,n,r,i,o){var s=1&n,a=t.length,u=e.length;if(a!=u&&!(s&&a<u))return!1;var l=o.get(t),u=o.get(e);if(l&&u)return l==e&&u==t;var c=-1,h=!0,f=2&n?new wt:Do;for(o.set(t,e),o.set(e,t);++c<a;){var d,g=t[c],p=e[c];if(r&&(d=s?r(p,g,c,e,t,o):r(g,p,c,t,e,o)),d!==Do){if(d)continue;h=!1;break}if(f){if(!Aa(e,function(t,e){return!Ga(f,e)&&(g===t||i(g,t,n,r,o))&&f.push(e)})){h=!1;break}}else if(g!==p&&!i(g,p,n,r,o)){h=!1;break}}return o.delete(t),o.delete(e),h}function Ln(t){return ur(rr(t,Do,Sr),t+"")}function qn(t){return Kt(t,lo,Hn)}function Rn(t){return Kt(t,co,Un)}var Nn=rt?function(t){return rt.get(t)}:Io;function In(t){for(var e=t.name+"",n=it[e],r=_.call(it,e)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Pn(t){return(_.call(dt,"placeholder")?dt:t).placeholder}function Wn(){var t=(t=dt.iteratee||Ro)===Ro?le:t;return arguments.length?t(arguments[0],arguments[1]):t}function Fn(t,e){var n,r=t.__data__;return("string"==(t=void 0===(n=e)?"undefined":uu(n))||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==n:null===n)?r["string"==typeof e?"string":"hash"]:r.map}function Bn(t){for(var e=lo(t),n=e.length;n--;){var r=e[n],i=t[r];e[n]=[r,i,er(i)]}return e}function Dn(t,e){e=e,e=null==(t=t)?Do:t[e];return ue(e)?e:Do}var Hn=F?function(e){return null==e?[]:(e=p(e),za(F(e),function(t){return E.call(e,t)}))}:Wo,Un=F?function(t){for(var e=[];t;)Ea(e,Hn(t)),t=M(t);return e}:Wo,Vn=Qt;function Gn(t,e,n){for(var r=-1,i=(e=$e(e,t)).length,o=!1;++r<i;){var s=pr(e[r]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++r!=i?o:!!(i=null==t?0:t.length)&&Ti(i)&&Zn(s,i)&&(wi(t)||xi(t))}function $n(t){return"function"!=typeof t.constructor||tr(t)?{}:gt(M(t))}function Xn(t){return wi(t)||xi(t)||!!(T&&t&&t[T])}function Zn(t,e){var n=void 0===t?"undefined":uu(t);return!!(e=null==e?$o:e)&&("number"==n||"symbol"!=n&&Ks.test(t))&&-1<t&&t%1==0&&t<e}function Yn(t,e,n){if(Ai(n)){var r=void 0===e?"undefined":uu(e);return("number"==r?ki(n)&&Zn(e,n.length):"string"==r&&e in n)&&_i(n[e],t)}}function Jn(t,e){if(!wi(t)){var n=void 0===t?"undefined":uu(t);return"number"==n||"symbol"==n||"boolean"==n||null==t||Fi(t)||(Rs.test(t)||!qs.test(t)||null!=e&&t in p(e))}}function Kn(t){var e=In(t),n=dt[e];if("function"==typeof n&&e in _t.prototype){if(t===n)return 1;n=Nn(n);return n&&t===n[0]}}(J&&Vn(new J(new ArrayBuffer(1)))!=gs||K&&Vn(new K)!=is||Q&&Vn(Q.resolve())!=as||tt&&Vn(new tt)!=ls||et&&Vn(new et)!=fs)&&(Vn=function(t){var e=Qt(t),t=e==ss?t.constructor:Do,t=t?mr(t):"";if(t)switch(t){case ot:return gs;case st:return is;case at:return as;case ut:return ls;case lt:return fs}return e});var Qn=s?Ei:Fo;function tr(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||g)}function er(t){return t==t&&!Ai(t)}function nr(e,n){return function(t){return null!=t&&(t[e]===n&&(n!==Do||e in p(t)))}}function rr(o,s,a){return s=V(s===Do?o.length-1:s,0),function(){for(var t=arguments,e=-1,n=V(t.length-s,0),r=S(n);++e<n;)r[e]=t[s+e];e=-1;for(var i=S(s+1);++e<s;)i[e]=t[e];return i[s]=a(r),ya(o,this,i)}}function ir(t,e){return e.length<2?t:Jt(t,Te(e,0,-1))}function or(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var sr=cr(je),ar=I||function(t,e){return fa.setTimeout(t,e)},ur=cr(Ee);function lr(t,e,n){var r,i,e=e+"";return ur(t,function(t,e){var n=e.length;if(!n)return t;var r=n-1;return e[r]=(1<n?"& ":"")+e[r],e=e.join(2<n?", ":" "),t.replace(Fs,"{\n/* [wrapped with "+e+"] */\n")}(e,(r=(e=(e=e).match(Bs))?e[1].split(Ds):[],i=n,wa(Yo,function(t){var e="_."+t[0];i&t[1]&&!Ca(r,e)&&r.push(e)}),r.sort())))}function cr(n){var r=0,i=0;return function(){var t=$(),e=16-(t-i);if(i=t,0<e){if(800<=++r)return arguments[0]}else r=0;return n.apply(Do,arguments)}}function hr(t,e){var n=-1,r=t.length,i=r-1;for(e=e===Do?r:e;++n<e;){var o=we(n,i),s=t[o];t[o]=t[n],t[n]=s}return t.length=e,t}var fr,dr,gr=(dr=(fr=fi(fr=function(t){var i=[];return 46===t.charCodeAt(0)&&i.push(""),t.replace(Ns,function(t,e,n,r){i.push(n?r.replace(Vs,"$1"):e||t)}),i},function(t){return 500===dr.size&&dr.clear(),t})).cache,fr);function pr(t){if("string"==typeof t||Fi(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function mr(t){if(null!=t){try{return a.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function vr(t){if(t instanceof _t)return t.clone();var e=new vt(t.__wrapped__,t.__chain__);return e.__actions__=rn(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var _r=ke(function(t,e){return zi(t)?Wt(t,Vt(e,1,zi,!0)):[]}),br=ke(function(t,e){var n=jr(e);return zi(n)&&(n=Do),zi(t)?Wt(t,Vt(e,1,zi,!0),Wn(n,2)):[]}),yr=ke(function(t,e){var n=jr(e);return zi(n)&&(n=Do),zi(t)?Wt(t,Vt(e,1,zi,!0),Do,n):[]});function xr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;n=null==n?0:Gi(n);return n<0&&(n=V(r+n,0)),qa(t,Wn(e,3),n)}function wr(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r-1;return n!==Do&&(i=Gi(n),i=n<0?V(r+i,0):G(i,r-1)),qa(t,Wn(e,3),i,!0)}function Sr(t){return(null==t?0:t.length)?Vt(t,1):[]}function kr(t){return t&&t.length?t[0]:Do}var zr=ke(function(t){var e=ja(t,Ve);return e.length&&e[0]===t[0]?re(e):[]}),Cr=ke(function(t){var e=jr(t),n=ja(t,Ve);return e===jr(n)?e=Do:n.pop(),n.length&&n[0]===t[0]?re(n,Wn(e,2)):[]}),Mr=ke(function(t){var e=jr(t),n=ja(t,Ve);return(e="function"==typeof e?e:Do)&&n.pop(),n.length&&n[0]===t[0]?re(n,Do,e):[]});function jr(t){var e=null==t?0:t.length;return e?t[e-1]:Do}var Er=ke(Or);function Or(t,e){return t&&t.length&&e&&e.length?ye(t,e):t}var Tr=Ln(function(t,e){var n=null==t?0:t.length,r=qt(t,e);return xe(t,ja(e,function(t){return Zn(t,n)?+t:t}).sort(tn)),r});function Ar(t){return null==t?t:Y.call(t)}var Lr=ke(function(t){return Pe(Vt(t,1,zi,!0))}),qr=ke(function(t){var e=jr(t);return zi(e)&&(e=Do),Pe(Vt(t,1,zi,!0),Wn(e,2))}),Rr=ke(function(t){var e="function"==typeof(e=jr(t))?e:Do;return Pe(Vt(t,1,zi,!0),Do,e)});function Nr(e){if(!e||!e.length)return[];var n=0;return e=za(e,function(t){return zi(t)&&(n=V(t.length,n),1)}),Da(n,function(t){return ja(e,Wa(t))})}function Ir(t,e){if(!t||!t.length)return[];t=Nr(t);return null==e?t:ja(t,function(t){return ya(e,Do,t)})}var Pr=ke(function(t,e){return zi(t)?Wt(t,e):[]}),Wr=ke(function(t){return He(za(t,zi))}),Fr=ke(function(t){var e=jr(t);return zi(e)&&(e=Do),He(za(t,zi),Wn(e,2))}),Br=ke(function(t){var e="function"==typeof(e=jr(t))?e:Do;return He(za(t,zi),Do,e)}),Dr=ke(Nr);var Hr=ke(function(t){var e=t.length,e="function"==typeof(e=1<e?t[e-1]:Do)?(t.pop(),e):Do;return Ir(t,e)});function Ur(t){t=dt(t);return t.__chain__=!0,t}function Vr(t,e){return e(t)}var Gr=Ln(function(e){function t(t){return qt(t,e)}var n=e.length,r=n?e[0]:0,i=this.__wrapped__;return!(1<n||this.__actions__.length)&&i instanceof _t&&Zn(r)?((i=i.slice(r,+r+(n?1:0))).__actions__.push({func:Vr,args:[t],thisArg:Do}),new vt(i,this.__chain__).thru(function(t){return n&&!t.length&&t.push(Do),t})):this.thru(t)});var $r=sn(function(t,e,n){_.call(t,n)?++t[n]:Lt(t,n,1)});var Xr=gn(xr),Zr=gn(wr);function Yr(t,e){return(wi(t)?wa:Ft)(t,Wn(e,3))}function Jr(t,e){return(wi(t)?Sa:Bt)(t,Wn(e,3))}var Kr=sn(function(t,e,n){_.call(t,n)?t[n].push(e):Lt(t,n,[e])});var Qr=ke(function(t,e,n){var r=-1,i="function"==typeof e,o=ki(t)?S(t.length):[];return Ft(t,function(t){o[++r]=i?ya(e,t,n):ie(t,e,n)}),o}),ti=sn(function(t,e,n){Lt(t,n,e)});function ei(t,e){return(wi(t)?ja:de)(t,Wn(e,3))}var ni=sn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]});var ri=ke(function(t,e){if(null==t)return[];var n=e.length;return 1<n&&Yn(t,e[0],e[1])?e=[]:2<n&&Yn(e[0],e[1],e[2])&&(e=[e[0]]),_e(t,Vt(e,1),[])}),ii=N||function(){return fa.Date.now()};function oi(t,e,n){return e=n?Do:e,e=t&&null==e?t.length:e,jn(t,Go,Do,Do,Do,Do,e)}function si(t,e){var n;if("function"!=typeof e)throw new w(Ho);return t=Gi(t),function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=Do),n}}var ai=ke(function(t,e,n){var r,i=1;return n.length&&(r=eu(n,Pn(ai)),i|=32),jn(t,i,e,n,r)}),ui=ke(function(t,e,n){var r,i=3;return n.length&&(r=eu(n,Pn(ui)),i|=32),jn(e,i,t,n,r)});function li(r,n,t){var i,o,s,a,u,l,c=0,h=!1,f=!1,e=!0;if("function"!=typeof r)throw new w(Ho);function d(t){var e=i,n=o;return i=o=Do,c=t,a=r.apply(n,e)}function g(t){var e=t-l;return l===Do||n<=e||e<0||f&&s<=t-c}function p(){var t,e=ii();if(g(e))return m(e);u=ar(p,(e=n-((t=e)-l),f?G(e,s-(t-c)):e))}function m(t){return u=Do,e&&i?d(t):(i=o=Do,a)}function v(){var t=ii(),e=g(t);if(i=arguments,o=this,l=t,e){if(u===Do)return c=e=l,u=ar(p,n),h?d(e):a;if(f)return Ye(u),u=ar(p,n),d(l)}return u===Do&&(u=ar(p,n)),a}return n=Xi(n)||0,Ai(t)&&(h=!!t.leading,f="maxWait"in t,s=f?V(Xi(t.maxWait)||0,n):s,e="trailing"in t?!!t.trailing:e),v.cancel=function(){u!==Do&&Ye(u),c=0,i=l=o=u=Do},v.flush=function(){return u===Do?a:m(ii())},v}var ci=ke(function(t,e){return Pt(t,1,e)}),hi=ke(function(t,e,n){return Pt(t,Xi(e)||0,n)});function fi(r,i){if("function"!=typeof r||null!=i&&"function"!=typeof i)throw new w(Ho);function o(){var t=arguments,e=i?i.apply(this,t):t[0],n=o.cache;return n.has(e)?n.get(e):(t=r.apply(this,t),o.cache=n.set(e,t)||n,t)}return o.cache=new(fi.Cache||xt),o}function di(e){if("function"!=typeof e)throw new w(Ho);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}fi.Cache=xt;var gi=Xe(function(r,i){var o=(i=1==i.length&&wi(i[0])?ja(i[0],Ua(Wn())):ja(Vt(i,1),Ua(Wn()))).length;return ke(function(t){for(var e=-1,n=G(t.length,o);++e<n;)t[e]=i[e].call(this,t[e]);return ya(r,this,t)})}),pi=ke(function(t,e){var n=eu(e,Pn(pi));return jn(t,32,Do,e,n)}),mi=ke(function(t,e){var n=eu(e,Pn(mi));return jn(t,64,Do,e,n)}),vi=Ln(function(t,e){return jn(t,256,Do,Do,Do,e)});function _i(t,e){return t===e||t!=t&&e!=e}var bi=Sn(te),yi=Sn(function(t,e){return e<=t}),xi=oe(function(){return arguments}())?oe:function(t){return Li(t)&&_.call(t,"callee")&&!E.call(t,"callee")},wi=S.isArray,Si=ga?Ua(ga):function(t){return Li(t)&&Qt(t)==ds};function ki(t){return null!=t&&Ti(t.length)&&!Ei(t)}function zi(t){return Li(t)&&ki(t)}var Ci=B||Fo,Mi=pa?Ua(pa):function(t){return Li(t)&&Qt(t)==ts};function ji(t){if(!Li(t))return!1;var e=Qt(t);return e==es||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!Ni(t)}function Ei(t){if(!Ai(t))return!1;t=Qt(t);return t==ns||t==rs||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Oi(t){return"number"==typeof t&&t==Gi(t)}function Ti(t){return"number"==typeof t&&-1<t&&t%1==0&&t<=$o}function Ai(t){var e=void 0===t?"undefined":uu(t);return null!=t&&("object"==e||"function"==e)}function Li(t){return null!=t&&"object"==(void 0===t?"undefined":uu(t))}var qi=ma?Ua(ma):function(t){return Li(t)&&Vn(t)==is};function Ri(t){return"number"==typeof t||Li(t)&&Qt(t)==os}function Ni(t){if(!Li(t)||Qt(t)!=ss)return!1;t=M(t);if(null===t)return!0;t=_.call(t,"constructor")&&t.constructor;return"function"==typeof t&&t instanceof t&&a.call(t)==v}var Ii=va?Ua(va):function(t){return Li(t)&&Qt(t)==us};var Pi=_a?Ua(_a):function(t){return Li(t)&&Vn(t)==ls};function Wi(t){return"string"==typeof t||!wi(t)&&Li(t)&&Qt(t)==cs}function Fi(t){return"symbol"==(void 0===t?"undefined":uu(t))||Li(t)&&Qt(t)==hs}var Bi=ba?Ua(ba):function(t){return Li(t)&&Ti(t.length)&&!!ua[Qt(t)]};var Di=Sn(fe),Hi=Sn(function(t,e){return t<=e});function Ui(t){if(!t)return[];if(ki(t))return(Wi(t)?iu:rn)(t);if(A&&t[A])return function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}(t[A]());var e=Vn(t);return(e==is?Qa:e==ls?nu:bo)(t)}function Vi(t){return t?(t=Xi(t))!==1/0&&t!==-1/0?t==t?t:0:17976931348623157e292*(t<0?-1:1):0===t?t:0}function Gi(t){var e=Vi(t),t=e%1;return e==e?t?e-t:e:0}function $i(t){return t?Rt(Gi(t),0,Zo):0}function Xi(t){if("number"==typeof t)return t;if(Fi(t))return Xo;if(Ai(t)&&(t=Ai(e="function"==typeof t.valueOf?t.valueOf():t)?e+"":e),"string"!=typeof t)return 0===t?t:+t;t=Ha(t);var e=Zs.test(t);return e||Js.test(t)?ha(t.slice(2),e?2:8):Xs.test(t)?Xo:+t}function Zi(t){return on(t,co(t))}function Yi(t){return null==t?"":Ie(t)}var Ji=an(function(t,e){if(tr(e)||ki(e))on(e,lo(e),t);else for(var n in e)_.call(e,n)&&Et(t,n,e[n])}),Ki=an(function(t,e){on(e,co(e),t)}),Qi=an(function(t,e,n,r){on(e,co(e),t,r)}),to=an(function(t,e,n,r){on(e,lo(e),t,r)}),eo=Ln(qt);var no=ke(function(t,e){t=p(t);var n=-1,r=e.length,i=2<r?e[2]:Do;for(i&&Yn(e[0],e[1],i)&&(r=1);++n<r;)for(var o=e[n],s=co(o),a=-1,u=s.length;++a<u;){var l=s[a],c=t[l];(c===Do||_i(c,g[l])&&!_.call(t,l))&&(t[l]=o[l])}return t}),ro=ke(function(t){return t.push(Do,On),ya(fo,Do,t)});function io(t,e,n){e=null==t?Do:Jt(t,e);return e===Do?n:e}function oo(t,e){return null!=t&&Gn(t,e,ne)}var so=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=m.call(e)),t[e]=n},Ao(qo)),ao=vn(function(t,e,n){null!=e&&"function"!=typeof e.toString&&(e=m.call(e)),_.call(t,e)?t[e].push(n):t[e]=[n]},Wn),uo=ke(ie);function lo(t){return(ki(t)?kt:ce)(t)}function co(t){return ki(t)?kt(t,!0):he(t)}var ho=an(function(t,e,n){me(t,e,n)}),fo=an(function(t,e,n,r){me(t,e,n,r)}),go=Ln(function(e,t){var n={};if(null==e)return n;var r=!1;t=ja(t,function(t){return t=$e(t,e),r=r||1<t.length,t}),on(e,Rn(e),n),r&&(n=Nt(n,7,Tn));for(var i=t.length;i--;)We(n,t[i]);return n});var po=Ln(function(t,e){return null==t?{}:be(n=t,e,function(t,e){return oo(n,e)});var n});function mo(t,n){if(null==t)return{};var e=ja(Rn(t),function(t){return[t]});return n=Wn(n),be(t,e,function(t,e){return n(t,e[0])})}var vo=Mn(lo),_o=Mn(co);function bo(t){return null==t?[]:Va(t,lo(t))}var yo=hn(function(t,e,n){return e=e.toLowerCase(),t+(n?xo(e):e)});function xo(t){return Eo(Yi(t).toLowerCase())}function wo(t){return(t=Yi(t))&&t.replace(Qs,Za).replace(ra,"")}var So=hn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),ko=hn(function(t,e,n){return t+(n?" ":"")+e.toLowerCase()}),zo=cn("toLowerCase");var Co=hn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()});var Mo=hn(function(t,e,n){return t+(n?" ":"")+Eo(e)});var jo=hn(function(t,e,n){return t+(n?" ":"")+e.toUpperCase()}),Eo=cn("toUpperCase");function Oo(t,e,n){return t=Yi(t),(e=n?Do:e)===Do?(n=t,oa.test(n)?t.match(ia)||[]:t.match(Hs)||[]):t.match(e)||[]}var To=ke(function(t,e){try{return ya(t,Do,e)}catch(t){return ji(t)?t:new h(t)}}),r=Ln(function(e,t){return wa(t,function(t){t=pr(t),Lt(e,t,ai(e[t],e))}),e});function Ao(t){return function(){return t}}var Lo=pn(),x=pn(!0);function qo(t){return t}function Ro(t){return le("function"==typeof t?t:Nt(t,1))}n=ke(function(e,n){return function(t){return ie(t,e,n)}}),e=ke(function(e,n){return function(t){return ie(e,t,n)}});function No(r,e,t){var n=lo(e),i=Yt(e,n);null!=t||Ai(e)&&(i.length||!n.length)||(t=e,e=r,r=this,i=Yt(e,lo(e)));var o=!(Ai(t)&&"chain"in t&&!t.chain),s=Ei(r);return wa(i,function(t){var n=e[t];r[t]=n,s&&(r.prototype[t]=function(){var t=this.__chain__;if(o||t){var e=r(this.__wrapped__);return(e.__actions__=rn(this.__actions__)).push({func:n,args:arguments,thisArg:r}),e.__chain__=t,e}return n.apply(r,Ea([this.value()],arguments))})}),r}function Io(){}k=bn(ja),ct=bn(ka),R=bn(Aa);function Po(t){return Jn(t)?Wa(pr(t)):(e=t,function(t){return Jt(t,e)});var e}J=wn(),Q=wn(!0);function Wo(){return[]}function Fo(){return!1}et=_n(function(t,e){return t+e},0),s=zn("ceil"),I=_n(function(t,e){return t/e},1),Ee=zn("floor");var Bo,N=_n(function(t,e){return t*e},1),Xe=zn("round"),B=_n(function(t,e){return t-e},0);return dt.after=function(t,e){if("function"!=typeof e)throw new w(Ho);return t=Gi(t),function(){if(--t<1)return e.apply(this,arguments)}},dt.ary=oi,dt.assign=Ji,dt.assignIn=Ki,dt.assignInWith=Qi,dt.assignWith=to,dt.at=eo,dt.before=si,dt.bind=ai,dt.bindAll=r,dt.bindKey=ui,dt.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return wi(t)?t:[t]},dt.chain=Ur,dt.chunk=function(t,e,n){e=(n?Yn(t,e,n):e===Do)?1:V(Gi(e),0);var r=null==t?0:t.length;if(!r||e<1)return[];for(var i=0,o=0,s=S(P(r/e));i<r;)s[o++]=Te(t,i,i+=e);return s},dt.compact=function(t){for(var e=-1,n=null==t?0:t.length,r=0,i=[];++e<n;){var o=t[e];o&&(i[r++]=o)}return i},dt.concat=function(){var t=arguments.length;if(!t)return[];for(var e=S(t-1),n=arguments[0],r=t;r--;)e[r-1]=arguments[r];return Ea(wi(n)?rn(n):[n],Vt(e,1))},dt.cond=function(r){var i=null==r?0:r.length,e=Wn();return r=i?ja(r,function(t){if("function"!=typeof t[1])throw new w(Ho);return[e(t[0]),t[1]]}):[],ke(function(t){for(var e=-1;++e<i;){var n=r[e];if(ya(n[0],this,t))return ya(n[1],this,t)}})},dt.conforms=function(t){return e=Nt(t,1),n=lo(e),function(t){return It(t,e,n)};var e,n},dt.constant=Ao,dt.countBy=$r,dt.create=function(t,e){return t=gt(t),null==e?t:At(t,e)},dt.curry=function t(e,n,r){n=jn(e,8,Do,Do,Do,Do,Do,n=r?Do:n);return n.placeholder=t.placeholder,n},dt.curryRight=function t(e,n,r){n=jn(e,16,Do,Do,Do,Do,Do,n=r?Do:n);return n.placeholder=t.placeholder,n},dt.debounce=li,dt.defaults=no,dt.defaultsDeep=ro,dt.defer=ci,dt.delay=hi,dt.difference=_r,dt.differenceBy=br,dt.differenceWith=yr,dt.drop=function(t,e,n){var r=null==t?0:t.length;return r?Te(t,(e=n||e===Do?1:Gi(e))<0?0:e,r):[]},dt.dropRight=function(t,e,n){var r=null==t?0:t.length;return r?Te(t,0,(e=r-(e=n||e===Do?1:Gi(e)))<0?0:e):[]},dt.dropRightWhile=function(t,e){return t&&t.length?Be(t,Wn(e,3),!0,!0):[]},dt.dropWhile=function(t,e){return t&&t.length?Be(t,Wn(e,3),!0):[]},dt.fill=function(t,e,n,r){var i=null==t?0:t.length;return i?(n&&"number"!=typeof n&&Yn(t,e,n)&&(n=0,r=i),function(t,e,n,r){var i=t.length;for((n=Gi(n))<0&&(n=i<-n?0:i+n),(r=r===Do||i<r?i:Gi(r))<0&&(r+=i),r=r<n?0:$i(r);n<r;)t[n++]=e;return t}(t,e,n,r)):[]},dt.filter=function(t,e){return(wi(t)?za:Ut)(t,Wn(e,3))},dt.flatMap=function(t,e){return Vt(ei(t,e),1)},dt.flatMapDeep=function(t,e){return Vt(ei(t,e),1/0)},dt.flatMapDepth=function(t,e,n){return n=n===Do?1:Gi(n),Vt(ei(t,e),n)},dt.flatten=Sr,dt.flattenDeep=function(t){return(null==t?0:t.length)?Vt(t,1/0):[]},dt.flattenDepth=function(t,e){return(null==t?0:t.length)?Vt(t,e=e===Do?1:Gi(e)):[]},dt.flip=function(t){return jn(t,512)},dt.flow=Lo,dt.flowRight=x,dt.fromPairs=function(t){for(var e=-1,n=null==t?0:t.length,r={};++e<n;){var i=t[e];r[i[0]]=i[1]}return r},dt.functions=function(t){return null==t?[]:Yt(t,lo(t))},dt.functionsIn=function(t){return null==t?[]:Yt(t,co(t))},dt.groupBy=Kr,dt.initial=function(t){return(null==t?0:t.length)?Te(t,0,-1):[]},dt.intersection=zr,dt.intersectionBy=Cr,dt.intersectionWith=Mr,dt.invert=so,dt.invertBy=ao,dt.invokeMap=Qr,dt.iteratee=Ro,dt.keyBy=ti,dt.keys=lo,dt.keysIn=co,dt.map=ei,dt.mapKeys=function(t,r){var i={};return r=Wn(r,3),Xt(t,function(t,e,n){Lt(i,r(t,e,n),t)}),i},dt.mapValues=function(t,r){var i={};return r=Wn(r,3),Xt(t,function(t,e,n){Lt(i,e,r(t,e,n))}),i},dt.matches=function(t){return ge(Nt(t,1))},dt.matchesProperty=function(t,e){return pe(t,Nt(e,1))},dt.memoize=fi,dt.merge=ho,dt.mergeWith=fo,dt.method=n,dt.methodOf=e,dt.mixin=No,dt.negate=di,dt.nthArg=function(e){return e=Gi(e),ke(function(t){return ve(t,e)})},dt.omit=go,dt.omitBy=function(t,e){return mo(t,di(Wn(e)))},dt.once=function(t){return si(2,t)},dt.orderBy=function(t,e,n,r){return null==t?[]:(wi(e)||(e=null==e?[]:[e]),wi(n=r?Do:n)||(n=null==n?[]:[n]),_e(t,e,n))},dt.over=k,dt.overArgs=gi,dt.overEvery=ct,dt.overSome=R,dt.partial=pi,dt.partialRight=mi,dt.partition=ni,dt.pick=po,dt.pickBy=mo,dt.property=Po,dt.propertyOf=function(e){return function(t){return null==e?Do:Jt(e,t)}},dt.pull=Er,dt.pullAll=Or,dt.pullAllBy=function(t,e,n){return t&&t.length&&e&&e.length?ye(t,e,Wn(n,2)):t},dt.pullAllWith=function(t,e,n){return t&&t.length&&e&&e.length?ye(t,e,Do,n):t},dt.pullAt=Tr,dt.range=J,dt.rangeRight=Q,dt.rearg=vi,dt.reject=function(t,e){return(wi(t)?za:Ut)(t,di(Wn(e,3)))},dt.remove=function(t,e){var n=[];if(!t||!t.length)return n;var r=-1,i=[],o=t.length;for(e=Wn(e,3);++r<o;){var s=t[r];e(s,r,t)&&(n.push(s),i.push(r))}return xe(t,i),n},dt.rest=function(t,e){if("function"!=typeof t)throw new w(Ho);return ke(t,e=e===Do?e:Gi(e))},dt.reverse=Ar,dt.sampleSize=function(t,e,n){return e=(n?Yn(t,e,n):e===Do)?1:Gi(e),(wi(t)?Ct:Ce)(t,e)},dt.set=function(t,e,n){return null==t?t:Me(t,e,n)},dt.setWith=function(t,e,n,r){return r="function"==typeof r?r:Do,null==t?t:Me(t,e,n,r)},dt.shuffle=function(t){return(wi(t)?Mt:Oe)(t)},dt.slice=function(t,e,n){var r=null==t?0:t.length;return r?(n=n&&"number"!=typeof n&&Yn(t,e,n)?(e=0,r):(e=null==e?0:Gi(e),n===Do?r:Gi(n)),Te(t,e,n)):[]},dt.sortBy=ri,dt.sortedUniq=function(t){return t&&t.length?Re(t):[]},dt.sortedUniqBy=function(t,e){return t&&t.length?Re(t,Wn(e,2)):[]},dt.split=function(t,e,n){return n&&"number"!=typeof n&&Yn(t,e,n)&&(e=n=Do),(n=n===Do?Zo:n>>>0)?(t=Yi(t))&&("string"==typeof e||null!=e&&!Ii(e))&&!(e=Ie(e))&&Ka(t)?Ze(iu(t),0,n):t.split(e,n):[]},dt.spread=function(n,r){if("function"!=typeof n)throw new w(Ho);return r=null==r?0:V(Gi(r),0),ke(function(t){var e=t[r],t=Ze(t,0,r);return e&&Ea(t,e),ya(n,this,t)})},dt.tail=function(t){var e=null==t?0:t.length;return e?Te(t,1,e):[]},dt.take=function(t,e,n){return t&&t.length?Te(t,0,(e=n||e===Do?1:Gi(e))<0?0:e):[]},dt.takeRight=function(t,e,n){var r=null==t?0:t.length;return r?Te(t,(e=r-(e=n||e===Do?1:Gi(e)))<0?0:e,r):[]},dt.takeRightWhile=function(t,e){return t&&t.length?Be(t,Wn(e,3),!1,!0):[]},dt.takeWhile=function(t,e){return t&&t.length?Be(t,Wn(e,3)):[]},dt.tap=function(t,e){return e(t),t},dt.throttle=function(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new w(Ho);return Ai(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),li(t,e,{leading:r,maxWait:e,trailing:i})},dt.thru=Vr,dt.toArray=Ui,dt.toPairs=vo,dt.toPairsIn=_o,dt.toPath=function(t){return wi(t)?ja(t,pr):Fi(t)?[t]:rn(gr(Yi(t)))},dt.toPlainObject=Zi,dt.transform=function(t,r,i){var e,n=wi(t),o=n||Ci(t)||Bi(t);return r=Wn(r,4),null==i&&(e=t&&t.constructor,i=o?n?new e:[]:Ai(t)&&Ei(e)?gt(M(t)):{}),(o?wa:Xt)(t,function(t,e,n){return r(i,t,e,n)}),i},dt.unary=function(t){return oi(t,1)},dt.union=Lr,dt.unionBy=qr,dt.unionWith=Rr,dt.uniq=function(t){return t&&t.length?Pe(t):[]},dt.uniqBy=function(t,e){return t&&t.length?Pe(t,Wn(e,2)):[]},dt.uniqWith=function(t,e){return e="function"==typeof e?e:Do,t&&t.length?Pe(t,Do,e):[]},dt.unset=function(t,e){return null==t||We(t,e)},dt.unzip=Nr,dt.unzipWith=Ir,dt.update=function(t,e,n){return null==t?t:Fe(t,e,Ge(n))},dt.updateWith=function(t,e,n,r){return r="function"==typeof r?r:Do,null==t?t:Fe(t,e,Ge(n),r)},dt.values=bo,dt.valuesIn=function(t){return null==t?[]:Va(t,co(t))},dt.without=Pr,dt.words=Oo,dt.wrap=function(t,e){return pi(Ge(e),t)},dt.xor=Wr,dt.xorBy=Fr,dt.xorWith=Br,dt.zip=Dr,dt.zipObject=function(t,e){return Ue(t||[],e||[],Et)},dt.zipObjectDeep=function(t,e){return Ue(t||[],e||[],Me)},dt.zipWith=Hr,dt.entries=vo,dt.entriesIn=_o,dt.extend=Ki,dt.extendWith=Qi,No(dt,dt),dt.add=et,dt.attempt=To,dt.camelCase=yo,dt.capitalize=xo,dt.ceil=s,dt.clamp=function(t,e,n){return n===Do&&(n=e,e=Do),n!==Do&&(n=(n=Xi(n))==n?n:0),e!==Do&&(e=(e=Xi(e))==e?e:0),Rt(Xi(t),e,n)},dt.clone=function(t){return Nt(t,4)},dt.cloneDeep=function(t){return Nt(t,5)},dt.cloneDeepWith=function(t,e){return Nt(t,5,e="function"==typeof e?e:Do)},dt.cloneWith=function(t,e){return Nt(t,4,e="function"==typeof e?e:Do)},dt.conformsTo=function(t,e){return null==e||It(t,e,lo(e))},dt.deburr=wo,dt.defaultTo=function(t,e){return null==t||t!=t?e:t},dt.divide=I,dt.endsWith=function(t,e,n){t=Yi(t),e=Ie(e);var r=t.length,r=n=n===Do?r:Rt(Gi(n),0,r);return 0<=(n-=e.length)&&t.slice(n,r)==e},dt.eq=_i,dt.escape=function(t){return(t=Yi(t))&&Os.test(t)?t.replace(js,Ya):t},dt.escapeRegExp=function(t){return(t=Yi(t))&&Ps.test(t)?t.replace(Is,"\\$&"):t},dt.every=function(t,e,n){var r=wi(t)?ka:Dt;return n&&Yn(t,e,n)&&(e=Do),r(t,Wn(e,3))},dt.find=Xr,dt.findIndex=xr,dt.findKey=function(t,e){return La(t,Wn(e,3),Xt)},dt.findLast=Zr,dt.findLastIndex=wr,dt.findLastKey=function(t,e){return La(t,Wn(e,3),Zt)},dt.floor=Ee,dt.forEach=Yr,dt.forEachRight=Jr,dt.forIn=function(t,e){return null==t?t:Gt(t,Wn(e,3),co)},dt.forInRight=function(t,e){return null==t?t:$t(t,Wn(e,3),co)},dt.forOwn=function(t,e){return t&&Xt(t,Wn(e,3))},dt.forOwnRight=function(t,e){return t&&Zt(t,Wn(e,3))},dt.get=io,dt.gt=bi,dt.gte=yi,dt.has=function(t,e){return null!=t&&Gn(t,e,ee)},dt.hasIn=oo,dt.head=kr,dt.identity=qo,dt.includes=function(t,e,n,r){return t=ki(t)?t:bo(t),n=n&&!r?Gi(n):0,r=t.length,n<0&&(n=V(r+n,0)),Wi(t)?n<=r&&-1<t.indexOf(e,n):!!r&&-1<Ra(t,e,n)},dt.indexOf=function(t,e,n){var r=null==t?0:t.length;return r?((n=null==n?0:Gi(n))<0&&(n=V(r+n,0)),Ra(t,e,n)):-1},dt.inRange=function(t,e,n){return e=Vi(e),n===Do?(n=e,e=0):n=Vi(n),(t=t=Xi(t))>=G(e=e,n=n)&&t<V(e,n)},dt.invoke=uo,dt.isArguments=xi,dt.isArray=wi,dt.isArrayBuffer=Si,dt.isArrayLike=ki,dt.isArrayLikeObject=zi,dt.isBoolean=function(t){return!0===t||!1===t||Li(t)&&Qt(t)==Qo},dt.isBuffer=Ci,dt.isDate=Mi,dt.isElement=function(t){return Li(t)&&1===t.nodeType&&!Ni(t)},dt.isEmpty=function(t){if(null==t)return!0;if(ki(t)&&(wi(t)||"string"==typeof t||"function"==typeof t.splice||Ci(t)||Bi(t)||xi(t)))return!t.length;var e,n=Vn(t);if(n==is||n==ls)return!t.size;if(tr(t))return!ce(t).length;for(e in t)if(_.call(t,e))return!1;return!0},dt.isEqual=function(t,e){return se(t,e)},dt.isEqualWith=function(t,e,n){var r=(n="function"==typeof n?n:Do)?n(t,e):Do;return r===Do?se(t,e,Do,n):!!r},dt.isError=ji,dt.isFinite=function(t){return"number"==typeof t&&D(t)},dt.isFunction=Ei,dt.isInteger=Oi,dt.isLength=Ti,dt.isMap=qi,dt.isMatch=function(t,e){return t===e||ae(t,e,Bn(e))},dt.isMatchWith=function(t,e,n){return n="function"==typeof n?n:Do,ae(t,e,Bn(e),n)},dt.isNaN=function(t){return Ri(t)&&t!=+t},dt.isNative=function(t){if(Qn(t))throw new h("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ue(t)},dt.isNil=function(t){return null==t},dt.isNull=function(t){return null===t},dt.isNumber=Ri,dt.isObject=Ai,dt.isObjectLike=Li,dt.isPlainObject=Ni,dt.isRegExp=Ii,dt.isSafeInteger=function(t){return Oi(t)&&-$o<=t&&t<=$o},dt.isSet=Pi,dt.isString=Wi,dt.isSymbol=Fi,dt.isTypedArray=Bi,dt.isUndefined=function(t){return t===Do},dt.isWeakMap=function(t){return Li(t)&&Vn(t)==fs},dt.isWeakSet=function(t){return Li(t)&&"[object WeakSet]"==Qt(t)},dt.join=function(t,e){return null==t?"":H.call(t,e)},dt.kebabCase=So,dt.last=jr,dt.lastIndexOf=function(t,e,n){var r=null==t?0:t.length;if(!r)return-1;var i=r;return n!==Do&&(i=(i=Gi(n))<0?V(r+i,0):G(i,r-1)),e==e?function(t,e,n){for(var r=n+1;r--;)if(t[r]===e)return r;return r}(t,e,i):qa(t,Ia,i,!0)},dt.lowerCase=ko,dt.lowerFirst=zo,dt.lt=Di,dt.lte=Hi,dt.max=function(t){return t&&t.length?Ht(t,qo,te):Do},dt.maxBy=function(t,e){return t&&t.length?Ht(t,Wn(e,2),te):Do},dt.mean=function(t){return Pa(t,qo)},dt.meanBy=function(t,e){return Pa(t,Wn(e,2))},dt.min=function(t){return t&&t.length?Ht(t,qo,fe):Do},dt.minBy=function(t,e){return t&&t.length?Ht(t,Wn(e,2),fe):Do},dt.stubArray=Wo,dt.stubFalse=Fo,dt.stubObject=function(){return{}},dt.stubString=function(){return""},dt.stubTrue=function(){return!0},dt.multiply=N,dt.nth=function(t,e){return t&&t.length?ve(t,Gi(e)):Do},dt.noConflict=function(){return fa._===this&&(fa._=b),this},dt.noop=Io,dt.now=ii,dt.pad=function(t,e,n){t=Yi(t);var r=(e=Gi(e))?ru(t):0;return!e||e<=r?t:yn(W(r=(e-r)/2),n)+t+yn(P(r),n)},dt.padEnd=function(t,e,n){t=Yi(t);var r=(e=Gi(e))?ru(t):0;return e&&r<e?t+yn(e-r,n):t},dt.padStart=function(t,e,n){t=Yi(t);var r=(e=Gi(e))?ru(t):0;return e&&r<e?yn(e-r,n)+t:t},dt.parseInt=function(t,e,n){return e=n||null==e?0:e&&+e,X(Yi(t).replace(Ws,""),e||0)},dt.random=function(t,e,n){var r;if(n&&"boolean"!=typeof n&&Yn(t,e,n)&&(e=n=Do),n===Do&&("boolean"==typeof e?(n=e,e=Do):"boolean"==typeof t&&(n=t,t=Do)),t===Do&&e===Do?(t=0,e=1):(t=Vi(t),e===Do?(e=t,t=0):e=Vi(e)),e<t&&(r=t,t=e,e=r),n||t%1||e%1){n=Z();return G(t+n*(e-t+ca("1e-"+((n+"").length-1))),e)}return we(t,e)},dt.reduce=function(t,e,n){var r=wi(t)?Oa:Fa,i=arguments.length<3;return r(t,Wn(e,4),n,i,Ft)},dt.reduceRight=function(t,e,n){var r=wi(t)?Ta:Fa,i=arguments.length<3;return r(t,Wn(e,4),n,i,Bt)},dt.repeat=function(t,e,n){return e=(n?Yn(t,e,n):e===Do)?1:Gi(e),Se(Yi(t),e)},dt.replace=function(){var t=arguments,e=Yi(t[0]);return t.length<3?e:e.replace(t[1],t[2])},dt.result=function(t,e,n){var r=-1,i=(e=$e(e,t)).length;for(i||(i=1,t=Do);++r<i;){var o=null==t?Do:t[pr(e[r])];o===Do&&(r=i,o=n),t=Ei(o)?o.call(t):o}return t},dt.round=Xe,dt.runInContext=t,dt.sample=function(t){return(wi(t)?zt:ze)(t)},dt.size=function(t){if(null==t)return 0;if(ki(t))return Wi(t)?ru(t):t.length;var e=Vn(t);return e==is||e==ls?t.size:ce(t).length},dt.snakeCase=Co,dt.some=function(t,e,n){var r=wi(t)?Aa:Ae;return n&&Yn(t,e,n)&&(e=Do),r(t,Wn(e,3))},dt.sortedIndex=function(t,e){return Le(t,e)},dt.sortedIndexBy=function(t,e,n){return qe(t,e,Wn(n,2))},dt.sortedIndexOf=function(t,e){var n=null==t?0:t.length;if(n){var r=Le(t,e);if(r<n&&_i(t[r],e))return r}return-1},dt.sortedLastIndex=function(t,e){return Le(t,e,!0)},dt.sortedLastIndexBy=function(t,e,n){return qe(t,e,Wn(n,2),!0)},dt.sortedLastIndexOf=function(t,e){if(null==t?0:t.length){var n=Le(t,e,!0)-1;if(_i(t[n],e))return n}return-1},dt.startCase=Mo,dt.startsWith=function(t,e,n){return t=Yi(t),n=null==n?0:Rt(Gi(n),0,t.length),e=Ie(e),t.slice(n,n+e.length)==e},dt.subtract=B,dt.sum=function(t){return t&&t.length?Ba(t,qo):0},dt.sumBy=function(t,e){return t&&t.length?Ba(t,Wn(e,2)):0},dt.template=function(s,t,e){var n=dt.templateSettings;e&&Yn(s,t,e)&&(t=Do),s=Yi(s),t=Qi({},t,n,En);var a,u,r=lo(n=Qi({},t.imports,n.imports,En)),i=Va(n,r),l=0,n=t.interpolate||ta,c="__p += '",n=d((t.escape||ta).source+"|"+n.source+"|"+(n===Ls?Gs:ta).source+"|"+(t.evaluate||ta).source+"|$","g"),o="//# sourceURL="+(_.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++aa+"]")+"\n";if(s.replace(n,function(t,e,n,r,i,o){return n=n||r,c+=s.slice(l,o).replace(ea,Ja),e&&(a=!0,c+="' +\n__e("+e+") +\n'"),i&&(u=!0,c+="';\n"+i+";\n__p += '"),n&&(c+="' +\n((__t = ("+n+")) == null ? '' : __t) +\n'"),l=o+t.length,t}),c+="';\n",t=_.call(t,"variable")&&t.variable){if(Us.test(t))throw new h("Invalid `variable` option passed into `_.template`")}else c="with (obj) {\n"+c+"\n}\n";if(c=(u?c.replace(ks,""):c).replace(zs,"$1").replace(Cs,"$1;"),c="function("+(t||"obj")+") {\n"+(t?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(a?", __e = _.escape":"")+(u?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+c+"return __p\n}",(t=To(function(){return f(r,o+"return "+c).apply(Do,i)})).source=c,ji(t))throw t;return t},dt.times=function(t,e){if((t=Gi(t))<1||$o<t)return[];var n=Zo,r=G(t,Zo);for(e=Wn(e),t-=Zo,r=Da(r,e);++n<t;)e(n);return r},dt.toFinite=Vi,dt.toInteger=Gi,dt.toLength=$i,dt.toLower=function(t){return Yi(t).toLowerCase()},dt.toNumber=Xi,dt.toSafeInteger=function(t){return t?Rt(Gi(t),-$o,$o):0===t?t:0},dt.toString=Yi,dt.toUpper=function(t){return Yi(t).toUpperCase()},dt.trim=function(t,e,n){return(t=Yi(t))&&(n||e===Do)?Ha(t):t&&(e=Ie(e))?(t=iu(t),e=iu(e),Ze(t,$a(t,e),Xa(t,e)+1).join("")):t},dt.trimEnd=function(t,e,n){return(t=Yi(t))&&(n||e===Do)?t.slice(0,ou(t)+1):t&&(e=Ie(e))?Ze(t=iu(t),0,Xa(t,iu(e))+1).join(""):t},dt.trimStart=function(t,e,n){return(t=Yi(t))&&(n||e===Do)?t.replace(Ws,""):t&&(e=Ie(e))?Ze(t=iu(t),$a(t,iu(e))).join(""):t},dt.truncate=function(t,e){var n,r=30,i="...";Ai(e)&&(n="separator"in e?e.separator:n,r="length"in e?Gi(e.length):r,i="omission"in e?Ie(e.omission):i);var o,e=(t=Yi(t)).length;if(Ka(t)&&(e=(o=iu(t)).length),e<=r)return t;if((e=r-ru(i))<1)return i;if(r=o?Ze(o,0,e).join(""):t.slice(0,e),n===Do)return r+i;if(o&&(e+=r.length-e),Ii(n)){if(t.slice(e).search(n)){var s,a=r;for(n.global||(n=d(n.source,Yi($s.exec(n))+"g")),n.lastIndex=0;s=n.exec(a);)var u=s.index;r=r.slice(0,u===Do?e:u)}}else t.indexOf(Ie(n),e)==e||-1<(e=r.lastIndexOf(n))&&(r=r.slice(0,e));return r+i},dt.unescape=function(t){return(t=Yi(t))&&Es.test(t)?t.replace(Ms,su):t},dt.uniqueId=function(t){var e=++u;return Yi(t)+e},dt.upperCase=jo,dt.upperFirst=Eo,dt.each=Yr,dt.eachRight=Jr,dt.first=kr,No(dt,(Bo={},Xt(dt,function(t,e){_.call(dt.prototype,e)||(Bo[e]=t)}),Bo),{chain:!1}),dt.VERSION="4.17.21",wa(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){dt[t].placeholder=dt}),wa(["drop","take"],function(n,r){_t.prototype[n]=function(t){t=t===Do?1:V(Gi(t),0);var e=this.__filtered__&&!r?new _t(this):this.clone();return e.__filtered__?e.__takeCount__=G(t,e.__takeCount__):e.__views__.push({size:G(t,Zo),type:n+(e.__dir__<0?"Right":"")}),e},_t.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),wa(["filter","map","takeWhile"],function(t,e){var n=e+1,r=1==n||3==n;_t.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:Wn(t,3),type:n}),e.__filtered__=e.__filtered__||r,e}}),wa(["head","last"],function(t,e){var n="take"+(e?"Right":"");_t.prototype[t]=function(){return this[n](1).value()[0]}}),wa(["initial","tail"],function(t,e){var n="drop"+(e?"":"Right");_t.prototype[t]=function(){return this.__filtered__?new _t(this):this[n](1)}}),_t.prototype.compact=function(){return this.filter(qo)},_t.prototype.find=function(t){return this.filter(t).head()},_t.prototype.findLast=function(t){return this.reverse().find(t)},_t.prototype.invokeMap=ke(function(e,n){return"function"==typeof e?new _t(this):this.map(function(t){return ie(t,e,n)})}),_t.prototype.reject=function(t){return this.filter(di(Wn(t)))},_t.prototype.slice=function(t,e){t=Gi(t);var n=this;return n.__filtered__&&(0<t||e<0)?new _t(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==Do&&(n=(e=Gi(e))<0?n.dropRight(-e):n.take(e-t)),n)},_t.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},_t.prototype.toArray=function(){return this.take(Zo)},Xt(_t.prototype,function(l,t){var c=/^(?:filter|find|map|reject)|While$/.test(t),h=/^(?:head|last)$/.test(t),f=dt[h?"take"+("last"==t?"Right":""):t],d=h||/^find/.test(t);f&&(dt.prototype[t]=function(){function t(t){return t=f.apply(dt,Ea([t],n)),h&&s?t[0]:t}var e=this.__wrapped__,n=h?[1]:arguments,r=e instanceof _t,i=n[0],o=r||wi(e);o&&c&&"function"==typeof i&&1!=i.length&&(r=o=!1);var s=this.__chain__,a=!!this.__actions__.length,i=d&&!s,a=r&&!a;if(d||!o)return i&&a?l.apply(this,n):(u=this.thru(t),i?h?u.value()[0]:u.value():u);e=a?e:new _t(this);var u=l.apply(e,n);return u.__actions__.push({func:Vr,args:[t],thisArg:Do}),new vt(u,s)})}),wa(["pop","push","shift","sort","splice","unshift"],function(t){var n=o[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:pop|shift)$/.test(t);dt.prototype[t]=function(){var e=arguments;if(!i||this.__chain__)return this[r](function(t){return n.apply(wi(t)?t:[],e)});var t=this.value();return n.apply(wi(t)?t:[],e)}}),Xt(_t.prototype,function(t,e){var n,r=dt[e];r&&(n=r.name+"",_.call(it,n)||(it[n]=[]),it[n].push({name:e,func:r}))}),it[mn(Do,2).name]=[{name:"wrapper",func:Do}],_t.prototype.clone=function(){var t=new _t(this.__wrapped__);return t.__actions__=rn(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=rn(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=rn(this.__views__),t},_t.prototype.reverse=function(){var t;return this.__filtered__?((t=new _t(this)).__dir__=-1,t.__filtered__=!0):(t=this.clone()).__dir__*=-1,t},_t.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,n=wi(t),r=e<0,i=n?t.length:0,o=function(t,e,n){var r=-1,i=n.length;for(;++r<i;){var o=n[r],s=o.size;switch(o.type){case"drop":t+=s;break;case"dropRight":e-=s;break;case"take":e=G(e,t+s);break;case"takeRight":t=V(t,e-s)}}return{start:t,end:e}}(0,i,this.__views__),s=o.start,a=(o=o.end)-s,u=r?o:s-1,l=this.__iteratees__,c=l.length,h=0,f=G(a,this.__takeCount__);if(!n||!r&&i==a&&f==a)return De(t,this.__actions__);var d=[];t:for(;a--&&h<f;){for(var g=-1,p=t[u+=e];++g<c;){var m=l[g],v=m.iteratee,m=m.type,v=v(p);if(2==m)p=v;else if(!v){if(1==m)continue t;break t}}d[h++]=p}return d},dt.prototype.at=Gr,dt.prototype.chain=function(){return Ur(this)},dt.prototype.commit=function(){return new vt(this.value(),this.__chain__)},dt.prototype.next=function(){this.__values__===Do&&(this.__values__=Ui(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?Do:this.__values__[this.__index__++]}},dt.prototype.plant=function(t){for(var e,n=this;n instanceof mt;){var r=vr(n);r.__index__=0,r.__values__=Do,e?i.__wrapped__=r:e=r;var i=r,n=n.__wrapped__}return i.__wrapped__=t,e},dt.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof _t){t=t;return this.__actions__.length&&(t=new _t(this)),(t=t.reverse()).__actions__.push({func:Vr,args:[Ar],thisArg:Do}),new vt(t,this.__chain__)}return this.thru(Ar)},dt.prototype.toJSON=dt.prototype.valueOf=dt.prototype.value=function(){return De(this.__wrapped__,this.__actions__)},dt.prototype.first=dt.prototype.head,A&&(dt.prototype[A]=function(){return this}),dt}();"object"==uu(L(5))&&L(5)?(fa._=au,(q=function(){return au}.call(A,L,A,T))===Do||(T.exports=q)):C?((C.exports=au)._=au,s._=au):fa._=au}).call(void 0)}).call(A,function(){return this}(),L(4)(t))},function(t,e){"use strict";t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(e,t){(function(t){e.exports=t}).call(t,{})},function(t,e,n){"use strict";t.exports.Model=n(7),t.exports.Collection=n(12),t.exports.Events=n(8),t.exports.extend=n(10)},function(t,e,n){"use strict";function r(t,e){t=t||{},e=e||{},this.cid=d.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(t=this.parse(t,e)||{}),t=d.defaults({},t,d.result(this,"defaults")),this.set(t,e),this.changed={},this.initialize.apply(this,arguments)}var f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(8),o=n(10),d=n(11);d.extend(r.prototype,i,{changed:null,validationError:null,idAttribute:"id",initialize:function(){},toJSON:function(t){return d.clone(this.attributes)},sync:function(){return Backbone.sync.apply(this,arguments)},get:function(t){return this.attributes[t]},escape:function(t){return d.escape(this.get(t))},has:function(t){return null!=this.get(t)},set:function(t,e,n){var r,i,o,s,a,u,l;if(null==t)return this;if("object"===(void 0===t?"undefined":f(t))?(i=t,n=e):(i={})[t]=e,n=n||{},!this._validate(i,n))return!1;for(r in o=n.unset,a=n.silent,s=[],t=this._changing,this._changing=!0,t||(this._previousAttributes=d.clone(this.attributes),this.changed={}),l=this.attributes,u=this._previousAttributes,this.idAttribute in i&&(this.id=i[this.idAttribute]),i)e=i[r],d.isEqual(l[r],e)||s.push(r),d.isEqual(u[r],e)?delete this.changed[r]:this.changed[r]=e,o?delete l[r]:l[r]=e;if(!a){s.length&&(this._pending=n);for(var c=0,h=s.length;c<h;c++)this.trigger("change:"+s[c],this,l[s[c]],n)}if(t)return this;if(!a)for(;this._pending;)n=this._pending,this._pending=!1,this.trigger("change",this,n);return this._pending=!1,this._changing=!1,this},unset:function(t,e){return this.set(t,void 0,d.extend({},e,{unset:!0}))},clear:function(t){var e,n={};for(e in this.attributes)n[e]=void 0;return this.set(n,d.extend({},t,{unset:!0}))},hasChanged:function(t){return null==t?!d.isEmpty(this.changed):d.has(this.changed,t)},changedAttributes:function(t){if(!t)return!!this.hasChanged()&&d.clone(this.changed);var e,n,r=!1,i=this._changing?this._previousAttributes:this.attributes;for(n in t)d.isEqual(i[n],e=t[n])||((r=r||{})[n]=e);return r},previous:function(t){return null!=t&&this._previousAttributes?this._previousAttributes[t]:null},previousAttributes:function(){return d.clone(this._previousAttributes)},fetch:function(e){void 0===(e=e?d.clone(e):{}).parse&&(e.parse=!0);var n=this,r=e.success;return e.success=function(t){if(!n.set(n.parse(t,e),e))return!1;r&&r(n,t,e),n.trigger("sync",n,t,e)},wrapError(this,e),this.sync("read",this,e)},save:function(t,e,n){var r,i=this.attributes;if(null==t||"object"===(void 0===t?"undefined":f(t))?(r=t,n=e):(r={})[t]=e,n=d.extend({validate:!0},n),r&&!n.wait){if(!this.set(r,n))return!1}else if(!this._validate(r,n))return!1;r&&n.wait&&(this.attributes=d.extend({},i,r)),void 0===n.parse&&(n.parse=!0);var o=this,s=n.success;return n.success=function(t){o.attributes=i;var e=o.parse(t,n);if(n.wait&&(e=d.extend(r||{},e)),d.isObject(e)&&!o.set(e,n))return!1;s&&s(o,t,n),o.trigger("sync",o,t,n)},wrapError(this,n),"patch"!=(e=this.isNew()?"create":n.patch?"patch":"update")||n.attrs||(n.attrs=r),e=this.sync(e,this,n),r&&n.wait&&(this.attributes=i),e},destroy:function(e){e=e?d.clone(e):{};function n(){r.stopListening(),r.trigger("destroy",r,r.collection,e)}var r=this,i=e.success;if(e.success=function(t){(e.wait||r.isNew())&&n(),i&&i(r,t,e),r.isNew()||r.trigger("sync",r,t,e)},this.isNew())return e.success(),!1;wrapError(this,e);var t=this.sync("delete",this,e);return e.wait||n(),t},url:function(){var t=d.result(this,"urlRoot")||d.result(this.collection,"url")||urlError();return this.isNew()?t:t.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(t,e){return t},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return!this.has(this.idAttribute)},isValid:function(t){return this._validate({},d.extend(t||{},{validate:!0}))},_validate:function(t,e){if(!e.validate||!this.validate)return!0;t=d.extend({},this.attributes,t);t=this.validationError=this.validate(t,e)||null;return!t||(this.trigger("invalid",this,t,d.extend(e,{validationError:t})),!1)}});d.each(["keys","values","pairs","invert","pick","omit","chain","isEmpty"],function(e){d[e]&&(r.prototype[e]=function(){var t=slice.call(arguments);return t.unshift(this.attributes),d[e].apply(d,t)})}),r.extend=o,t.exports=r},function(t,e,n){"use strict";t.exports=n(9)},function(t,e,n){"use strict";var s,r,i,o,h,a,u,f,l,c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};s=Array.prototype.forEach,r=Object.prototype.hasOwnProperty,i=Array.prototype.slice,o=0,h={keys:Object.keys||function(t){if("object"!==(void 0===t?"undefined":c(t))&&"function"!=typeof t||null===t)throw new TypeError("keys() called on a non-object");var e,n=[];for(e in t)t.hasOwnProperty(e)&&(n[n.length]=e);return n},uniqueId:function(t){var e=++o+"";return t?t+e:e},has:function(t,e){return r.call(t,e)},each:function(t,e,n){if(null!=t)if(s&&t.forEach===s)t.forEach(e,n);else if(t.length===+t.length)for(var r=0,i=t.length;r<i;r++)e.call(n,t[r],r,t);else for(var o in t)this.has(t,o)&&e.call(n,t[o],o,t)},once:function(t){var e,n=!1;return function(){return n||(n=!0,e=t.apply(this,arguments),t=null),e}}},a={on:function(t,e,n){return f(this,"on",t,[e,n])&&e&&(this._events||(this._events={}),(this._events[t]||(this._events[t]=[])).push({callback:e,context:n,ctx:n||this})),this},once:function(t,e,n){if(!f(this,"once",t,[e,n])||!e)return this;var r=this,i=h.once(function(){r.off(t,i),e.apply(this,arguments)});return i._callback=e,this.on(t,i,n)},off:function(t,e,n){var r,i,o,s,a,u,l,c;if(!this._events||!f(this,"off",t,[e,n]))return this;if(!t&&!e&&!n)return this._events={},this;for(a=0,u=(s=t?[t]:h.keys(this._events)).length;a<u;a++)if(t=s[a],o=this._events[t]){if(this._events[t]=r=[],e||n)for(l=0,c=o.length;l<c;l++)i=o[l],(e&&e!==i.callback&&e!==i.callback._callback||n&&n!==i.context)&&r.push(i);r.length||delete this._events[t]}return this},trigger:function(t){if(!this._events)return this;var e=i.call(arguments,1);if(!f(this,"trigger",t,e))return this;var n=this._events[t],t=this._events.all;return n&&l(n,e),t&&l(t,arguments),this},stopListening:function(t,e,n){var r=this._listeners;if(!r)return this;var i,o=!e&&!n;for(i in"object"===(void 0===e?"undefined":c(e))&&(n=this),t&&((r={})[t._listenerId]=t),r)r[i].off(e,n,this),o&&delete this._listeners[i];return this}},u=/\s+/,f=function(t,e,n,r){if(!n)return!0;if("object"===(void 0===n?"undefined":c(n))){for(var i in n)t[e].apply(t,[i,n[i]].concat(r));return!1}if(u.test(n)){for(var o=n.split(u),s=0,a=o.length;s<a;s++)t[e].apply(t,[o[s]].concat(r));return!1}return!0},l=function(t,e){var n,r=-1,i=t.length,o=e[0],s=e[1],a=e[2];switch(e.length){case 0:for(;++r<i;)(n=t[r]).callback.call(n.ctx);return;case 1:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o);return;case 2:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s);return;case 3:for(;++r<i;)(n=t[r]).callback.call(n.ctx,o,s,a);return;default:for(;++r<i;)(n=t[r]).callback.apply(n.ctx,e)}},h.each({listenTo:"on",listenToOnce:"once"},function(r,t){a[t]=function(t,e,n){return(this._listeners||(this._listeners={}))[t._listenerId||(t._listenerId=h.uniqueId("l"))]=t,"object"===(void 0===e?"undefined":c(e))&&(n=this),t[r](e,n,this),this}}),a.bind=a.on,a.unbind=a.off,a.mixin=function(e){return h.each(["on","once","off","trigger","stopListening","listenTo","listenToOnce","bind","unbind"],function(t){e[t]=this[t]},this),e},void 0!==t&&t.exports&&(e=t.exports=a),e.BackboneEvents=a},function(t,e,n){var r,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};r=function(){"use strict";var i=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o=function(t){for(var e=1;e<arguments.length;++e){var n=arguments[e];if(n)for(var r in n)t[r]=n[r]}return t};return function(t,e){var n=this,r=t&&i(t,"constructor")?t.constructor:function(){return n.apply(this,arguments)};o(r,n,e);e=function(){this.constructor=r};return e.prototype=n.prototype,r.prototype=new e,t&&o(r.prototype,t),r.__super__=n.prototype,r}},"object"===i(e)?t.exports=r():void 0===(r="function"==typeof(r=r)?r.call(e,n,e,t):r)||(t.exports=r)},function(e,n,r){var i;(function(Ne){"use strict";var t,Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t=function(){var t="object"==("undefined"==typeof self?"undefined":Ie(self))&&self.self===self&&self||"object"==(void 0===Ne?"undefined":Ie(Ne))&&Ne.global===Ne&&Ne||Function("return this")()||{},r=Array.prototype,s=Object.prototype,h="undefined"!=typeof Symbol?Symbol.prototype:null,i=r.push,u=r.slice,f=s.toString,n=s.hasOwnProperty,e="undefined"!=typeof ArrayBuffer,o="undefined"!=typeof DataView,a=Array.isArray,l=Object.keys,c=Object.create,d=e&&ArrayBuffer.isView,g=isNaN,p=isFinite,m=!{toString:null}.propertyIsEnumerable("toString"),v=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],_=Math.pow(2,53)-1;function b(i,o){return o=null==o?i.length-1:+o,function(){for(var t=Math.max(arguments.length-o,0),e=Array(t),n=0;n<t;n++)e[n]=arguments[n+o];switch(o){case 0:return i.call(this,e);case 1:return i.call(this,arguments[0],e);case 2:return i.call(this,arguments[0],arguments[1],e)}for(var r=Array(o+1),n=0;n<o;n++)r[n]=arguments[n];return r[o]=e,i.apply(this,r)}}function y(t){var e=void 0===t?"undefined":Ie(t);return"function"===e||"object"===e&&!!t}function x(t){return void 0===t}function w(t){return!0===t||!1===t||"[object Boolean]"===f.call(t)}function S(t){var e="[object "+t+"]";return function(t){return f.call(t)===e}}var k=S("String"),z=S("Number"),C=S("Date"),M=S("RegExp"),j=S("Error"),E=S("Symbol"),O=S("ArrayBuffer"),T=S("Function"),A=t.document&&t.document.childNodes;"function"!=typeof/./&&"object"!=("undefined"==typeof Int8Array?"undefined":Ie(Int8Array))&&"function"!=typeof A&&(T=function(t){return"function"==typeof t||!1});var L=T,q=S("Object"),R=o&&q(new DataView(new ArrayBuffer(8))),N="undefined"!=typeof Map&&q(new Map),I=S("DataView");var P=R?function(t){return null!=t&&L(t.getInt8)&&O(t.buffer)}:I,W=a||S("Array");function F(t,e){return null!=t&&n.call(t,e)}var B=S("Arguments");!function(){B(arguments)||(B=function(t){return F(t,"callee")})}();var D=B;function H(t){return z(t)&&g(t)}function U(t){return function(){return t}}function V(e){return function(t){t=e(t);return"number"==typeof t&&0<=t&&t<=_}}function G(e){return function(t){return null==t?void 0:t[e]}}var $=G("byteLength"),X=V($),Z=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;var Y=e?function(t){return d?d(t)&&!P(t):X(t)&&Z.test(f.call(t))}:U(!1),J=G("length");function K(t,e){e=function(e){for(var n={},t=e.length,r=0;r<t;++r)n[e[r]]=!0;return{contains:function(t){return!0===n[t]},push:function(t){return n[t]=!0,e.push(t)}}}(e);var n=v.length,r=t.constructor,i=L(r)&&r.prototype||s,o="constructor";for(F(t,o)&&!e.contains(o)&&e.push(o);n--;)(o=v[n])in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function Q(t){if(!y(t))return[];if(l)return l(t);var e,n=[];for(e in t)F(t,e)&&n.push(e);return m&&K(t,n),n}function tt(t,e){var n=Q(e),r=n.length;if(null==t)return!r;for(var i=Object(t),o=0;o<r;o++){var s=n[o];if(e[s]!==i[s]||!(s in i))return!1}return!0}function et(t){return t instanceof et?t:this instanceof et?void(this._wrapped=t):new et(t)}function nt(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,$(t))}et.VERSION="1.13.2",et.prototype.valueOf=et.prototype.toJSON=et.prototype.value=function(){return this._wrapped},et.prototype.toString=function(){return String(this._wrapped)};var rt="[object DataView]";function it(t,e,n,r){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!=t)return e!=e;var i=void 0===t?"undefined":Ie(t);return("function"===i||"object"===i||"object"==(void 0===e?"undefined":Ie(e)))&&function t(e,n,r,i){e instanceof et&&(e=e._wrapped);n instanceof et&&(n=n._wrapped);var o=f.call(e);if(o!==f.call(n))return!1;if(R&&"[object Object]"==o&&P(e)){if(!P(n))return!1;o=rt}switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return h.valueOf.call(e)===h.valueOf.call(n);case"[object ArrayBuffer]":case rt:return t(nt(e),nt(n),r,i)}var s="[object Array]"===o;if(!s&&Y(e)){var a=$(e);if(a!==$(n))return!1;if(e.buffer===n.buffer&&e.byteOffset===n.byteOffset)return!0;s=!0}if(!s){if("object"!=(void 0===e?"undefined":Ie(e))||"object"!=(void 0===n?"undefined":Ie(n)))return!1;var o=e.constructor,a=n.constructor;if(o!==a&&!(L(o)&&o instanceof o&&L(a)&&a instanceof a)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];i=i||[];var u=r.length;for(;u--;)if(r[u]===e)return i[u]===n;r.push(e);i.push(n);if(s){if((u=e.length)!==n.length)return!1;for(;u--;)if(!it(e[u],n[u],r,i))return!1}else{var l,c=Q(e);if(u=c.length,Q(n).length!==u)return!1;for(;u--;)if(l=c[u],!F(n,l)||!it(e[l],n[l],r,i))return!1}r.pop();i.pop();return!0}(t,e,n,r)}function ot(t){if(!y(t))return[];var e,n=[];for(e in t)n.push(e);return m&&K(t,n),n}function st(r){var i=J(r);return function(t){if(null==t)return!1;var e=ot(t);if(J(e))return!1;for(var n=0;n<i;n++)if(!L(t[r[n]]))return!1;return r!==ht||!L(t[at])}}var at="forEach",ut=["clear","delete"],lt=["get","has","set"],ct=ut.concat(at,lt),ht=ut.concat(lt),ft=["add"].concat(ut,at,"has"),dt=N?st(ct):S("Map"),gt=N?st(ht):S("WeakMap"),pt=N?st(ft):S("Set"),mt=S("WeakSet");function vt(t){for(var e=Q(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=t[e[i]];return r}function _t(t){for(var e={},n=Q(t),r=0,i=n.length;r<i;r++)e[t[n[r]]]=n[r];return e}function bt(t){var e,n=[];for(e in t)L(t[e])&&n.push(e);return n.sort()}function yt(u,l){return function(t){var e=arguments.length;if(l&&(t=Object(t)),e<2||null==t)return t;for(var n=1;n<e;n++)for(var r=arguments[n],i=u(r),o=i.length,s=0;s<o;s++){var a=i[s];l&&void 0!==t[a]||(t[a]=r[a])}return t}}var xt=yt(ot),wt=yt(Q),St=yt(ot,!0);function kt(t){if(!y(t))return{};if(c)return c(t);var e=function(){};e.prototype=t;t=new e;return e.prototype=null,t}function zt(t){return W(t)?t:[t]}function Ct(t){return et.toPath(t)}function Mt(t,e){for(var n=e.length,r=0;r<n;r++){if(null==t)return;t=t[e[r]]}return n?t:void 0}function jt(t,e,n){e=Mt(t,Ct(e));return x(e)?n:e}function Et(t){return t}function Ot(e){return e=wt({},e),function(t){return tt(t,e)}}function Tt(e){return e=Ct(e),function(t){return Mt(t,e)}}function At(i,o,t){if(void 0===o)return i;switch(null==t?3:t){case 1:return function(t){return i.call(o,t)};case 3:return function(t,e,n){return i.call(o,t,e,n)};case 4:return function(t,e,n,r){return i.call(o,t,e,n,r)}}return function(){return i.apply(o,arguments)}}function Lt(t,e,n){return null==t?Et:L(t)?At(t,e,n):(y(t)&&!W(t)?Ot:Tt)(t)}function qt(t,e){return Lt(t,e,1/0)}function Rt(t,e,n){return et.iteratee!==qt?et.iteratee(t,e):Lt(t,e,n)}function Nt(){}function It(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}et.toPath=zt,et.iteratee=qt;var Pt=Date.now||function(){return(new Date).getTime()};function Wt(e){function n(t){return e[t]}var t="(?:"+Q(e).join("|")+")",r=RegExp(t),i=RegExp(t,"g");return function(t){return t=null==t?"":""+t,r.test(t)?t.replace(i,n):t}}var Ft={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Bt=Wt(Ft),Dt=Wt(_t(Ft)),Ht=et.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},Ut=/(.)^/,Vt={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Gt=/\\|'|\r|\n|\u2028|\u2029/g;function $t(t){return"\\"+Vt[t]}var Xt=/^\s*(\w|\$)+\s*$/;var Zt=0;function Yt(t,e,n,r,i){if(!(r instanceof e))return t.apply(n,i);n=kt(t.prototype),i=t.apply(n,i);return y(i)?i:n}var Jt=b(function(o,s){var a=Jt.placeholder;return function t(){for(var e=0,n=s.length,r=Array(n),i=0;i<n;i++)r[i]=s[i]===a?arguments[e++]:s[i];for(;e<arguments.length;)r.push(arguments[e++]);return Yt(o,t,this,this,r)}});Jt.placeholder=et;var Kt=b(function(e,n,r){if(!L(e))throw new TypeError("Bind must be called on a function");var i=b(function(t){return Yt(e,i,n,this,r.concat(t))});return i}),Qt=V(J);function te(t,e,n,r){if(r=r||[],e||0===e){if(e<=0)return r.concat(t)}else e=1/0;for(var i=r.length,o=0,s=J(t);o<s;o++){var a=t[o];if(Qt(a)&&(W(a)||D(a)))if(1<e)te(a,e-1,n,r),i=r.length;else for(var u=0,l=a.length;u<l;)r[i++]=a[u++];else n||(r[i++]=a)}return r}var ee=b(function(t,e){var n=(e=te(e,!1,!1)).length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var r=e[n];t[r]=Kt(t[r],t)}return t});var ne=b(function(t,e,n){return setTimeout(function(){return t.apply(null,n)},e)}),re=Jt(ne,et,1);function ie(t){return function(){return!t.apply(this,arguments)}}function oe(t,e){var n;return function(){return 0<--t&&(n=e.apply(this,arguments)),t<=1&&(e=null),n}}t=Jt(oe,2);function se(t,e,n){e=Rt(e,n);for(var r,i=Q(t),o=0,s=i.length;o<s;o++)if(e(t[r=i[o]],r,t))return r}function ae(o){return function(t,e,n){e=Rt(e,n);for(var r=J(t),i=0<o?0:r-1;0<=i&&i<r;i+=o)if(e(t[i],i,t))return i;return-1}}var ue=ae(1),A=ae(-1);function le(t,e,n,r){for(var i=(n=Rt(n,r,1))(e),o=0,s=J(t);o<s;){var a=Math.floor((o+s)/2);n(t[a])<i?o=a+1:s=a}return o}function ce(o,s,a){return function(t,e,n){var r=0,i=J(t);if("number"==typeof n)0<o?r=0<=n?n:Math.max(n+i,r):i=0<=n?Math.min(n+1,i):n+i+1;else if(a&&n&&i)return t[n=a(t,e)]===e?n:-1;if(e!=e)return 0<=(n=s(u.call(t,r,i),H))?n+r:-1;for(n=0<o?r:i-1;0<=n&&n<i;n+=o)if(t[n]===e)return n;return-1}}var he=ce(1,ue,le),T=ce(-1,A);function fe(t,e,n){n=(Qt(t)?ue:se)(t,e,n);if(void 0!==n&&-1!==n)return t[n]}function de(t,e,n){if(e=At(e,n),Qt(t))for(i=0,o=t.length;i<o;i++)e(t[i],i,t);else for(var r=Q(t),i=0,o=r.length;i<o;i++)e(t[r[i]],r[i],t);return t}function ge(t,e,n){e=Rt(e,n);for(var r=!Qt(t)&&Q(t),i=(r||t).length,o=Array(i),s=0;s<i;s++){var a=r?r[s]:s;o[s]=e(t[a],a,t)}return o}function pe(u){return function(t,e,n,r){var i=3<=arguments.length;return function(t,e,n,r){var i=!Qt(t)&&Q(t),o=(i||t).length,s=0<u?0:o-1;for(r||(n=t[i?i[s]:s],s+=u);0<=s&&s<o;s+=u){var a=i?i[s]:s;n=e(n,t[a],a,t)}return n}(t,At(e,r,4),n,i)}}o=pe(1),q=pe(-1);function me(t,r,e){var i=[];return r=Rt(r,e),de(t,function(t,e,n){r(t,e,n)&&i.push(t)}),i}function ve(t,e,n){e=Rt(e,n);for(var r=!Qt(t)&&Q(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(!e(t[s],s,t))return!1}return!0}function _e(t,e,n){e=Rt(e,n);for(var r=!Qt(t)&&Q(t),i=(r||t).length,o=0;o<i;o++){var s=r?r[o]:o;if(e(t[s],s,t))return!0}return!1}function be(t,e,n,r){return Qt(t)||(t=vt(t)),"number"==typeof n&&!r||(n=0),0<=he(t,e,n)}I=b(function(t,n,r){var i,o;return L(n)?o=n:(n=Ct(n),i=n.slice(0,-1),n=n[n.length-1]),ge(t,function(t){var e=o;if(!e){if(i&&i.length&&(t=Mt(t,i)),null==t)return;e=t[n]}return null==e?e:e.apply(t,r)})});function ye(t,e){return ge(t,Tt(e))}function xe(t,r,e){var n,i,o=-1/0,s=-1/0;if(null==r||"number"==typeof r&&"object"!=Ie(t[0])&&null!=t)for(var a=0,u=(t=Qt(t)?t:vt(t)).length;a<u;a++)null!=(n=t[a])&&o<n&&(o=n);else r=Rt(r,e),de(t,function(t,e,n){i=r(t,e,n),(s<i||i===-1/0&&o===-1/0)&&(o=t,s=i)});return o}var we=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Se(t){return t?W(t)?u.call(t):k(t)?t.match(we):Qt(t)?ge(t,Et):vt(t):[]}function ke(t,e,n){if(null==e||n)return Qt(t)||(t=vt(t)),t[It(t.length-1)];var r=Se(t),t=J(r);e=Math.max(Math.min(e,t),0);for(var i=t-1,o=0;o<e;o++){var s=It(o,i),a=r[o];r[o]=r[s],r[s]=a}return r.slice(0,e)}function ze(o,e){return function(n,r,t){var i=e?[[],[]]:{};return r=Rt(r,t),de(n,function(t,e){e=r(t,e,n);o(i,t,e)}),i}}a=ze(function(t,e,n){F(t,n)?t[n].push(e):t[n]=[e]}),e=ze(function(t,e,n){t[n]=e}),lt=ze(function(t,e,n){F(t,n)?t[n]++:t[n]=1}),ut=ze(function(t,e,n){t[n?0:1].push(e)},!0);function Ce(t,e,n){return e in n}var Me=b(function(t,e){var n={},r=e[0];if(null==t)return n;L(r)?(1<e.length&&(r=At(r,e[1])),e=ot(t)):(r=Ce,e=te(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var s=e[i],a=t[s];r(a,s,t)&&(n[s]=a)}return n}),ct=b(function(t,n){var e,r=n[0];return L(r)?(r=ie(r),1<n.length&&(e=n[1])):(n=ge(te(n,!1,!1),String),r=function(t,e){return!be(n,e)}),Me(t,r,e)});function je(t,e,n){return u.call(t,0,Math.max(0,t.length-(null==e||n?1:e)))}function Ee(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[0]:je(t,t.length-e)}function Oe(t,e,n){return u.call(t,null==e||n?1:e)}var Te=b(function(t,e){return e=te(e,!0,!0),me(t,function(t){return!be(e,t)})}),N=b(function(t,e){return Te(t,e)});function Ae(t,e,n,r){w(e)||(r=n,n=e,e=!1),null!=n&&(n=Rt(n,r));for(var i=[],o=[],s=0,a=J(t);s<a;s++){var u=t[s],l=n?n(u,s,t):u;e&&!n?(s&&o===l||i.push(u),o=l):n?be(o,l)||(o.push(l),i.push(u)):be(i,u)||i.push(u)}return i}ft=b(function(t){return Ae(te(t,!0,!0))});function Le(t){for(var e=t&&xe(t,J).length||0,n=Array(e),r=0;r<e;r++)n[r]=ye(t,r);return n}Ft=b(Le);function qe(t,e){return t._chain?et(e).chain():e}function Re(n){return de(bt(n),function(t){var e=et[t]=n[t];et.prototype[t]=function(){var t=[this._wrapped];return i.apply(t,arguments),qe(this,e.apply(et,t))}}),et}de(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var n=r[e];et.prototype[e]=function(){var t=this._wrapped;return null!=t&&(n.apply(t,arguments),"shift"!==e&&"splice"!==e||0!==t.length||delete t[0]),qe(this,t)}}),de(["concat","join","slice"],function(t){var e=r[t];et.prototype[t]=function(){var t=this._wrapped;return null!=t&&(t=e.apply(t,arguments)),qe(this,t)}});Ft=Re({__proto__:null,VERSION:"1.13.2",restArguments:b,isObject:y,isNull:function(t){return null===t},isUndefined:x,isBoolean:w,isElement:function(t){return!(!t||1!==t.nodeType)},isString:k,isNumber:z,isDate:C,isRegExp:M,isError:j,isSymbol:E,isArrayBuffer:O,isDataView:P,isArray:W,isFunction:L,isArguments:D,isFinite:function(t){return!E(t)&&p(t)&&!isNaN(parseFloat(t))},isNaN:H,isTypedArray:Y,isEmpty:function(t){if(null==t)return!0;var e=J(t);return"number"==typeof e&&(W(t)||k(t)||D(t))?0===e:0===J(Q(t))},isMatch:tt,isEqual:function(t,e){return it(t,e)},isMap:dt,isWeakMap:gt,isSet:pt,isWeakSet:mt,keys:Q,allKeys:ot,values:vt,pairs:function(t){for(var e=Q(t),n=e.length,r=Array(n),i=0;i<n;i++)r[i]=[e[i],t[e[i]]];return r},invert:_t,functions:bt,methods:bt,extend:xt,extendOwn:wt,assign:wt,defaults:St,create:function(t,e){return t=kt(t),e&&wt(t,e),t},clone:function(t){return y(t)?W(t)?t.slice():xt({},t):t},tap:function(t,e){return e(t),t},get:jt,has:function(t,e){for(var n=(e=Ct(e)).length,r=0;r<n;r++){var i=e[r];if(!F(t,i))return!1;t=t[i]}return!!n},mapObject:function(t,e,n){e=Rt(e,n);for(var r=Q(t),i=r.length,o={},s=0;s<i;s++){var a=r[s];o[a]=e(t[a],a,t)}return o},identity:Et,constant:U,noop:Nt,toPath:zt,property:Tt,propertyOf:function(e){return null==e?Nt:function(t){return jt(e,t)}},matcher:Ot,matches:Ot,times:function(t,e,n){var r=Array(Math.max(0,t));e=At(e,n,1);for(var i=0;i<t;i++)r[i]=e(i);return r},random:It,now:Pt,escape:Bt,unescape:Dt,templateSettings:Ht,template:function(o,t,e){!t&&e&&(t=e),t=St({},t,et.templateSettings);var e=RegExp([(t.escape||Ut).source,(t.interpolate||Ut).source,(t.evaluate||Ut).source].join("|")+"|$","g"),s=0,a="__p+='";o.replace(e,function(t,e,n,r,i){return a+=o.slice(s,i).replace(Gt,$t),s=i+t.length,e?a+="'+\n((__t=("+e+"))==null?'':_.escape(__t))+\n'":n?a+="'+\n((__t=("+n+"))==null?'':__t)+\n'":r&&(a+="';\n"+r+"\n__p+='"),t}),a+="';\n";var n,r=t.variable;if(r){if(!Xt.test(r))throw new Error("variable is not a bare identifier: "+r)}else a="with(obj||{}){\n"+a+"}\n",r="obj";a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{n=new Function(r,"_",a)}catch(t){throw t.source=a,t}return(t=function(t){return n.call(this,t,et)}).source="function("+r+"){\n"+a+"}",t},result:function(t,e,n){var r=(e=Ct(e)).length;if(!r)return L(n)?n.call(t):n;for(var i=0;i<r;i++){var o=null==t?void 0:t[e[i]];void 0===o&&(o=n,i=r),t=L(o)?o.call(t):o}return t},uniqueId:function(t){var e=++Zt+"";return t?t+e:e},chain:function(t){return(t=et(t))._chain=!0,t},iteratee:qt,partial:Jt,bind:Kt,bindAll:ee,memoize:function(n,r){function i(t){var e=i.cache,t=""+(r?r.apply(this,arguments):t);return F(e,t)||(e[t]=n.apply(this,arguments)),e[t]}return i.cache={},i},delay:ne,defer:re,throttle:function(n,r,i){var o,s,a,u,l=0;function c(){l=!1===i.leading?0:Pt(),o=null,u=n.apply(s,a),o||(s=a=null)}function t(){var t=Pt();l||!1!==i.leading||(l=t);var e=r-(t-l);return s=this,a=arguments,e<=0||r<e?(o&&(clearTimeout(o),o=null),l=t,u=n.apply(s,a),o||(s=a=null)):o||!1===i.trailing||(o=setTimeout(c,e)),u}return i=i||{},t.cancel=function(){clearTimeout(o),l=0,o=s=a=null},t},debounce:function(e,n,r){function i(){var t=Pt()-s;t<n?o=setTimeout(i,n-t):(o=null,r||(u=e.apply(l,a)),o||(a=l=null))}var o,s,a,u,l,t=b(function(t){return l=this,a=t,s=Pt(),o||(o=setTimeout(i,n),r&&(u=e.apply(l,a))),u});return t.cancel=function(){clearTimeout(o),o=a=l=null},t},wrap:function(t,e){return Jt(e,t)},negate:ie,compose:function(){var n=arguments,r=n.length-1;return function(){for(var t=r,e=n[r].apply(this,arguments);t--;)e=n[t].call(this,e);return e}},after:function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},before:oe,once:t,findKey:se,findIndex:ue,findLastIndex:A,sortedIndex:le,indexOf:he,lastIndexOf:T,find:fe,detect:fe,findWhere:function(t,e){return fe(t,Ot(e))},each:de,forEach:de,map:ge,collect:ge,reduce:o,foldl:o,inject:o,reduceRight:q,foldr:q,filter:me,select:me,reject:function(t,e,n){return me(t,ie(Rt(e)),n)},every:ve,all:ve,some:_e,any:_e,contains:be,includes:be,include:be,invoke:I,pluck:ye,where:function(t,e){return me(t,Ot(e))},max:xe,min:function(t,r,e){var n,i,o=1/0,s=1/0;if(null==r||"number"==typeof r&&"object"!=Ie(t[0])&&null!=t)for(var a=0,u=(t=Qt(t)?t:vt(t)).length;a<u;a++)null!=(n=t[a])&&n<o&&(o=n);else r=Rt(r,e),de(t,function(t,e,n){((i=r(t,e,n))<s||i===1/0&&o===1/0)&&(o=t,s=i)});return o},shuffle:function(t){return ke(t,1/0)},sample:ke,sortBy:function(t,r,e){var i=0;return r=Rt(r,e),ye(ge(t,function(t,e,n){return{value:t,index:i++,criteria:r(t,e,n)}}).sort(function(t,e){var n=t.criteria,r=e.criteria;if(n!==r){if(r<n||void 0===n)return 1;if(n<r||void 0===r)return-1}return t.index-e.index}),"value")},groupBy:a,indexBy:e,countBy:lt,partition:ut,toArray:Se,size:function(t){return null==t?0:(Qt(t)?t:Q(t)).length},pick:Me,omit:ct,first:Ee,head:Ee,take:Ee,initial:je,last:function(t,e,n){return null==t||t.length<1?null==e||n?void 0:[]:null==e||n?t[t.length-1]:Oe(t,Math.max(0,t.length-e))},rest:Oe,tail:Oe,drop:Oe,compact:function(t){return me(t,Boolean)},flatten:function(t,e){return te(t,e,!1)},without:N,uniq:Ae,unique:Ae,union:ft,intersection:function(t){for(var e=[],n=arguments.length,r=0,i=J(t);r<i;r++){var o=t[r];if(!be(e,o)){for(var s=1;s<n&&be(arguments[s],o);s++);s===n&&e.push(o)}}return e},difference:Te,unzip:Le,transpose:Le,zip:Ft,object:function(t,e){for(var n={},r=0,i=J(t);r<i;r++)e?n[t[r]]=e[r]:n[t[r][0]]=t[r][1];return n},range:function(t,e,n){null==e&&(e=t||0,t=0),n=n||(e<t?-1:1);for(var r=Math.max(Math.ceil((e-t)/n),0),i=Array(r),o=0;o<r;o++,t+=n)i[o]=t;return i},chunk:function(t,e){if(null==e||e<1)return[];for(var n=[],r=0,i=t.length;r<i;)n.push(u.call(t,r,r+=e));return n},mixin:Re,default:et});return Ft._=Ft},"object"===Ie(n)&&void 0!==e?e.exports=t():void 0===(i="function"==typeof(i=t)?i.call(n,r,n,e):i)||(e.exports=i)}).call(n,function(){return this}())},function(t,e,n){"use strict";function i(t,e){(e=e||{}).model&&(this.model=e.model),void 0!==e.comparator&&(this.comparator=e.comparator),this._reset(),this.initialize.apply(this,arguments),t&&this.reset(t,x.extend({silent:!0},e))}var r=n(8),o=n(10),x=n(11),s=n(7),a=[].slice,w={add:!0,remove:!0,merge:!0},u={add:!0,remove:!1};x.extend(i.prototype,r,{model:s,initialize:function(){},toJSON:function(e){return this.map(function(t){return t.toJSON(e)})},sync:function(){return Backbone.sync.apply(this,arguments)},add:function(t,e){return this.set(t,x.extend({merge:!1},e,u))},remove:function(t,e){var n=!x.isArray(t);e=e||{};for(var r=0,i=(t=n?[t]:x.clone(t)).length;r<i;r++){var o,s=t[r]=this.get(t[r]);s&&(null!=(o=this.modelId(s.attributes))&&delete this._byId[o],delete this._byId[s.cid],o=this.indexOf(s),this.models.splice(o,1),this.length--,e.silent||(e.index=o,s.trigger("remove",s,this,e)),this._removeReference(s,e))}return n?t[0]:t},set:function(t,e){(e=x.defaults({},e,w)).parse&&(t=this.parse(t,e));var n,r,i,o,s=!x.isArray(t);t=s?t?[t]:[]:t.slice();for(var a=e.at,u=this.comparator&&null==a&&!1!==e.sort,l=x.isString(this.comparator)?this.comparator:null,c=[],h=[],f={},d=e.add,g=e.merge,p=e.remove,m=!(u||!d||!p)&&[],v=0,_=t.length;v<_;v++){if(r=t[v],i=this.get(r))p&&(f[i.cid]=!0),g&&r!==i&&(r=this._isModel(r)?r.attributes:r,e.parse&&(r=i.parse(r,e)),i.set(r,e),u&&!o&&i.hasChanged(l)&&(o=!0)),t[v]=i;else if(d){if(!(n=t[v]=this._prepareModel(r,e)))continue;c.push(n),this._addReference(n,e)}(n=i||n)&&(i=this.modelId(n.attributes),!m||!n.isNew()&&f[i]||m.push(n),f[i]=!0)}if(p){for(v=0,_=this.length;v<_;v++)f[(n=this.models[v]).cid]||h.push(n);h.length&&this.remove(h,e)}if(c.length||m&&m.length)if(u&&(o=!0),this.length+=c.length,null!=a)for(v=0,_=c.length;v<_;v++)this.models.splice(a+v,0,c[v]);else{m&&(this.models.length=0);for(var b=m||c,v=0,_=b.length;v<_;v++)this.models.push(b[v])}if(o&&this.sort({silent:!0}),!e.silent){for(var y=null!=a?x.clone(e):e,v=0,_=c.length;v<_;v++)null!=a&&(y.index=a+v),(n=c[v]).trigger("add",n,this,y);(o||m&&m.length)&&this.trigger("sort",this,e)}return s?t[0]:t},reset:function(t,e){e=e||{};for(var n=0,r=this.models.length;n<r;n++)this._removeReference(this.models[n],e);return e.previousModels=this.models,this._reset(),t=this.add(t,x.extend({silent:!0},e)),e.silent||this.trigger("reset",this,e),t},push:function(t,e){return this.add(t,x.extend({at:this.length},e))},pop:function(t){var e=this.at(this.length-1);return this.remove(e,t),e},unshift:function(t,e){return this.add(t,x.extend({at:0},e))},shift:function(t){var e=this.at(0);return this.remove(e,t),e},slice:function(){return a.apply(this.models,arguments)},get:function(t){if(null!=t){var e=this.modelId(this._isModel(t)?t.attributes:t);return this._byId[t]||this._byId[e]||this._byId[t.cid]}},at:function(t){return t<0&&(t+=this.length),this.models[t]},where:function(n,t){return x.isEmpty(n)?t?void 0:[]:this[t?"find":"filter"](function(t){for(var e in n)if(n[e]!==t.get(e))return!1;return!0})},findWhere:function(t){return this.where(t,!0)},sort:function(t){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return t=t||{},x.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(x.bind(this.comparator,this)),t.silent||this.trigger("sort",this,t),this},pluck:function(t){return x.invoke(this.models,"get",t)},fetch:function(n){void 0===(n=n?x.clone(n):{}).parse&&(n.parse=!0);var r=n.success,i=this;return n.success=function(t){var e=n.reset?"reset":"set";i[e](t,n),r&&r(i,t,n),i.trigger("sync",i,t,n)},wrapError(this,n),this.sync("read",this,n)},create:function(t,n){if(n=n?x.clone(n):{},!(t=this._prepareModel(t,n)))return!1;n.wait||this.add(t,n);var r=this,i=n.success;return n.success=function(t,e){n.wait&&r.add(t,n),i&&i(t,e,n)},t.save(null,n),t},parse:function(t,e){return t},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},modelId:function(t){return t[this.model.prototype.idAttribute||"id"]},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(t,e){if(this._isModel(t))return t.collection||(t.collection=this),t;t=new((e=e?x.clone(e):{}).collection=this).model(t,e);return t.validationError?(this.trigger("invalid",this,t.validationError,e),!1):t},_isModel:function(t){return t instanceof s},_addReference:function(t,e){this._byId[t.cid]=t;var n=this.modelId(t.attributes);null!=n&&(this._byId[n]=t),t.on("all",this._onModelEvent,this)},_removeReference:function(t,e){this===t.collection&&delete t.collection,t.off("all",this._onModelEvent,this)},_onModelEvent:function(t,e,n,r){("add"!==t&&"remove"!==t||n===this)&&("destroy"===t&&this.remove(e,r),"change"!==t||(r=this.modelId(e.previousAttributes()))!==(t=this.modelId(e.attributes))&&(null!=r&&delete this._byId[r],null!=t&&(this._byId[t]=e)),this.trigger.apply(this,arguments))}});x.each(["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"],function(e){x[e]&&(i.prototype[e]=function(){var t=a.call(arguments);return t.unshift(this.models),x[e].apply(x,t)})});x.each(["groupBy","countBy","sortBy","indexBy"],function(r){x[r]&&(i.prototype[r]=function(e,t){var n=x.isFunction(e)?e:function(t){return t.get(e)};return x[r](this.models,n,t)})}),i.extend=o,t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),l=n(3),n=n(6).Collection.extend({model:u.sel,initialize:function(t,e){if(null!=e)return this.g=e.g,this.listenTo(this.g,"residue:click",function(t){return this._handleE(t.evt,new u.possel({xStart:t.rowPos,xEnd:t.rowPos,seqId:t.seqId}))}),this.listenTo(this.g,"row:click",function(t){return this._handleE(t.evt,new u.rowsel({seqId:t.seqId}))}),this.listenTo(this.g,"column:click",function(t){return this._handleE(t.evt,new u.columnsel({xStart:t.rowPos,xEnd:t.rowPos+t.stepSize-1}))})},getSelForRow:function(e){return this.filter(function(t){return t.inRow(e)})},getSelForColumns:function(e){return this.filter(function(t){return t.inColumn(e)})},addJSON:function(t){return this.add(this._fromJSON(t))},_fromJSON:function(t){switch(t.type){case"column":return new u.columnsel(t);case"row":return new u.rowsel(t);case"pos":return new u.possel(t)}},resetJSON:function(t){return t=t.map(this._fromJSON),this.reset(t)},getBlocksForRow:function(e,r){for(var i=this.filter(function(t){return t.inRow(e)}),o=[],t=0;t<i.length;t++)if("break"===function(t,n){if("row"===(n=i[t]).attributes.type)return o=function(){var t=[],e=0;if(0<=r)for(;e<=r;)t.push(e++);else for(;r<=e;)t.push(e--);return t}(),"break";o=o.concat(function(){var t=[],e=n.attributes.xStart;if(n.attributes.xStart<=n.attributes.xEnd)for(;e<=n.attributes.xEnd;)t.push(e++);else for(;e>=n.attributes.xEnd;)t.push(e--);return t}())}(t,void 0))break;return o},getAllColumnBlocks:function(t){t.maxLen,t.withPos;for(var n,e=[],r=void 0,r=t.withPos?this.filter(function(t){return null!=t.get("xStart")}):this.filter(function(t){return"column"===t.get("type")}),i=0;i<r.length;i++)n=r[i],!void(e=e.concat(function(){var t=[],e=n.attributes.xStart;if(n.attributes.xStart<=n.attributes.xEnd)for(;e<=n.attributes.xEnd;)t.push(e++);else for(;e>=n.attributes.xEnd;)t.push(e--);return t}()));return e=(0,l.uniq)(e)},invertRow:function(t){for(var e=(e=this.where({type:"row"})).map(function(t){return t.attributes.seqId}),n=(0,l.filter)(t,function(t){return!(0<=e.indexOf(t))}),r=[],i=0;i<n.length;i++){var o=n[i];r.push(new u.rowsel({seqId:o}))}return this.reset(r)},invertCol:function(t){var e=this.where({type:"column"}).reduce(function(t,n){return t.concat(function(){var t=[],e=n.attributes.xStart;if(n.attributes.xStart<=n.attributes.xEnd)for(;e<=n.attributes.xEnd;)t.push(e++);else for(;e>=n.attributes.xEnd;)t.push(e--);return t}())},[]),n=(0,l.filter)(t,function(t){return!(0<=e.indexOf(t))});if(0!==n.length){for(var r,i=[],o=n[0],s=o,a=0;a<n.length;a++)s+1===(r=n[a])?s=r:(i.push(new u.columnsel({xStart:o,xEnd:s})),o=s=r);return o!==s&&i.push(new u.columnsel({xStart:o,xEnd:n[n.length-1]})),this.reset(i)}},_handleE:function(t,e){return t.ctrlKey||t.metaKey?this.add(e):this.reset([e])},_reduceColumns:function(){return this.each(function(t,e,n){for(var n=(0,l.filter)(n,function(t){return"column"===t.get("type")}),r=t.get("xStart"),i=t.get("xEnd"),o=(0,l.filter)(n,function(t){return t.get("xEnd")===r-1}),s=0;s<o.length;s++)o[s].set("xEnd",r);for(var a=(0,l.filter)(n,function(t){return t.get("xStart")===i+1}),u=0;u<a.length;u++)a[u].set("xStart",i);if(0<o.length||0<a.length)return console.log("removed el"),t.collection.remove(t)})}});e.default=n},function(t,e,n){"use strict";var i=n(11),r=n(8),o=n(10),s=n(15),n=function(t){this.cid=i.uniqueId("view"),t=t||{},i.extend(this,i.pick(t,u)),this._ensureElement(),this.initialize.apply(this,arguments)},a=/^(\S+)\s*(.*)$/,u=["model","collection","el","id","attributes","className","tagName","events"];i.extend(n.prototype,r,{tagName:"div",$:function(t){return this.$el.find(t)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(t){return this.undelegateEvents(),this._setElement(t),this.delegateEvents(),this},_setElement:function(t){this.$el=t instanceof s?t:s(t),this.el=this.$el[0]},delegateEvents:function(t){if(!(t=t||i.result(this,"events")))return this;for(var e in this.undelegateEvents(),t){var n,r=t[e];i.isFunction(r)||(r=this[t[e]]),r&&(n=e.match(a),this.delegate(n[1],n[2],i.bind(r,this)))}return this},delegate:function(t,e,n){this.$el.on(t+".delegateEvents"+this.cid,e,n)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(t,e,n){this.$el.off(t+".delegateEvents"+this.cid,e,n)},_createElement:function(t){return document.createElement(t)},_ensureElement:function(){var t;this.el?this.setElement(i.result(this,"el")):(t=i.extend({},i.result(this,"attributes")),this.id&&(t.id=i.result(this,"id")),this.className&&(t.class=i.result(this,"className")),this.setElement(this._createElement(i.result(this,"tagName"))),this._setAttributes(t))},_setAttributes:function(t){this.$el.attr(t)}}),n.extend=o,t.exports=n},function(t,_,b){var y;(function(t){"use strict";var s,n,e,r,a,u,l,i,h,c,f,d,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function g(t){return"string"==typeof t}function p(t){return t instanceof Object}function m(t){var e=t.length,n=void 0===t?"undefined":o(t);return!f(n)&&t!==s&&(1===t.nodeType&&e||(n=n,Array.isArray(n)||0===e||"number"==typeof e&&0<e&&e-1 in t))}function v(t,e){var n,r=function(t,e){"preventDefault"===t?this[t]=function(){return this.defaultPrevented=!0,e[t]()}:"stopImmediatePropagation"===t?this[t]=function(){return this.immediatePropagationStopped=!0,e[t]()}:f(e[t])?this[t]=function(){return e[t]()}:this[t]=e[t]};for(n in this.originalEvent=t)!t[n]&&"function"!=typeof t[n]||r.call(this,n,t);d.extend(this,e,{isImmediatePropagationStopped:function(){return!!this.immediatePropagationStopped}})}s="undefined"!=typeof window?window:void 0,e=s.$,r=s.jBone,a=/^<(\w+)\s*\/?>$/,u=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,l=[].slice,i=[].splice,h=Object.keys,c=s.document,f=function(t){return"[object Function]"==={}.toString.call(t)},(d=function(t,e){return new n.init(t,e)}).noConflict=function(){return s.$=e,s.jBone=r,d},(n=d.fn=d.prototype={init:function(t,e){var n,r,i,o;if(!t)return this;if(g(t)){if(r=a.exec(t))return this[0]=c.createElement(r[1]),this.length=1,p(e)&&this.attr(e),this;if((r=u.exec(t))&&r[1]){for(o=c.createDocumentFragment(),(i=c.createElement("div")).innerHTML=t;i.lastChild;)o.appendChild(i.firstChild);return n=l.call(o.childNodes),d.merge(this,n)}if(d.isElement(e))return d(e).find(t);try{return n=c.querySelectorAll(t),d.merge(this,n)}catch(t){return this}}return t.nodeType?(this[0]=t,this.length=1,this):f(t)?t():t instanceof d?t:d.makeArray(t,this)},pop:[].pop,push:[].push,reverse:[].reverse,shift:[].shift,sort:[].sort,splice:[].splice,slice:[].slice,indexOf:[].indexOf,forEach:[].forEach,unshift:[].unshift,concat:[].concat,join:[].join,every:[].every,some:[].some,filter:[].filter,map:[].map,reduce:[].reduce,reduceRight:[].reduceRight,length:0}).constructor=d,n.init.prototype=n,d.setId=function(t){var e=t.jid;t===s?e="window":void 0===t.jid&&(t.jid=e=++d._cache.jid),d._cache.events[e]||(d._cache.events[e]={})},d.getData=function(t){t=(t=t instanceof d?t[0]:t)===s?"window":t.jid;return{jid:t,events:d._cache.events[t]}},d.isElement=function(t){return t&&t instanceof d||t instanceof HTMLElement||g(t)},d._cache={events:{},jid:0},n.pushStack=function(t){return d.merge(this.constructor(),t)},d.merge=function(t,e){for(var n=e.length,r=t.length,i=0;i<n;)t[r++]=e[i++];return t.length=r,t},d.contains=function(t,e){return t.contains(e)},d.extend=function(n){var r;return i.call(arguments,1).forEach(function(t){if(r=n,t)for(var e in t)r[e]=t[e]}),n},d.makeArray=function(t,e){e=e||[];return null!==t&&(m(t)?d.merge(e,g(t)?[t]:t):e.push(t)),e},d.unique=function(t){if(null==t)return[];for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];e.indexOf(i)<0&&e.push(i)}return e},d.Event=function(t,e){var n,r;return t.type&&!e&&(t=(e=t).type),n=t.split(".").splice(1).join("."),r=t.split(".")[0],(t=c.createEvent("Event")).initEvent(r,!0,!0),d.extend(t,{namespace:n,isDefaultPrevented:function(){return t.defaultPrevented}},e)},d.event={add:function(e,t,n,r,i){d.setId(e);for(var o,s,a=function(t){d.event.dispatch.call(e,t)},u=d.getData(e).events,l=(t=t.split(" ")).length;l--;)u[o=(s=t[l]).split(".")[0]]=u[o]||[],u[o].length?a=u[o][0].fn:e.addEventListener&&e.addEventListener(o,a,!1),u[o].push({namespace:s.split(".").splice(1).join("."),fn:a,selector:i,data:r,originfn:n})},remove:function(i,t,s,o){function a(t,e,n,r,i){var o;(s&&i.originfn===s||!s)&&(o=i.fn),t[e][n].fn===o&&(t[e].splice(n,1),t[e].length||r.removeEventListener(e,o))}var u,l,c=d.getData(i).events;if(c)return!t&&c?h(c).forEach(function(t){for(l=c[t],u=l.length;u--;)a(c,t,u,i,l[u])}):void t.split(" ").forEach(function(t){var e,n=t.split(".")[0],r=t.split(".").splice(1).join(".");if(c[n])for(l=c[n],u=l.length;u--;)e=l[u],(!r||r&&e.namespace===r)&&(!o||o&&e.selector===o)&&a(c,n,u,i,e);else r&&h(c).forEach(function(t){for(l=c[t],u=l.length;u--;)(e=l[u]).namespace.split(".")[0]===r.split(".")[0]&&a(c,t,u,i,e)})})},trigger:function(e,t){(g(t)?t.split(" ").map(function(t){return d.Event(t)}):[t=t instanceof Event?t:d.Event(t)]).forEach(function(t){t.type&&e.dispatchEvent&&e.dispatchEvent(t)})},dispatch:function(t){for(var e,n,r,i,o,s=0,a=0,u=d.getData(this).events[t.type],l=u.length,c=[],h=[];s<l;s++)c.push(u[s]);for(s=0,l=c.length;s<l&&~u.indexOf(c[s])&&(!i||!i.isImmediatePropagationStopped());s++)if(n=null,o={},(r=c[s]).data&&(o.data=r.data),r.selector){if(~(h=d(this).find(r.selector)).indexOf(t.target)&&(n=t.target)||this!==t.target&&this.contains(t.target)){if(!n)for(e=h.length,a=0;a<e;a++)h[a]&&h[a].contains(t.target)&&(n=h[a]);n&&(o.currentTarget=n,i=new v(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(n,i))}}else i=new v(t,o),t.namespace&&t.namespace!==r.namespace||r.originfn.call(this,i)}},n.on=function(t,e,n,r){var i=this.length,o=0;if(null==n&&null==r?(r=e,n=e=void 0):null==r&&("string"==typeof e?(r=n,n=void 0):(r=n,n=e,e=void 0)),!r)return this;for(;o<i;o++)d.event.add(this[o],t,r,n,e);return this},n.one=function(t){for(var e=arguments,n=0,r=this.length,o=l.call(e,1,e.length-1),s=l.call(e,-1)[0],i=function(r){var i=d(r);t.split(" ").forEach(function(e){function n(t){i.off(e,n),s.call(r,t)}i.on.apply(i,[e].concat(o,n))})};n<r;n++)i(this[n]);return this},n.trigger=function(t){var e=0,n=this.length;if(!t)return this;for(;e<n;e++)d.event.trigger(this[e],t);return this},n.off=function(t,e,n){var r=0,i=this.length;for(f(e)&&(n=e,e=void 0);r<i;r++)d.event.remove(this[r],t,n,e);return this},n.find=function(t){for(var e,n=[],r=0,i=this.length;r<i;r++)e=this[r],f(e.querySelectorAll)&&[].forEach.call(e.querySelectorAll(t),function(t){n.push(t)});return d(n)},n.get=function(t){return null!=t?t<0?this[t+this.length]:this[t]:l.call(this)},n.eq=function(t){return d(this[t])},n.parent=function(){for(var t,e=[],n=0,r=this.length;n<r;n++)!~e.indexOf(t=this[n].parentElement)&&t&&e.push(t);return d(e)},n.toArray=function(){return l.call(this)},n.is=function(){var e=arguments;return this.some(function(t){return t.tagName.toLowerCase()===e[0]})},n.has=function(){var e=arguments;return this.some(function(t){return t.querySelectorAll(e[0]).length})},n.add=function(t,e){return this.pushStack(d.unique(d.merge(this.get(),d(t,e))))},n.attr=function(n,e){var t,r=arguments,i=0,o=this.length;if(g(n)&&1===r.length)return this[0]&&this[0].getAttribute(n);for(2===r.length?t=function(t){t.setAttribute(n,e)}:p(n)&&(t=function(e){h(n).forEach(function(t){e.setAttribute(t,n[t])})});i<o;i++)t(this[i]);return this},n.removeAttr=function(t){for(var e=0,n=this.length;e<n;e++)this[e].removeAttribute(t);return this},n.val=function(t){var e=0,n=this.length;if(0===arguments.length)return this[0]&&this[0].value;for(;e<n;e++)this[e].value=t;return this},n.css=function(n,e){var t,r=arguments,i=0,o=this.length;if(g(n)&&1===r.length)return this[0]&&s.getComputedStyle(this[0])[n];for(2===r.length?t=function(t){t.style[n]=e}:p(n)&&(t=function(e){h(n).forEach(function(t){e.style[t]=n[t]})});i<o;i++)t(this[i]);return this},n.data=function(n,e){function r(t,e,n){p(n)?(t.jdata=t.jdata||{},t.jdata[e]=n):t.dataset[e]=n}function i(t){return"true"===t||"false"!==t&&t}var t,o=arguments,s={},a=0,u=this.length;if(0===o.length)return this[0].jdata&&(s=this[0].jdata),h(this[0].dataset).forEach(function(t){s[t]=i(this[0].dataset[t])},this),s;if(1===o.length&&g(n))return this[0]&&i(this[0].dataset[n]||this[0].jdata&&this[0].jdata[n]);for(1===o.length&&p(n)?t=function(e){h(n).forEach(function(t){r(e,t,n[t])})}:2===o.length&&(t=function(t){r(t,n,e)});a<u;a++)t(this[a]);return this},n.removeData=function(t){for(var e,n,r=0,i=this.length;r<i;r++)if(e=this[r].jdata,n=this[r].dataset,t)e&&e[t]&&delete e[t],delete n[t];else{for(t in e)delete e[t];for(t in n)delete n[t]}return this},n.addClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];e<r;e++)for(n=n=0;n<i.length;n++)this[e].classList.add(i[n]);return this},n.removeClass=function(t){for(var e=0,n=0,r=this.length,i=t?t.trim().split(/\s+/):[];e<r;e++)for(n=n=0;n<i.length;n++)this[e].classList.remove(i[n]);return this},n.toggleClass=function(t,e){var n=0,r=this.length,i="toggle";if(!0===e?i="add":!1===e&&(i="remove"),t)for(;n<r;n++)this[n].classList[i](t);return this},n.hasClass=function(t){var e=0,n=this.length;if(t)for(;e<n;e++)if(this[e].classList.contains(t))return!0;return!1},n.html=function(t){var e,n=arguments;return 1===n.length&&void 0!==t?this.empty().append(t):0===n.length&&(e=this[0])?e.innerHTML:this},n.append=function(t){var e,n=0,r=this.length;for(g(t)&&u.exec(t)?t=d(t):p(t)||(t=document.createTextNode(t)),t=t instanceof d?t:d(t),e=function(e,n){t.forEach(function(t){n?e.appendChild(t.cloneNode(!0)):e.appendChild(t)})};n<r;n++)e(this[n],n);return this},n.appendTo=function(t){return d(t).append(this),this},n.empty=function(){for(var t,e=0,n=this.length;e<n;e++)for(t=this[e];t.lastChild;)t.removeChild(t.lastChild);return this},n.remove=function(){var t,e=0,n=this.length;for(this.off();e<n;e++)delete(t=this[e]).jdata,t.parentNode&&t.parentNode.removeChild(t);return this},"object"===o(t)&&t&&"object"===o(t.exports)?t.exports=d:(void 0===(y=function(){return d}.call(_,b,_,t))||(t.exports=y),s.jBone=s.$=d)}).call(_,b(4)(t))},function(t,e,n){"use strict";var h=n(11),r=n(14);t.exports=r.extend({renderSubviews:function(){var t,e,n,r,i=this.el,o=null!=i.parentNode;o&&(n=(e=i).parentNode,r=e.nextSibling,n.removeChild(e),t=function(){r?n.insertBefore(e,r):n.appendChild(e)}),function(t){for(var e;e=t.lastChild;)t.removeChild(e)}(i);for(var s,a=document.createDocumentFragment(),u=this._views(),l=h.sortBy(u,function(t){return t.ordering}),c=0;c<l.length;c++)(s=l[c]).render(),null!=(s=s.el)&&a.appendChild(s);return i.appendChild(a),o&&t(),i},addView:function(t,e){var n=this._views();if(null==e)throw"Invalid plugin. ";return null==e.ordering&&(e.ordering=t),n[t]=e},removeViews:function(){var t,e,n=this._views();for(e in n)(t=n[e]).undelegateEvents(),t.unbind(),null!=t.removeViews&&t.removeViews(),t.remove();return this.views={}},removeView:function(t){var e=this._views();return e[t].remove(),delete e[t]},getView:function(t){return this._views()[t]},remove:function(){return this.removeViews(),r.prototype.remove.apply(this)},_views:function(){return null==this.views&&(this.views={}),this.views}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=_(n(18)),i=_(n(22)),o=_(n(40)),s=_(n(41)),a=_(n(42)),u=_(n(13)),l=_(n(49)),c=_(n(51)),h=_(n(50)),f=_(n(52)),d=_(n(46)),g=_(n(53)),p=_(n(113)),m=_(n(115)),v=_(n(122));function _(t){return t&&t.__esModule?t:{default:t}}var b=n(16),y=n(57),x=n(126),w=n(15),b=b.extend({initialize:function(t){var e,n=this;return null==t&&(t={}),null==t.colorscheme&&(t.colorscheme={}),null==t.columns&&(t.columns={}),null==t.conf&&(t.conf={}),null==t.vis&&(t.vis={}),null==t.visorder&&(t.visorder={}),null==t.zoomer&&(t.zoomer={}),null==t.conserv&&(t.conserv={}),null==t.scale&&(t.scale={}),this.g=y.mixin({}),this.seqs=this.g.seqs=new r.default(t.seqs,this.g),this.g.config=new s.default(t.conf),this.g.package=new a.default(this.g),this.g.selcol=new u.default([],{g:this.g}),this.g.user=new l.default,this.g.vis=new c.default(t.vis,{model:this.seqs}),this.g.visorder=new h.default(t.visorder),this.g.zoomer=new f.default(t.zoomer,{g:this.g,model:this.seqs}),this.g.scale=new d.default(t.scale,{g:this.g}),this.g.conservationConfig=t.conserv,"localhost"===window.location.hostname&&this.g.config.set("debug",!0),this._loadSeqs(t),this.u={},this.u.file=new p.default(this),this.u.proxy=new v.default({g:this.g}),this.u.tree=new m.default(this),!0===this.g.config.get("eventBus")&&this.startEventBus(),this.g.config.get("dropImport")&&(e={dragover:this.dragOver,drop:this.dropFile},this.delegateEvents(e)),t.importURL&&this.u.file.importURL(t.importURL,function(){return n.render()}),t.bootstrapMenu&&(t.menu&&(this.menuConfig=t.menu),this.g.config.set("bootstrapMenu",!0)),this.draw(),this.m()},_loadSeqs:function(t){var e=this.seqs.pluck("seq");return this.g.stats=new x(this.seqs,{useGaps:!0}),this.g.stats.alphabetSize=this.g.config.get("alphabetSize"),this.g.columns=new o.default(t.columns,this.g.stats),this.g.colorscheme=new i.default(t.colorscheme,e,this.g.stats),this.g.zoomer.setEl(this.el,this.seqs)},importURL:function(){return this.u.file.importURL.apply(this.u.file,arguments)},m:function(){var t={};return t.model=n(127),t.selection=n(2),t.selcol=n(13),t.view=n(14),t.boneView=n(16),this.m=t},draw:function(){var t,e,n=this;return this.removeViews(),this.addView("stage",new g.default({model:this.seqs,g:this.g})),this.$el.addClass("biojs_msa_div"),this.g.config.get("bootstrapMenu")&&(e=document.createElement("div"),t=document.createElement("div"),this.el.parentNode&&this.el.parentNode.replaceChild(t,this.el),t.appendChild(e),t.appendChild(this.el),e={el:e,msa:this},this.menuConfig&&(e.menu=this.menuConfig),new msa.menu.defaultmenu(e).render()),w(window).on("resize",function(t){return setTimeout(function(){return this.g.zoomer.autoResize()}.bind(n),5)})},dragOver:function(t){return t.preventDefault(),!(t.target.className="hover")},dropFile:function(t){t.preventDefault();t=t.target.files||t.dataTransfer.files;return this.u.file.importFiles(t),!1},startEventBus:function(){var r=this,i=["config","columns","colorscheme","selcol","vis","visorder","zoomer"];return function(){for(var t,e=[],n=0;n<i.length;n++)t=i[n],e.push(r._proxyToG(t));return e}()},_proxyToG:function(i){return this.listenTo(this.g[i],"all",function(t,e,n,r){if("change"!==t)return null!=r?this.g.trigger(i+":"+t,n,e,r):this.g.trigger(i+":"+t,n,e)})},render:function(){return void 0!==this.seqs&&0!==this.seqs.length||console.log("warning. empty seqs."),this.renderSubviews(),this.g.vis.set("loaded",!0),this}});e.default=b},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(19)),i=o(n(20));function o(t){return t&&t.__esModule?t:{default:t}}var s=n(6).Collection,r=s.extend({model:r.default,constructor:function(t,e){var n=this;return s.apply(this,arguments),this.g=e,this.on("add reset remove",function(){return n.lengthCache=null,n._bindSeqsWithFeatures()},this),this.on("reset",function(){return n._autoSetRefSeq()}),this._autoSetRefSeq(),this.lengthCache=null,this.features={},this},getMaxLength:function(){return 0===this.models.length?0:(null===this.lengthCache&&(this.lengthCache=this.max(function(t){return t.get("seq").length}).get("seq").length),this.lengthCache)},prev:function(t,e){t=this.indexOf(t)-1;return t<0&&e&&(t=this.length-1),this.at(t)},next:function(t,e){t=this.indexOf(t)+1;return t===this.length&&e&&(t=0),this.at(t)},calcHiddenSeqs:function(t){for(var e=t,n=0;0<e?n<=e:e<=n;0<e?n++:n--)this.at(n).get("hidden")&&e++;return e-t},addFeatures:function(t){var e,n,r=this;return null!=t.config&&(t=(e=t).seqs,null!=e.config.colors&&(n=e.config.colors,_.each(t,function(t){return _.each(t,function(t){if(null!=n[t.feature])return t.fillColor=n[t.feature]})}))),_.isEmpty(this.features)?this.features=t:_.each(t,function(t,e){return r.features.hasOwnProperty(e)?r.features[e]=_.union(r.features[e],t):r.features[e]=t}),this._bindSeqsWithFeatures()},_bindSeqWithFeatures:function(t){var e=this.features[t.attributes.name];e&&(t.attributes.features=new i.default(e),t.attributes.features.assignRows(),t.attributes.height=t.attributes.features.getCurrentHeight()+1)},_bindSeqsWithFeatures:function(){var e=this;return this.each(function(t){return e._bindSeqWithFeatures(t)})},removeAllFeatures:function(){return delete this.features},_autoSetRefSeq:function(){if(0<this.length)return this.at(0).set("ref",!0)},setRef:function(e){var n=this.get(e);return this.each(function(t){if(e.cid)return n.cid===t.cid?t.set("ref",!0):t.set("ref",!1)}),this.g.config.set("hasRef",!0),this.trigger("change:reference",e)}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(20),o=(r=i)&&r.__esModule?r:{default:r};n=n(6).Model.extend({defaults:{name:"",id:"",seq:"",height:1,ref:!1},initialize:function(){if(this.set("grey",[]),null==this.get("features"))return this.set("features",new o.default)}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(3),o=n(21),s=(r=o)&&r.__esModule?r:{default:r};var a=n(6).Collection,s=a.extend({model:s.default,constructor:function(){return this.startOnCache=[],this.on("all",function(){return this.startOnCache=[]},this),a.apply(this,arguments)},startOn:function(t){return null==this.startOnCache[t]&&(this.startOnCache[t]=this.where({xStart:t})),this.startOnCache[t]},contains:function(n){return this.reduce(function(t,e){return e||t.contains(n)},!1)},getFeatureOnRow:function(e,n){return this.filter(function(t){return t.get("row")===e&&t.get("xStart")<=n&&n<=t.get("xEnd")})},assignRows:function(){var n=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,o=function(){for(var t=[],e=0;0<n?e<=n:n<=e;0<n?e++:e--)t.push(0);return t}();return this.each(function(t){for(var e=0,n=t.get("xStart"),r=t.get("xEnd"),i=n;n<r?i<=r:r<=i;n<r?i++:i--)o[i]>e&&(e=o[i]),o[i]++;return t.set("row",e)}),(0,i.max)(o)},getCurrentHeight:function(){return this.max(function(t){return t.get("row")}).attributes.row+1},getMinRows:function(){var n=this.max(function(t){return t.get("xEnd")}).attributes.xEnd,o=function(){for(var t=[],e=0;0<n?e<=n:n<=e;0<n?e++:e--)t.push(0);return t}();return this.each(function(i){return function(){for(var t=[],e=i.get("xStart"),n=i.get("xEnd"),r=e;e<n?r<=n:n<=r;r++)t.push(o[r]++);return t}()}),(0,i.max)(o)}});e.default=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n=n(6).Model.extend({defaults:{xStart:-1,xEnd:-1,height:-1,text:"",fillColor:"red",fillOpacity:.5,type:"rectangle",borderSize:1,borderColor:"black",borderOpacity:.5,validate:!0,row:0},initialize:function(t){if(null!=t.start&&this.set("xStart",t.start-1),null!=t.end&&this.set("xEnd",t.end-1),null!=t.attributes&&(null!=t.attributes.Name&&this.set("text",t.attributes.Name),null!=t.attributes.Color&&this.set("fillColor",t.attributes.Color)),this.attributes.xEnd<this.attributes.xStart&&console.warn("invalid feature range for",this.attributes),!_.isNumber(this.attributes.xStart)||!_.isNumber(this.attributes.xEnd))return console.warn("please provide numeric feature ranges",t),this.set("xStart",parseInt(this.attributes.xStart)),this.set("xEnd",parseInt(this.attributes.xEnd))},validate:function(){if(isNaN(this.attributes.xStart||isNaN(this.attributes.xEnd)))return"features need integer start and end."},contains:function(t){return this.attributes.xStart<=t&&t<=this.attributes.xEnd}});e.default=n},function(t,e,n){"use strict";var r=n(23),n=n(6).Model;t.exports=n.extend({defaults:{scheme:"taylor",colorBackground:!0,showLowerCase:!0,opacity:.6},initialize:function(t,e,n){return this.colors=new r({seqs:e,conservation:function(){return n.scale(n.conservation())},consensus:function(){return n.consensus()},frequency:function(){return n.frequency()}}),n.on("reset",function(){"dyn"===this.getSelectedScheme().type&&this.getSelectedScheme()},this)},addStaticScheme:function(t,e){return this.colors.addStaticScheme(t,e)},addDynScheme:function(t,e){return this.colors.addDynScheme(t,e)},getScheme:function(t){return this.colors.getScheme(t)},getSelectedScheme:function(){return this.colors.getScheme(this.get("scheme"))}})},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(24),o=i.stat,s=i.dyn,a=n(25),u=n(26),l=n(27),c=n(28),h=n(29),f=n(30),d=n(31),g=n(32),p=n(33),m=n(34),v=n(35),_=n(36),i=n(37),b={buried:a,buried_index:a,cinema:u,clustal2:c,clustal:l,helix:h,helix_propensity:h,hydro:f,lesk:d,mae:g,nucleotide:p,purine:m,purine_pyrimidine:m,strand:v,strand_propensity:v,taylor:_,turn:i,turn_propensity:i,zappo:n(38)},y={pid:n(39)},n=function(t){this.maps=x(b),this.dyn=x(y),this.opt=t};function x(t){if(null==t||"object"!=(void 0===t?"undefined":r(t)))return t;var e,n=t.constructor();for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t.exports=n).getScheme=function(t){return b[t]},n.prototype.getScheme=function(t){var e=this.maps[t];return void 0===e&&(e={},null!=this.dyn[t])?new s(this.dyn[t],this.opt):new o(e)},n.prototype.addStaticScheme=function(t,e){this.maps[t]=e},n.prototype.addDynScheme=function(t,e){this.dyn[t]=e}},function(t,e){"use strict";t.exports.stat=function(t){this.defaultColor="#ffffff",this.type="static",this.map=t,this.getColor=function(t){return void 0!==this.map[t]?this.map[t]:this.defaultColor}},t.exports.dyn=function(t,e){this.type="dyn",this.opt=e,void 0!==t.init?(t.init.call(this),this.getColor=t.run,this.reset=t.init):this.getColor=t}},function(t,e){"use strict";t.exports={A:"#00a35c",R:"#00fc03",N:"#00eb14",D:"#00eb14",C:"#0000ff",Q:"#00f10e",E:"#00f10e",G:"#009d62",H:"#00d52a",I:"#0054ab",L:"#007b84",K:"#00ff00",M:"#009768",F:"#008778",P:"#00e01f",S:"#00d52a",T:"#00db24",W:"#00a857",Y:"#00e619",V:"#005fa0",B:"#00eb14",X:"#00b649",Z:"#00f10e"}},function(t,e){"use strict";t.exports={A:"#BBBBBB",B:"grey",C:"yellow",D:"red",E:"red",F:"magenta",G:"brown",H:"#00FFFF",I:"#BBBBBB",J:"#fff",K:"#00FFFF",L:"#BBBBBB",M:"#BBBBBB",N:"green",O:"#fff",P:"brown",Q:"green",R:"#00FFFF",S:"green",T:"green",U:"#fff",V:"#BBBBBB",W:"magenta",X:"grey",Y:"magenta",Z:"grey",Gap:"grey"}},function(t,e){"use strict";t.exports={A:"orange",B:"#fff",C:"green",D:"red",E:"red",F:"blue",G:"orange",H:"red",I:"green",J:"#fff",K:"red",L:"green",M:"green",N:"#fff",O:"#fff",P:"orange",Q:"#fff",R:"red",S:"orange",T:"orange",U:"#fff",V:"green",W:"blue",X:"#fff",Y:"blue",Z:"#fff",Gap:"#fff"}},function(t,e){"use strict";t.exports={A:"#80a0f0",R:"#f01505",N:"#00ff00",D:"#c048c0",C:"#f08080",Q:"#00ff00",E:"#c048c0",G:"#f09048",H:"#15a4a4",I:"#80a0f0",L:"#80a0f0",K:"#f01505",M:"#80a0f0",F:"#80a0f0",P:"#ffff00",S:"#00ff00",T:"#00ff00",W:"#80a0f0",Y:"#15a4a4",V:"#80a0f0",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e){"use strict";t.exports={A:"#e718e7",R:"#6f906f",N:"#1be41b",D:"#778877",C:"#23dc23",Q:"#926d92",E:"#ff00ff",G:"#00ff00",H:"#758a75",I:"#8a758a",L:"#ae51ae",K:"#a05fa0",M:"#ef10ef",F:"#986798",P:"#00ff00",S:"#36c936",T:"#47b847",W:"#8a758a",Y:"#21de21",V:"#857a85",B:"#49b649",X:"#758a75",Z:"#c936c9"}},function(t,e){"use strict";t.exports={A:"#ad0052",B:"#0c00f3",C:"#c2003d",D:"#0c00f3",E:"#0c00f3",F:"#cb0034",G:"#6a0095",H:"#1500ea",I:"#ff0000",J:"#fff",K:"#0000ff",L:"#ea0015",M:"#b0004f",N:"#0c00f3",O:"#fff",P:"#4600b9",Q:"#0c00f3",R:"#0000ff",S:"#5e00a1",T:"#61009e",U:"#fff",V:"#f60009",W:"#5b00a4",X:"#680097",Y:"#4f00b0",Z:"#0c00f3"}},function(t,e){"use strict";t.exports={A:" orange",B:" #fff",C:" green",D:" red",E:" red",F:" green",G:" orange",H:" magenta",I:" green",J:" #fff",K:" red",L:" green",M:" green",N:" magenta",O:" #fff",P:" green",Q:" magenta",R:" red",S:" orange",T:" orange",U:" #fff",V:" green",W:" green",X:" #fff",Y:" green",Z:" #fff",Gap:" #fff"}},function(t,e){"use strict";t.exports={A:" #77dd88",B:" #fff",C:" #99ee66",D:" #55bb33",E:" #55bb33",F:" #9999ff",G:" #77dd88",H:" #5555ff",I:" #66bbff",J:" #fff",K:" #ffcc77",L:" #66bbff",M:" #66bbff",N:" #55bb33",O:" #fff",P:" #eeaaaa",Q:" #55bb33",R:" #ffcc77",S:" #ff4455",T:" #ff4455",U:" #fff",V:" #66bbff",W:" #9999ff",X:" #fff",Y:" #9999ff",Z:" #fff",Gap:" #fff"}},function(t,e){"use strict";t.exports={A:" #64F73F",C:" #FFB340",G:" #EB413C",T:" #3C88EE",U:" #3C88EE"}},function(t,e){"use strict";t.exports={A:" #FF83FA",C:" #40E0D0",G:" #FF83FA",R:" #FF83FA",T:" #40E0D0",U:" #40E0D0",Y:" #40E0D0"}},function(t,e){"use strict";t.exports={A:"#5858a7",R:"#6b6b94",N:"#64649b",D:"#2121de",C:"#9d9d62",Q:"#8c8c73",E:"#0000ff",G:"#4949b6",H:"#60609f",I:"#ecec13",L:"#b2b24d",K:"#4747b8",M:"#82827d",F:"#c2c23d",P:"#2323dc",S:"#4949b6",T:"#9d9d62",W:"#c0c03f",Y:"#d3d32c",V:"#ffff00",B:"#4343bc",X:"#797986",Z:"#4747b8"}},function(t,e){"use strict";t.exports={A:"#ccff00",R:"#0000ff",N:"#cc00ff",D:"#ff0000",C:"#ffff00",Q:"#ff00cc",E:"#ff0066",G:"#ff9900",H:"#0066ff",I:"#66ff00",L:"#33ff00",K:"#6600ff",M:"#00ff00",F:"#00ff66",P:"#ffcc00",S:"#ff3300",T:"#ff6600",W:"#00ccff",Y:"#00ffcc",V:"#99ff00",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e){"use strict";t.exports={A:"#2cd3d3",R:"#708f8f",N:"#ff0000",D:"#e81717",C:"#a85757",Q:"#3fc0c0",E:"#778888",G:"#ff0000",H:"#708f8f",I:"#00ffff",L:"#1ce3e3",K:"#7e8181",M:"#1ee1e1",F:"#1ee1e1",P:"#f60909",S:"#e11e1e",T:"#738c8c",W:"#738c8c",Y:"#9d6262",V:"#07f8f8",B:"#f30c0c",X:"#7c8383",Z:"#5ba4a4"}},function(t,e){"use strict";t.exports={A:"#ffafaf",R:"#6464ff",N:"#00ff00",D:"#ff0000",C:"#ffff00",Q:"#00ff00",E:"#ff0000",G:"#ff00ff",H:"#6464ff",I:"#ffafaf",L:"#ffafaf",K:"#6464ff",M:"#ffafaf",F:"#ffc800",P:"#ff00ff",S:"#00ff00",T:"#00ff00",W:"#ffc800",Y:"#ffc800",V:"#ffafaf",B:"#fff",X:"#fff",Z:"#fff"}},function(t,e){"use strict";t.exports=t={},t.init=function(){this.cons=this.opt.conservation()},t.run=function(t,e){e=this.cons[e.pos];return.8<e?"#6464ff":.6<e?"#9da5ff":.4<e?"#cccccc":"#ffffff"}},function(t,e,n){"use strict";n=n(6).Model;t.exports=n.extend({initialize:function(t,e){return null==this.get("hidden")&&this.set("hidden",[]),this.stats=e},calcHiddenColumns:function(t){for(var e=this.get("hidden"),n=t,r=0;r<e.length;r++)e[r]<=n&&n++;return n-t}})},function(t,e,n){"use strict";n=n(6).Model;t.exports=n.extend({defaults:{registerMouseHover:!1,registerMouseClicks:!0,importProxy:"https://cors-anywhere.herokuapp.com/",importProxyStripHttp:!0,eventBus:!0,alphabetSize:20,dropImport:!1,debug:!1,hasRef:!1,bootstrapMenu:!1,manualRendering:!1}})},function(t,e,r){"use strict";var i=r(43),n=r(6).Model;t.exports=n.extend({initialize:function(t){return this.g=t},development:{"msa-tnt":"../js/msa-tnt_bundle.js","biojs-io-newick":"../js/biojs-io-newick.min.js"},loadPackage:function(e,n){try{return n(r(45)(e))}catch(t){return i.default.loadScript(this._pkgURL(e),n)}},loadPackages:function(t,e){var n=this,r=i.default.joinCb(function(){return e()},t.length);return t.forEach(function(t){return n.loadPackage(t,r)})},_pkgURL:function(t){t=this.development[t];return t}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44),n={loadScript:function(t,e){var n=r.mk("script");return n.type="text/javascript",n.src=t,n.async=!0,n.onload=n.onreadystatechange=function(){if(!this.readyState||"complete"===this.readyState)return e()},document.getElementsByTagName("script")[0].parentNode.appendChild(n)},joinCb:function(t,e,n){e=e||1;var r=0,i=function(){if(++r===e)return t.call(n)};return function(t,e){return null==t?i():function(){return 0<=t.indexOf("apply")&&t.apply(e,arguments),i()}}}};e.default=n},function(t,e,n){(function(t){"use strict";var e={};e.d=e.defaultValue=function(t,e){return void 0===t?"function"==typeof t?e():e:t},e.id=function(t){return document.getElementById(t)},e.mk=function(t){return document.createElement(t)},void 0!==t&&void 0!==t.exports&&(t.exports=e)}).call(e,n(4)(t))},function(t,e,n){var r={"./StageScale":46,"./StageScale.js":46,"./colorscheme":22,"./colorscheme.js":22,"./columns":40,"./columns.js":40,"./config":41,"./config.js":41,"./package":42,"./package.js":42,"./selection/Selection":2,"./selection/Selection.js":2,"./selection/SelectionCol":13,"./selection/SelectionCol.js":13,"./selection/index":48,"./selection/index.js":48,"./user":49,"./user.js":49,"./visOrdering":50,"./visOrdering.js":50,"./visibility":51,"./visibility.js":51,"./zoomer":52,"./zoomer.js":52};function i(t){return n(o(t))}function o(t){return r[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}i.keys=function(){return Object.keys(r)},i.resolve=o,(t.exports=i).id=45},function(t,e,n){"use strict";var r=n(6).Model;n(47);t.exports=r.extend({constructor:function(t,e){return this.g=e.g,r.apply(this,arguments),this},defaults:{currentSize:5,step:1,originalSize:!1,scaleCategories:[{columnWidth:1,markerStepSize:20,stepSize:0},{columnWidth:3,markerStepSize:20,stepSize:0},{columnWidth:5,markerStepSize:10,stepSize:0},{columnWidth:9,markerStepSize:5,stepSize:1},{columnWidth:15,markerStepSize:2,stepSize:1},{columnWidth:20,markerStepSize:1,stepSize:1},{columnWidth:30,markerStepSize:1,stepSize:1},{columnWidth:45,markerStepSize:1,stepSize:1}]},initialize:function(t){var e=this.get("scaleCategories"),n=this.g.zoomer.get("columnWidth")||this._getScaleInfo().columnWidth;_.find(e,{columnWidth:n})||(e[r=this._insertScaleCategory(n)],this.set("currentSize",r+1));var r=this.get("currentSize");return this.set("originalSize",r),this.setSize(r),this},_insertScaleCategory:function(e){var t=this.get("scaleCategories"),n=_.findLastIndex(t,function(t){return t.columnWidth<e}),r=t[n],n=n+1,r={columnWidth:e,markerStepSize:r.markerStepSize,stepSize:r.markerStepSize};return t.splice(n,0,r),this.set("scaleCategories",t),n},getSizeRange:function(){return[1,this.get("scaleCategories").length]},bigger:function(){return this.setSize(this.get("currentSize")+this.get("step"))},smaller:function(){return this.setSize(this.get("currentSize")-this.get("step"))},reset:function(){return this.setSize(this.get("originalSize"))},setSize:function(t){var e=this.getSizeRange();t=(t=parseInt(t))<e[0]?e[0]:t>e[1]?e[1]:t,this.set("currentSize",t);t=this._getScaleInfo();return this.g.zoomer.set({columnWidth:t.columnWidth,stepSize:t.stepSize,markerStepSize:t.markerStepSize}),this},getSize:function(){return this.get("currentSize")},_getScaleInfo:function(){var t=this.getSize(),e=this.get("scaleCategories");if(0<t&&t<=e.length)return e[t-1];console.error("out of bounds")}})},function(t,e,n){"use strict";function r(t,e){if(!(this instanceof r))return new r(t,e);this.domain=[],this.range=[],Array.isArray(t)&&(this.domain=t),Array.isArray(e)&&(this.range=e);var n=function(t){if("number"!=typeof t)return null;var e=this.domain[0],n=this.domain[1],r=this.range[0],i=this.range[1];return"number"!==r&&"number"!=typeof i&&(r=e,i=n),r+(i-r)/(n-e)*(t-e)}.bind(this);return n.domain=function(t){return Array.isArray(t)&&(this.domain=t),n}.bind(this),n.range=function(t){return Array.isArray(t)&&(this.range=t),n}.bind(this),n}void 0!==t&&t.exports&&(e=t.exports=r),e.LinearScale=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(13);Object.defineProperty(e,"SelectionManager",{enumerable:!0,get:function(){return r.SelectionManager}})},function(t,e,n){"use strict";n=n(6).Model;t.exports=n.extend({defaults:{searchText:""}})},function(t,e,n){"use strict";n=n(6).Model;t.exports=n.extend({defaults:{searchBox:-10,overviewBox:30,headerBox:-1,alignmentBody:0,scaleSlider:50}})},function(t,e,n){"use strict";var r=n(6).Model;t.exports=r.extend({defaults:{sequences:!0,markers:!0,metacell:!1,conserv:!1,overviewbox:!1,seqlogo:!1,gapHeader:!1,leftHeader:!0,scaleslider:!1,labels:!0,labelName:!0,labelId:!0,labelPartition:!1,labelCheckbox:!1,metaGaps:!0,metaIdentity:!0,metaLinks:!0},constructor:function(t,e){return this.calcDefaults(e.model),r.apply(this,arguments)},initialize:function(){return this.listenTo(this,"change:metaLinks change:metaIdentity change:metaGaps",function(){return this.trigger("change:metacell")},this),this.listenTo(this,"change:labelName change:labelId change:labelPartition change:labelCheckbox",function(){return this.trigger("change:labels")},this),this.listenTo(this,"change:markers change:conserv change:seqlogo change:gapHeader",function(){return this.trigger("change:header")},this)},calcDefaults:function(t){if(0<t.length){t=t.at(0).get("ids");if(void 0!==t&&0===Object.keys(t).length)return this.defaults.metaLinks=!1}}})},function(t,e,n){"use strict";var r=n(6).Model;t.exports=r.extend({constructor:function(t,e){return this.calcDefaults(e.model),r.apply(this,arguments),this.g=e.g,this.listenTo(this,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",function(){return this.trigger("change:labelWidth",this.getLabelWidth())},this),this.listenTo(this,"change:metaLinksWidth change:metaIdentWidth change:metaGapWidth",function(){return this.trigger("change:metaWidth",this.getMetaWidth())},this),this},defaults:{alignmentWidth:"auto",alignmentHeight:225,columnWidth:15,rowHeight:15,autoResize:!0,labelIdLength:20,labelNameLength:100,labelPartLength:15,labelCheckLength:15,labelFontsize:13,labelLineHeight:"13px",markerFontsize:"10px",stepSize:1,markerStepSize:2,markerHeight:20,residueFont:"13",canvasEventScale:1,minLetterDrawSize:11,boxRectHeight:2,boxRectWidth:2,overviewboxPaddingTop:10,overviewboxWidth:"fixed",overviewboxHeight:"fixed",metaGapWidth:35,metaIdentWidth:40,_alignmentScrollLeft:0,_alignmentScrollTop:0},calcDefaults:function(t){return t.getMaxLength()<200&&t.length<30&&(this.defaults.boxRectWidth=this.defaults.boxRectHeight=5),this},getAlignmentWidth:function(t){return this.get("autoResize")&&void 0!==t?this.get("columnWidth")*t:void 0===this.get("alignmentWidth")||"auto"===this.get("alignmentWidth")||0===this.get("alignmentWidth")?this._adjustWidth():this.get("alignmentWidth")},setLeftOffset:function(t){t=Math.max(0,t);return t-=this.g.columns.calcHiddenColumns(t),this.set("_alignmentScrollLeft",t*this.get("columnWidth"))},setTopOffset:function(t){for(var e=Math.max(0,t-1),n=0,r=0;0<e?r<=e:e<=r;0<e?r++:r--)n+=this.model.at(r).attributes.height||1;return this.set("_alignmentScrollTop",n*this.get("rowHeight"))},getLeftBlockWidth:function(){var t=0;return this.g.vis.get("labels")&&(t+=this.getLabelWidth()),this.g.vis.get("metacell")&&(t+=this.getMetaWidth()),t},getMetaWidth:function(){var t=0;return this.g.vis.get("metaGaps")&&(t+=this.get("metaGapWidth")),this.g.vis.get("metaIdentity")&&(t+=this.get("metaIdentWidth")),this.g.vis.get("metaLinks")&&(t+=this.get("metaLinksWidth")),t},getLabelWidth:function(){var t=0;return this.g.vis.get("labelName")&&(t+=this.get("labelNameLength")),this.g.vis.get("labelId")&&(t+=this.get("labelIdLength")),this.g.vis.get("labelPartition")&&(t+=this.get("labelPartLength")),this.g.vis.get("labelCheckbox")&&(t+=this.get("labelCheckLength")),t},_adjustWidth:function(){if(void 0!==this.el&&void 0!==this.model){var t=null!=this.el.parentNode&&0!==this.el.parentNode.offsetWidth?this.el.parentNode.offsetWidth:document.body.clientWidth-35,e=t-this.getLeftBlockWidth(),t=this.getAlignmentWidth(this.model.getMaxLength()-this.g.columns.get("hidden").length),t=Math.min(e,t),t=Math.floor(t/this.get("columnWidth"))*this.get("columnWidth");return this.attributes.alignmentWidth=t}},autoResize:function(){if(this.get("autoResize"))return this._adjustWidth(this.el,this.model)},autoHeight:function(t){var e=this.getMaxAlignmentHeight();return void 0!==t&&0<t&&(e=Math.min(e,t)),this.set("alignmentHeight",e)},setEl:function(t,e){return this.el=t,this.model=e},_checkScrolling:function(t,e){var n=t[0],t=t[1];return this.set("_alignmentScrollLeft",n,e),this.set("_alignmentScrollTop",t,e)},getMaxAlignmentHeight:function(){var e=0;return this.model.each(function(t){return e+=t.attributes.height||1}),e*this.get("rowHeight")},getMaxAlignmentWidth:function(){return this.model.getMaxLength()*this.get("columnWidth")}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=l(n(54)),o=l(n(87)),s=l(n(110)),a=l(n(111)),u=l(n(112));function l(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.stats,"reset",function(){return this.rerender()}),this.listenTo(this.model,"change:hidden",(0,r.debounce)(this.rerender,10)),this.listenTo(this.model,"sort",this.rerender),this.listenTo(this.model,"add",function(){return console.log("seq add")}),this.listenTo(this.g.vis,"change:sequences",this.rerender),this.listenTo(this.g.vis,"change:overviewbox",this.rerender),this.listenTo(this.g.visorder,"change",this.rerender),this.listenTo(this.g.zoomer,"change:columnWidth",this.rerender),this.listenTo(this.g.vis,"change:scaleslider",this.rerender),this},draw:function(){this.removeViews(),this.g.vis.get("overviewbox")&&((t=new s.default({model:this.model,g:this.g})).ordering=this.g.visorder.get("overviewBox"),this.addView("overviewBox",t));var t=new o.default({model:this.model,g:this.g});t.ordering=this.g.visorder.get("headerBox"),this.addView("headerBox",t);t=new a.default({model:this.model,g:this.g});t.ordering=this.g.visorder.get("searchBox"),this.addView("searchbox",t);t=new i.default({model:this.model,g:this.g});return t.ordering=this.g.visorder.get("alignmentBody"),this.addView("body",t),this.g.vis.get("scaleslider")&&((t=new u.default({model:this.g.scale,g:this.g})).ordering=this.g.visorder.get("scaleSlider"),this.addView("scaleSlider",t)),this},render:function(t){return this.renderSubviews(),this.el.className="biojs_msa_stage",this},rerender:function(){if(!this.g.config.get("manualRendering"))return this.draw(),this.render()}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(55)),i=o(n(62));function o(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){this.g=t.g;t=new i.default({model:this.model,g:this.g});return t.ordering=-1,this.addView("labelblock",t),this.g.vis.get("sequences")&&((t=new r.default({model:this.model,g:this.g})).ordering=0,this.addView("seqblock",t)),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.adjustHeight),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.adjustWidth),this.listenTo(this.g.columns,"change:hidden",this.adjustHeight),this},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_albody",this.el.style.whiteSpace="nowrap",this.adjustHeight(),this.adjustWidth(),this},adjustHeight:function(){return"auto"===this.g.zoomer.get("alignmentHeight")?this.el.style.height=this.g.zoomer.get("rowHeight")*this.model.length+5:this.el.style.height=this.g.zoomer.get("alignmentHeight")},adjustWidth:function(){return this.el.style.width=this.getWidth()},getWidth:function(){var t=0;return t+=this.g.zoomer.getLeftBlockWidth(),this.g.vis.get("sequences")&&(t+=this.g.zoomer.get("alignmentWidth")),t}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},r=n(3),i=l(n(56)),s=l(n(58)),a=l(n(59)),u=l(n(60));function l(t){return t&&t.__esModule?t:{default:t}}var c=n(16),h=n(61),f=n(15),c=c.extend({tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft change:_alignmentScrollTop",function(t,e,n){if(null==(null!=n?n.origin:void 0)||"canvasseq"!==n.origin)return this.render()}),this.listenTo(this.g.columns,"change:hidden",this.render),this.listenTo(this.g.zoomer,"change:alignmentWidth change:alignmentHeight",this.render),this.listenTo(this.g.colorscheme,"change",this.render),this.listenTo(this.g.selcol,"reset add",this.render),this.listenTo(this.model,"reset add",this.render),this.el.style.display="inline-block",this.el.style.overflowX="hidden",this.el.style.overflowY="hidden",this.el.className="biojs_msa_seqblock",this.ctx=this.el.getContext("2d"),this.cache=new i.default(this.g),this.coordsCache=new u.default(this.g,this.model),this.listenTo(this.g.zoomer,"change:residueFont",function(){return this.cache=new i.default(this.g),this.render()}),this.sel=new s.default(this.g,this.ctx),this._setColor(),this.throttleTime=0,this.throttleCounts=0,null!=document.documentElement.style.webkitAppearance?this.throttledDraw=function(){var t=+new Date;if(this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,15<this.throttleCounts){t=Math.ceil(this.throttleTime/this.throttleCounts);return console.log("avgDrawTime/WebKit",t),this.throttledDraw=this.draw}}:this.throttledDraw=(0,r.throttle)(this.throttledDraw,30),this.manageEvents()},throttledDraw:function(){var t=+new Date;if(this.draw(),this.throttleTime+=+new Date-t,this.throttleCounts++,15<this.throttleCounts){t=Math.ceil(this.throttleTime/this.throttleCounts);return console.log("avgDrawTime",t),t*=1.2,t=Math.max(20,t),this.throttledDraw=_.throttle(this.draw,t)}},manageEvents:function(){var t={mousedown:"_onmousedown",touchstart:"_ontouchstart"};return this.g.config.get("registerMouseClicks")&&(t.dblclick="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),"auto"!=this.g.zoomer.get("alignmentHeight")&&(t.mousewheel="_onmousewheel"),t.DOMMouseScroll="_onmousewheel",this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.dragStart=[]},_setColor:function(){return this.color=this.g.colorscheme.getSelectedScheme()},draw:function(){if(this.el.width=this.el.width,null!=this.seqDrawer&&0<this.model.length)return this.seqDrawer.drawLetters(),this.seqDrawer.drawRows(this.sel._appendSelection,this.sel),this.seqDrawer.drawRows(this.drawFeatures,this)},drawFeatures:function(r){var i=this.g.zoomer.get("columnWidth"),o=this.g.zoomer.get("rowHeight");if(1<r.model.attributes.height){var s=this.ctx;return r.model.attributes.features.each(function(t){s.fillStyle=t.attributes.fillColor||"red";var e=t.attributes.xEnd-t.attributes.xStart+1,n=(t.attributes.row+1)*o;return s.fillRect(t.attributes.xStart*i+r.xZero,n+r.yZero,i*e,o)}),s.fillStyle="black",s.font=this.g.zoomer.get("residueFont")+"px mono",s.textBaseline="middle",s.textAlign="center",r.model.attributes.features.each(function(t){var e=t.attributes.xEnd-t.attributes.xStart+1,n=(t.attributes.row+1)*o;return s.fillText(t.attributes.text,r.xZero+t.attributes.xStart*i+e/2*i,r.yZero+.5*o+n)})}},render:function(){let t;if("auto"===this.g.zoomer.get("alignmentHeight")){let e=0;for(let t=0;t<this.model.models.length;t++)this.model.models[t].attributes.hidden||e++;t=this.g.zoomer.get("rowHeight")*(e+6)+5,console.log(e)}else t=this.g.zoomer.get("alignmentHeight");return this.el.setAttribute("height",t.toString(10)+"px"),this.el.setAttribute("width",this.g.zoomer.getAlignmentWidth()+"px"),this.g.zoomer._checkScrolling(this._checkScrolling([this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")]),{header:"canvasseq"}),this._setColor(),this.seqDrawer=new a.default(this.g,this.ctx,this.model,{width:this.el.width,height:this.el.height,color:this.color,cache:this.cache}),this.throttledDraw(),this},_onmousemove:function(t,e){if(0!==this.dragStart.length){var n=h.abs(t),r=[n[0]-this.dragStart[0],n[1]-this.dragStart[1]];"auto"==this.g.zoomer.get("alignmentHeight")&&(r=[n[0]-this.dragStart[0],0]);var i=this.g.zoomer.get("canvasEventScale");e&&(i=3);for(var o=0;o<=1;o++)r[o]=r[o]*i;for(var s=[this.dragStartScroll[0]-r[0],this.dragStartScroll[1]-r[1]],a=0;a<=1;a++)s[a]=Math.round(s[a]);var u=this._checkScrolling(s);this.g.zoomer._checkScrolling(u,{origin:"canvasseq"});for(var l=0;l<=1;l++)u[l]!==s[l]&&(0===u[l]?(this.dragStart[l]=n[l],this.dragStartScroll[l]=0):this.dragStart[l]=n[l]-u[l]);return this.throttledDraw(),null!=t.preventDefault?(t.preventDefault(),t.stopPropagation()):void 0}},_ontouchmove:function(t){return this._onmousemove(t.changedTouches[0],!0),t.preventDefault(),t.stopPropagation()},_onmousedown:function(t){var e=this;return this.dragStart=h.abs(t),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],f(document.body).on("mousemove.overmove",function(t){return e._onmousemove(t)}),f(document.body).on("mouseup.overup",function(){return e._cleanup()}),t.preventDefault()},_ontouchstart:function(t){var e=this;return this.dragStart=h.abs(t.changedTouches[0]),this.dragStartScroll=[this.g.zoomer.get("_alignmentScrollLeft"),this.g.zoomer.get("_alignmentScrollTop")],f(document.body).on("touchmove.overtmove",function(t){return e._ontouchmove(t)}),f(document.body).on("touchend.overtend touchleave.overtleave touchcancel.overtcanel",function(t){return e._touchCleanup(t)})},_onmousewinout:function(t){if(t.toElement===document.body.parentNode)return this._cleanup()},_cleanup:function(){return this.dragStart=[],f(document.body).off(".overmove"),f(document.body).off(".overup"),f(document.body).off(".overout")},_touchCleanup:function(t){return 0<t.changedTouches.length&&this._onmousemove(t.changedTouches[0],!0),this.dragStart=[],f(document.body).off(".overtmove"),f(document.body).off(".overtend"),f(document.body).off(".overtleave"),f(document.body).off(".overtcancel")},_onmousewheel:function(t){var e=h.wheelDelta(t);return this.g.zoomer.set("_alignmentScrollLeft",this.g.zoomer.get("_alignmentScrollLeft")+e[0]),this.g.zoomer.set("_alignmentScrollTop",this.g.zoomer.get("_alignmentScrollTop")+e[1]),t.preventDefault()},_onclick:function(t){t=this._getClickPos(t);return null!=t&&(null!=t.feature?this.g.trigger("feature:click",t):this.g.trigger("residue:click",t)),this.throttledDraw()},_onmousein:function(t){t=this._getClickPos(t);return null!=t&&(null!=t.feature?this.g.trigger("feature:mousein",t):this.g.trigger("residue:mousein",t)),this.throttledDraw()},_onmouseout:function(t){t=this._getClickPos(t);return null!=t&&(null!=t.feature?this.g.trigger("feature:mouseout",t):this.g.trigger("residue:mouseout",t)),this.throttledDraw()},_getClickPos:function(t){var e=h.rel(t);e[0]+=this.g.zoomer.get("_alignmentScrollLeft");var n=Math.floor(e[0]/this.g.zoomer.get("columnWidth")),r=this.seqDrawer._getSeqForYClick(e[1]),i=o(r,2),e=i[0],r=i[1];n+=this.g.columns.calcHiddenColumns(n),e+=this.model.calcHiddenSeqs(e),n=Math.max(0,n),e=Math.max(0,e);i=this.model.at(e).get("id");if(!(0<r))return{seqId:i,rowPos:n,evt:t};e=this.model.at(e).get("features").getFeatureOnRow(r-1,n);if(0!==e.length){r=e[0];return console.log(e[0].attributes),{seqId:i,feature:r,rowPos:n,evt:t}}},_checkScrolling:function(t){for(var e=[this.coordsCache.maxScrollWidth,this.coordsCache.maxScrollHeight],n=0;n<=1;n++)t[n]>e[n]&&(t[n]=e[n]),t[n]<0&&(t[n]=0);return t}});e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t};function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n(57);r(o,[{key:"getFontTile",value:function(t,e,n){return e===this.cacheWidth&&n===this.cacheHeight||(this.cacheHeight=n,this.cacheWidth=e,this.cache={}),void 0===this.cache[t]&&this.createTile(t,e,n),this.cache[t]}},{key:"createTile",value:function(t,e,n){var r=this.cache[t]=document.createElement("canvas");return r.width=e,r.height=n,this.ctx=r.getContext("2d"),this.ctx.font=this.g.zoomer.get("residueFont")+"px mono",this.ctx.textBaseline="middle",this.ctx.textAlign="center",this.ctx.fillText(t,e/2,n/2,e)}}]),r=o;function o(t){!function(t){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.g=t,this.cache={},this.cacheHeight=0,this.cacheWidth=0}e.default=r},function(t,e,n){"use strict";var i=n(8);i.onAll=function(t,e){return this.on("all",t,e),this},i.oldMixin=i.mixin,i.mixin=function(t){i.oldMixin(t);for(var e=["onAll"],n=0;n<e.length;n++){var r=e[n];t[r]=this[r]}return t},t.exports=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(3),n=function(t,e){return this.g=t,this.ctx=e,this};_.extend(n.prototype,{_getSelection:function(t){var e=t.get("seq").length,n=[],r=this.g.selcol.getSelForRow(t.get("id")),t=(0,h.find)(r,function(t){return"row"===t.get("type")});if(null!=t)for(var i=e-1,o=0;o<=i;o++)n.push(o);else if(0<r.length)for(var s,a=0;a<r.length;a++)for(var u=(s=r[a]).get("xStart"),l=s.get("xEnd"),c=u;c<=l;c++)n.push(c);return n},_appendSelection:function(i){var o=this,s=i.model.get("seq"),a=this._getSelection(i.model),t=this._getPrevNextSelection(i.model),u=t[0],l=t[1];this.g.zoomer.get("columnWidth"),this.g.zoomer.get("rowHeight");if(0!==a.length){var c=0;return function(){for(var e,t=[],n=s.length-1,r=0;r<=n;r++)e=r,t.push(function(){if(0<=i.hidden.indexOf(e))return c++;var t=e-c;return 0<=a.indexOf(e)&&(0==t||a.indexOf(e-1)<0)?o._renderSelection({n:e,k:t,selection:a,mPrevSel:u,mNextSel:l,xZero:i.xZero,yZero:i.yZero,model:i.model}):void 0}());return t}()}},_renderSelection:function(t){for(var e=t.xZero,n=t.yZero,r=t.n,i=t.k,o=t.selection,s=t.mPrevSel,a=t.mNextSel,u=0,l=t.model.get("seq").length-1,c=r;c<=l&&0<=o.indexOf(c);c++)u++;var h=this.g.zoomer.get("columnWidth"),f=this.g.zoomer.get("rowHeight"),d=h*u+1,g=this.g.columns.get("hidden");this.ctx.beginPath();var p=this.ctx.lineWidth;this.ctx.lineWidth=3;t=this.ctx.strokeStyle;this.ctx.strokeStyle="#FF0000",e+=i*h;for(var m=0,v=u-1,_=0;_<=v;_++){var b=r+_;0<=g.indexOf(b)||(null!=s&&0<=s.indexOf(b)||(this.ctx.moveTo(e+m,n),this.ctx.lineTo(m+h+e,n)),null!=a&&0<=a.indexOf(b)||(this.ctx.moveTo(m+e,f+n),this.ctx.lineTo(m+h+e,f+n)),m+=h)}return this.ctx.moveTo(e,n),this.ctx.lineTo(e,f+n),this.ctx.moveTo(e+d,n),this.ctx.lineTo(e+d,f+n),this.ctx.stroke(),this.ctx.strokeStyle=t,this.ctx.lineWidth=p},_getPrevNextSelection:function(t){var e=t.collection.prev(t),n=t.collection.next(t),r=void 0,t=void 0;return null!=e&&(r=this._getSelection(e)),null!=n&&(t=this._getSelection(n)),[r,t]}}),e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t,e,n,r){return this.g=t,this.ctx=e,this.model=n,this.width=r.width,this.height=r.height,this.color=r.color,this.cache=r.cache,this.rectHeight=this.g.zoomer.get("rowHeight"),this.rectWidth=this.g.zoomer.get("columnWidth"),this}var u=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i={updateConfig:function(){this.rectWidth=this.g.zoomer.get("columnWidth"),this.rectHeight=this.g.zoomer.get("rowHeight")},drawLetters:function(){return this.updateConfig(),this.ctx.globalAlpha=this.g.colorscheme.get("opacity"),this.drawSeqs(function(t){return this.drawSeq(t,this._drawRect)}),this.ctx.globalAlpha=1,this.rectWidth>=this.g.zoomer.get("minLetterDrawSize")&&this.drawSeqs(function(t){return this.drawSeq(t,this._drawLetter)}),this},drawSeqs:function(t,e){var n=this.g.columns.get("hidden");e=e||this;for(var r=this.getStartSeq(),i=u(r,2),r=i[0],o=i[1],s=r;s<this.model.length;s++){var a=this.model.at(s);if(!a.get("hidden"))if(t.call(e,{model:a,yPos:o,y:s,hidden:n}),(o+=(a.attributes.height||1)*this.rectHeight)>this.height)break}},drawRows:function(e,n){return this.drawSeqs(function(t){return this.drawRow(t,e,n)})},drawRow:function(t,e,n){var r=this.g.zoomer.get("columnWidth"),i=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/r))),i=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%r)-i*r,r=t.yPos;return e.call(n,{model:t.model,xZero:i,yZero:r,hidden:t.hidden})},getStartSeq:function(){for(var t=Math.max(0,Math.floor(this.g.zoomer.get("_alignmentScrollTop")/this.rectHeight))+1,e=0,n=0;e<t&&n<this.model.length;)e+=this.model.at(n).attributes.height||1,n++;return[n-1,-Math.max(0,this.g.zoomer.get("_alignmentScrollTop")-e*this.rectHeight+(this.model.at(n-1).attributes.height||1)*this.rectHeight)]},_getSeqForYClick:function(t){for(var e=this.getStartSeq(),n=u(e,2),e=n[0],n=n[1]%this.rectHeight,r=Math.max(0,Math.floor((t-n)/this.rectHeight))+1,i=0,o=e;i<r&&o<this.model.length;)i+=this.model.at(o).attributes.height||1,o++;return[o-1,Math.max(0,Math.floor(t/this.rectHeight)-i+(this.model.at(o-1).get("height")||1))]},drawSeq:function(t,e){for(var n=t.model.get("seq"),r=t.yPos,i=this.rectWidth,o=this.rectHeight,s=Math.max(0,Math.abs(Math.ceil(-this.g.zoomer.get("_alignmentScrollLeft")/i))),a=-Math.abs(-this.g.zoomer.get("_alignmentScrollLeft")%i),u={rectWidth:i,rectHeight:o,yPos:r,y:t.y},l=this.width,c=s;c<n.length;c++){var h=(h=n[c]).toUpperCase();if(u.x=c,u.c=h,u.xPos=a,t.hidden.indexOf(c)<0&&(e(this,u),l<(a+=i)))break}},_drawRect:function(t,e){var n=t.color.getColor(e.c,{pos:e.x,y:e.y});if(null!=n)return t.ctx.fillStyle=n,t.ctx.fillRect(e.xPos,e.yPos,e.rectWidth,e.rectHeight)},_drawLetter:function(t,e){return t.ctx.drawImage(t.cache.getFontTile(e.c,e.rectWidth,e.rectHeight),e.xPos,e.yPos,e.rectWidth,e.rectHeight)}};(0,n(3).extend)(r.prototype,i),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(57),n=function(t,e){return this.g=t,this.model=e,this.maxScrollWidth=0,this.maxScrollHeight=0,this.setMaxScrollHeight(),this.setMaxScrollWidth(),this.listenTo(this.g.zoomer,"change:rowHeight",this.setMaxScrollHeight),this.listenTo(this.g.zoomer,"change:columnWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentWidth",this.setMaxScrollWidth),this.listenTo(this.g.zoomer,"change:alignmentHeight",this.setMaxScrollHeight),this.listenTo(this.model,"add change reset",function(){return this.setMaxScrollHeight(),this.setMaxScrollWidth()},this),this};(0,r.extend)(n.prototype,{setMaxScrollHeight:function(){return this.maxScrollHeight=this.g.zoomer.getMaxAlignmentHeight()-this.g.zoomer.get("alignmentHeight")},setMaxScrollWidth:function(){return this.maxScrollWidth=this.g.zoomer.getMaxAlignmentWidth()-this.g.zoomer.getAlignmentWidth()}}),i.mixin(n.prototype),e.default=n},function(t,e){"use strict";t.exports={rel:function(t){var e,n,r=t.offsetX,i=t.offsetY;if(null!=r||(e=(void 0).getBoundingClientRect(),n=t.target||t.srcElement,null==r&&(r=t.clientX-e.left,i=t.clientY-e.top),null==r&&(r=t.pageX-n.offsetLeft,i=t.pageY-n.offsetTop),null!=r))return[r,i];console.log(t,"no mouse event defined. your browser sucks")},abs:function(t){var e=t.pageX,n=t.pageY;return null==e&&(e=t.layerX,n=t.layerY),null==e&&(e=t.clientX,n=t.clientY),null==e&&(e=t.x,n=t.y),[e,n]},wheelDelta:function(t){var e=[t.deltaX,t.deltaY];return null==e[0]&&t.mozMovementX&&(e=[0,t.mozMovementX]),isNaN(e[0])&&(e[0]=0),isNaN(e[1])&&(e[1]=0),e}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(63),o=(r=i)&&r.__esModule?r:{default:r};n=n(16).extend({initialize:function(t){var e=this;return this.g=t.g,this.draw(),this.listenTo(this.g.zoomer,"change:_alignmentScrollTop",this._adjustScrollingTop),this.g.vis.once("change:loaded",this._adjustScrollingTop,this),this.listenTo(this.g.zoomer,"change:alignmentHeight",this._setHeight),this.listenTo(this.model,"change:reference",this.draw),this.listenTo(this.model,"reset add remove",function(){return e.draw(),e.render()})},draw:function(){this.removeViews(),console.log("redraw columns",this.model.length);for(var t,e=0;e<this.model.length;e++)this.model.at(e).get("hidden")||((t=new o.default({model:this.model.at(e),g:this.g})).ordering=e,this.addView("row_"+e,t))},events:{scroll:"_sendScrollEvent"},_sendScrollEvent:function(){return this.g.zoomer.set("_alignmentScrollTop",this.el.scrollTop,{origin:"label"})},_adjustScrollingTop:function(){return this.el.scrollTop=this.g.zoomer.get("_alignmentScrollTop")},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_labelblock",this.el.style.display="inline-block",this.el.style.verticalAlign="top",this.el.style.overflowY="auto",this.el.style.overflowX="hidden",this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this.el.style.lineHeight=""+this.g.zoomer.get("labelLineHeight"),this._setHeight(),this},_setHeight:function(){return this.el.style.height=this.g.zoomer.get("alignmentHeight")+"px"}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(64)),i=o(n(66));function o(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels",this.drawR),this.listenTo(this.g.vis,"change:metacell",this.drawR),this.listenTo(this.g.zoomer,"change:rowHeight",function(){return this.el.style.height=this.g.zoomer.get("rowHeight")+"px"}),this.listenTo(this.g.selcol,"change reset add",this.setSelection)},draw:function(){if(this.removeViews(),this.g.vis.get("labels")&&this.addView("labels",new r.default({model:this.model,g:this.g})),this.g.vis.get("metacell")){var t=new i.default({model:this.model,g:this.g});return this.addView("metacell",t)}},drawR:function(){return this.draw(),this.render()},render:function(){return this.renderSubviews(),this.el.setAttribute("class","biojs_msa_labelrow"),this.el.style.height=this.g.zoomer.get("rowHeight")*(this.model.attributes.height||1)+"px",this.setSelection(),this},setSelection:function(){return 0<this.g.selcol.getSelForRow(this.model.id).length?this.el.style.fontWeight="bold":this.el.style.fontWeight="normal"}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(14),i=n(65),r=r.extend({initialize:function(t){return this.seq=t.seq,this.g=t.g,this.manageEvents()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents),this.listenTo(this.g.vis,"change:labelName change:labelId change:labelPartition change:labelCheckbox",this.render),this.listenTo(this.g.zoomer,"change:labelIdLength change:labelNameLength change:labelPartLength change:labelCheckLength",this.render),this.listenTo(this.g.zoomer,"change:labelFontSize change:labelLineHeight change:labelWidth change:rowHeight",this.render)},render:function(){var t,e,n;return i.removeAllChilds(this.el),this.el.style.width=this.g.zoomer.getLabelWidth()+"px",this.el.setAttribute("class","biojs_msa_labels"),this.g.vis.get("labelCheckbox")&&((e=document.createElement("input")).setAttribute("type","checkbox"),e.value=this.model.get("id"),e.name="seq",e.style.width=this.g.zoomer.get("labelCheckLength")+"px",this.el.appendChild(e)),this.g.vis.get("labelId")&&(t=document.createElement("span"),e=this.model.get("id"),isNaN(e)||e++,t.textContent=e,t.style.width=this.g.zoomer.get("labelIdLength")+"px",t.style.display="inline-block",this.el.appendChild(t)),this.g.vis.get("labelPartition")&&((n=document.createElement("span")).style.width=this.g.zoomer.get("labelPartLength")+"px",n.textContent=this.model.get("partition"),n.style.display="inline-block",this.el.appendChild(t),this.el.appendChild(n)),this.g.vis.get("labelName")&&((n=document.createElement("span")).textContent=this.model.get("name"),this.model.get("ref")&&this.g.config.get("hasRef")&&(n.style.fontWeight="bold"),n.style.width=this.g.zoomer.get("labelNameLength")+"px",this.el.appendChild(n)),this.el.style.overflow=scroll,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")+"px",this},_onclick:function(t){var e=this.model.get("id");return this.g.trigger("row:click",{seqId:e,evt:t})},_onmousein:function(t){var e=this.model.get("id");return this.g.trigger("row:mouseout",{seqId:e,evt:t})},_onmouseout:function(t){var e=this.model.get("id");return this.g.trigger("row:mouseout",{seqId:e,evt:t})}});e.default=r},function(t,e){"use strict";var n={removeToInsertLater:function(t){var e=t.parentNode,n=t.nextSibling;return e.removeChild(t),function(){n?e.insertBefore(t,n):e.appendChild(t)}},removeAllChilds:function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}};t.exports=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(67),o=n(85),s=(r=o)&&r.__esModule?r:{default:r},a=n(3);var u=n(14),l=n(65),u=u.extend({className:"biojs_msa_metaview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell",this.render),this.listenTo(this.g.zoomer,"change:metaWidth",this.render)},events:{click:"_onclick",mousein:"_onmousein",mouseout:"_onmouseout"},render:function(){l.removeAllChilds(this.el),this.el.style.display="inline-block";var t,e=this.g.zoomer.getMetaWidth();if(this.el.style.width=e-10,this.el.style.paddingRight=5,this.el.style.paddingLeft=5,this.el.style.fontSize=this.g.zoomer.get("labelFontsize")-2+"px",this.g.vis.get("metaGaps")&&(t=this.model.get("seq"),e=(100*(e=(0,a.reduce)(t,function(t,e){return"-"===e?++t:void 0},0))/t.length).toFixed(0)+"%",(t=document.createElement("span")).textContent=e,t.style.display="inline-block",t.style.width=35,this.el.appendChild(t)),this.g.vis.get("metaIdentity")&&(t=this.g.stats.identity()[this.model.id],n=document.createElement("span"),this.model.get("ref")&&this.g.config.get("hasRef")?n.textContent="ref.":null!=t&&(n.textContent=t.toFixed(2)),n.style.display="inline-block",n.style.width=40,this.el.appendChild(n)),this.g.vis.get("metaLinks")&&this.model.attributes.ids){var n=i.seqs.buildLinks(this.model.attributes.ids);if(0<Object.keys(n).length){var r=new s.default({name:"↗"});console.log(Object.keys(n)),n.forEach(function(e,t){return r.addNode(t,function(t){return window.open(e)})});n=r.buildDOM();return n.style.cursor="pointer",this.el.appendChild(n)}}},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousein:function(t){return this.g.trigger("meta:mousein",{seqId:this.model.get("id",{evt:t})})},_onmouseout:function(t){return this.g.trigger("meta:mouseout",{seqId:this.model.get("id",{evt:t})})}});e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.version=e.xhr=e.seqs=e.parser=e.newick=e.matrix=e.gff=e.fasta=e.clustal=void 0;var r=c(n(68)),i=c(n(76)),o=c(n(78)),s=c(n(81)),a=c(n(82)),u=c(n(69)),l=c(n(75));function c(t){return t&&t.__esModule?t:{default:t}}e.clustal=r.default,e.fasta=i.default,e.gff=o.default,e.matrix=s.default,e.newick=a.default,e.parser=u.default,e.seqs=l.default;n=n(70);e.xhr=n;n="imported";"undefined"!=typeof IO_VERSION&&(n=IO_VERSION);e.version=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(69)),c=i(n(75));function i(t){return t&&t.__esModule?t:{default:t}}n=void 0;e.default=n={parse:function(t){var e,n=[];if(!1===(e="[object Array]"===Object.prototype.toString.call(t)?t:t.split("\n"))[0].slice(0,6))throw new Error("Invalid CLUSTAL Header");for(var r=0,i=1,o=0;r<e.length;){var s,a,u,l=e[++r];null!=l&&0!==l.length?0!==l.trim().length?c.default.contains(l,"*")||(1===i&&(i=o=0),null!=(u=/^(?:\s*)(\S+)(?:\s+)(\S+)(?:\s*)(\d*)(?:\s*|$)/g.exec(l))?(a=u[1].trim(),s=u[2].trim(),o>=n.length?(a=(u=c.default.getMeta(a.trim())).name,(a=new c.default.model(s,a,o)).ids=u.ids||{},a.details=u.details||{},0<(u=Object.keys(a.ids)).length&&(a.id=a.ids[u[0]]),n.push(a)):n[o].seq+=s,o++):console.log("parse error",l)):i=1:i=1}return n=n.filter(function(t){return-1===t.seq.search(/[:.*]/i)&&-1===t.name.search(/[:.*]/i)})}},r.default.mixin(n)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=n(70),s={};(e.default=s).read=function(t,i){var r,e=(r=this,function(t,e,n){return s._onRetrieval(t,n,i,r)});return void 0===i?new Promise(function(n,r){i=function(t,e){t?r(t):n(e)},o(t,e)}):o(t,e)},s._onRetrieval=function(t,e,n,r){var i=void 0;return void 0!==t&&(i=r.parse(e)),n.call(r,t,i)},s.extend=function(t,e){return extend(s,t,e)},s.mixin=function(e){return"object"!==(void 0===e?"undefined":r(e))&&(e=e.prototype),["read"].forEach(function(t){e[t]=s[t]},this),e}},function(t,e,n){"use strict";var r=n(71),i=n(72),v=n(73),o=n(74);function s(t,e,n){var r=t;return i(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=o(e,{uri:t}),r.callback=n,r}function _(t,e,n){return a(e=s(t,e,n))}function a(r){if(void 0===r.callback)throw new Error("callback argument missing");var i=!1,o=function(t,e,n){i||(i=!0,r.callback(t,e,n))};function s(){var t=void 0,t=l.response||l.responseText||function(t){try{if("document"===t.responseType)return t.responseXML;var e=t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;if(""===t.responseType&&!e)return t.responseXML}catch(t){}return null}(l);if(p)try{t=JSON.parse(t)}catch(t){}return t}function e(t){return clearTimeout(u),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,o(t,m)}function t(){if(!a){var t;clearTimeout(u),t=r.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var e=m,n=null;return 0!==t?(e={body:s(),statusCode:t,method:h,headers:{},url:c,rawRequest:l},l.getAllResponseHeaders&&(e.headers=v(l.getAllResponseHeaders()))):n=new Error("Internal XMLHttpRequest Error"),o(n,e,e.body)}}var n,a,u,l=r.xhr||null,c=(l=l||new(r.cors||r.useXDR?_.XDomainRequest:_.XMLHttpRequest)).url=r.uri||r.url,h=l.method=r.method||"GET",f=r.body||r.data,d=l.headers=r.headers||{},g=!!r.sync,p=!1,m={body:void 0,headers:{},statusCode:0,method:h,url:c,rawRequest:l};if("json"in r&&!1!==r.json&&(p=!0,d.accept||d.Accept||(d.Accept="application/json"),"GET"!==h&&"HEAD"!==h&&(d["content-type"]||d["Content-Type"]||(d["Content-Type"]="application/json"),f=JSON.stringify(!0===r.json?f:r.json))),l.onreadystatechange=function(){4===l.readyState&&setTimeout(t,0)},l.onload=t,l.onerror=e,l.onprogress=function(){},l.onabort=function(){a=!0},l.ontimeout=e,l.open(h,c,!g,r.username,r.password),g||(l.withCredentials=!!r.withCredentials),!g&&0<r.timeout&&(u=setTimeout(function(){var t;a||(a=!0,l.abort("timeout"),(t=new Error("XMLHttpRequest timeout")).code="ETIMEDOUT",e(t))},r.timeout)),l.setRequestHeader)for(n in d)d.hasOwnProperty(n)&&l.setRequestHeader(n,d[n]);else if(r.headers&&!function(t){for(var e in t)if(t.hasOwnProperty(e))return;return 1}(r.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in r&&(l.responseType=r.responseType),"beforeSend"in r&&"function"==typeof r.beforeSend&&r.beforeSend(l),l.send(f||null),l}t.exports=_,(t.exports.default=_).XMLHttpRequest=r.XMLHttpRequest||function(){},_.XDomainRequest="withCredentials"in new _.XMLHttpRequest?_.XMLHttpRequest:r.XDomainRequest,function(t,e){for(var n=0;n<t.length;n++)e(t[n])}(["get","put","post","patch","head","delete"],function(r){_["delete"===r?"del":r]=function(t,e,n){return(e=s(t,e,n)).method=r.toUpperCase(),a(e)}})},function(e,t){(function(t){"use strict";t="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{};e.exports=t}).call(t,function(){return this}())},function(t,e){"use strict";t.exports=function(t){if(!t)return!1;var e=n.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)};var n=Object.prototype.toString},function(t,e){"use strict";function a(t){return t.replace(/^\s+|\s+$/g,"")}t.exports=function(t){if(!t)return{};for(var e={},n=a(t).split("\n"),r=0;r<n.length;r++){var i=n[r],o=i.indexOf(":"),s=a(i.slice(0,o)).toLowerCase(),i=a(i.slice(o+1));void 0===e[s]?e[s]=i:(o=e[s],"[object Array]"===Object.prototype.toString.call(o)?e[s].push(i):e[s]=[e[s],i])}return e}},function(t,e){"use strict";t.exports=function(){for(var t={},e=0;e<arguments.length;e++){var n,r=arguments[e];for(n in r)i.call(r,n)&&(t[n]=r[n])}return t};var i=Object.prototype.hasOwnProperty},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={};(e.default=n).getMeta=function(t){var n,r,i,e=!1,o=!1,s={},a={},u=t.split(" ");if(1<=u.length?(e=u.shift(),o=u.join(" ")):e=t,e){var l=e.split("|"),c=l.pop();for(a.en=c;0!=l.length;){var h=l.shift(),f=l.shift();s[h]=f}}else c=e;o&&(1<(o=o.split("=")).length?(o.length,o.forEach(function(t){var e=(t=t.trim()).split(" "),e=1<e.length?(i=e.pop(),e.join(" ")):t;r?(t=r.toLowerCase(),a[t]=e):n=e,r=i})):n=o.shift());c={name:c,ids:s,details:a};return n&&(c.desc=n),c};var i={sp:{link:"http://www.uniprot.org/%s",name:"Uniprot"},tr:{link:"http://www.uniprot.org/%s",name:"Trembl"},gb:{link:"http://www.ncbi.nlm.nih.gov/nuccore/%s",name:"Genbank"},pdb:{link:"http://www.rcsb.org/pdb/explore/explore.do?structureId=%s",name:"PDB"}};n.buildLinks=function(n){var r={};return n=n||{},Object.keys(n).forEach(function(t){var e;t in i&&(t=(e=i[t]).link.replace("%s",n[t]),r[e.name]=t)}),r},n.contains=function(t,e){return-1!=="".indexOf.call(t,e,0)},n.splitNChars=function(t,e){e=e||80;for(var n=[],r=0,i=t.length-1;r<=i;r+=e)n.push(t.substr(r,e));return n},n.reverse=function(t){return t.split("").reverse().join("")},n.complement=function(t){var e,n=t+"",r=[[/g/g,"0"],[/c/g,"1"],[/0/g,"c"],[/1/g,"g"],[/G/g,"0"],[/C/g,"1"],[/0/g,"C"],[/1/g,"G"],[/a/g,"0"],[/t/g,"1"],[/0/g,"t"],[/1/g,"a"],[/A/g,"0"],[/T/g,"1"],[/0/g,"T"],[/1/g,"A"]];for(e in r)n=n.replace(r[e][0],r[e][1]);return n},n.reverseComplement=function(t){return n.reverse(n.complement(t))},n.model=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.ids={}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(75)),r=i(n(77)),n=i(n(69));function i(t){return t&&t.__esModule?t:{default:t}}var u=void 0;e.default=u={getMeta:a.default.getMeta,extend:function(t){var e=(0,r.default)(u);return u.getMeta=t,e},parse:function(t){var e=[];if(!t||0===t.length)return[];"[object Array]"!==Object.prototype.toString.call(t)&&(t=t.split("\n"));for(var n=u.getMeta,r=0;r<t.length;r++){var i,o,s=t[r];">"===s[0]||";"===s[0]?((i=n(s.slice(1).trim().trim())).name,o=i.id||e.length,(o=new a.default.model("",i.name,o)).ids=i.ids||{},o.details=i.details||{},e.push(o)):o.seq+=s}return e},write:function(t,e){for(var n="",r=0;r<t.length;r++){var i=t[r];null!=e&&(i=e(i)),n+=">"+i.name+"\n",n+=a.default.splitNChars(i.seq,80).join("\n"),n+="\n"}return n}},n.default.mixin(u)},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){t=t||{};for(var e=function(t,e,n){for(var r=[],i=t<e,o=n?i?e+1:e-1:e,s=t;i?s<o:o<s;i?s++:s--)r.push(s);return r}(0,arguments.length,!1),n=0;n<e.length;n++){var r=e[n];if(arguments[r])for(var i=0;i<arguments[r].length;i++){var o=arguments[r][i];arguments[r].hasOwnProperty(o)&&(t[o]=arguments[r][o])}}return t}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(69)),i=o(n(79)),a=o(n(80));function o(t){return t&&t.__esModule?t:{default:t}}function u(){}r.default.mixin(u),(e.default=u).parseLines=function(t){var e=t.split("\n"),n={},r=[];n.type=u._guessType(e);var i=0;"jalview"===n.type&&(i=(t=a.default.readHeader(e)).offset,n.colors=t.colors,r=t.features);for(var o=i;o<e.length;o++){var s=e[o];0!==s.length&&"#"!==s[0]&&void 0!==(s=u.parseLine(s))&&r.push(s)}return{features:r,config:n}},u._guessType=function(t){return"##gff-version 3"!==t[0].substring(0,15)&&t[0].indexOf("#")<0&&2===t[0].split("\t").length?"jalview":"gff3"},u.parseSeqs=u.parse=function(t){var t=u.parseLines(t),n={};return t.features.forEach(function(t){var e=t.seqname;void 0===n[e]&&(n[e]=[]),delete t.seqname,n[e].push(t)}),delete t.features,t.seqs=n,t},u.parseLine=function(t){var e={},t=t.split(/\s+/);if(1!==t.length){e.seqname=t[0],e.source=t[1],e.feature=t[2],e.start=parseInt(t[3]),e.end=parseInt(t[4]),e.score=t[5],e.strand=t[6],e.frame=t[7];t=t.slice(8).join(" ");return Object.keys(e).forEach(function(t){"string"==typeof e[t]&&(e[t]=e[t].trim()),"."===e[t]&&(e[t]=void 0)}),e.score&&(e.score=parseFloat(e.score)),e.frame&&(e.frame=parseInt(e.frame)),e.attributes=i.default.extractKeys(t),e}},u.exportLine=function(e){var t=Object.keys(e.attributes).map(function(t){return t+"="+e.attributes[t]}).join(";");return[e.seqname,e.source,e.feature,e.start,e.end,e.score,e.strand,e.frame,t].map(function(t){return void 0===t?".":t}).join("\t")},u.exportLines=function(t){return"##gff-version 3\n"+t.map(u.exportLine).join("\n")},u.exportSeqs=u.export=function(t){function e(t){t.seqname=n,r.push(t)}var n,r=[];for(n in t)t[n].forEach(e);return u.exportLines(r)},u.utils=i.default},function(t,e){"use strict";function n(t){var i={};return t.split(";").forEach(function(t){var e,n,r;0<t.indexOf("=")?(n=(e=t.split("="))[0],r=e[1],i[n]=r):0<t.indexOf(" ")&&(n=(e=t.split(" "))[0],r=e[1].replace(/"/g,""),i[n]=r)}),i}function r(t){t=t.toString(16);return 1===t.length?"0"+t:t}function i(t,e,n){return 3===t.length?i(t[0],t[1],t[2]):"#"+r(t)+r(e)+r(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.extractKeys=n,e.rgbToHex=i,e.default={extractKeys:n,rgbToHex:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(79),a={};(e.default=a).readHeader=function(t){for(var e,n={},r=0,i=[];r<t.length;r++){var o=t[r];if(0<=o.indexOf("#"))break;var s=o.split(/\t/),o=s[0].trim();if("GFF"===o)break;2===s.length?"startgroup"===o?e=s[1].trim():"endgroup"!==o?n[s[0]]=a.parseColor(s[1]):e="":5<=s.length&&(s=a.parseLine(s),e&&(s.attributes.Parent=e),i.push(s))}return{offset:r,colors:n,features:i}},a.parseColor=function(t){return 0<=t.indexOf(",")?(0,r.rgbToHex)(t.split(",").map(function(t){return parseInt(t)})):6===t.length&&parseInt(t.charAt(0),16)<=16&&"bisque"!==t?"#"+t:t},a.parseLine=function(t){var e={attributes:{}};return e.attributes.Name=t[0].trim(),e.seqname=t[1].trim(),e.start=parseInt(t[3]),e.end=parseInt(t[4]),e.feature=t[5].trim(),"ID_NOT_SPECIFIED"===e.seqname&&(e.seqname=t[2].trim()),e}},function(t,e,n){"use strict";var r,i=n(69),n=(r=i)&&r.__esModule?r:{default:r};function o(t){return this.constructor!=o?new o(t):(this.matrix={},this.parsingOrder=[],null!=t&&this.parse(t),this)}n.default.mixin(o),(t.exports=o).prototype.parse=function(t){return t.split("\n").forEach(function(t){this.parseLine(t)}.bind(this)),this.buildMatrix(),this.matrix},o.read=function(t,e){return(new o).read(t,e)},o.parse=function(t){return(new o).parse(t)},o.prototype.parseLine=function(t){var e=t.charAt(0);if("#"!==e){this.parsingOrder.push(e);for(var n=t.substring(1).split(/\s+/).filter(function(t){return 0<t.length}).map(function(t){return parseInt(t)}),r={},i=0;i<n.length;i++)r[this.parsingOrder[i]]=n[i];this.matrix[e]=r}},o.prototype.export=function(){return o.export(this.matrix)},o.export=function(t){var e,n=[],r=1;for(e in"matrix"in t&&(t=t.matrix),t){for(var i=e,o=Object.keys(t[e]),s=0;s<r;s++)i+="\t"+t[e][o[s]];n.push(i),r++}return n.join("\n")},o.prototype.buildMatrix=function(){for(var t=this.parsingOrder.length-1;0<=t;t--){var e,n=this.parsingOrder[t],r=this.matrix[n];for(e in r)this.matrix[e][n]=r[e]}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseNhx=e.parse=void 0;var r=o(n(83)),i=o(n(84));function o(t){return t&&t.__esModule?t:{default:t}}n={};n.parse=r.default,n.parseNhx=i.default,e.default=n,e.parse=r.default,e.parseNhx=i.default},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){for(var e=[],n={},r=t.split(/\s*(;|\(|\)|,|:)\s*/),i=0;i<r.length;i++){var o=r[i],s=void 0;switch(o){case"(":s={},n.children=[s],e.push(n),n=s;break;case",":s={},e[e.length-1].children.push(s),n=s;break;case")":n=e.pop();break;case":":break;default:var a=r[i-1];")"==a||"("==a||","==a?n.name=o:":"==a&&(n.branch_length=parseFloat(o))}}return n}},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){for(var e=[],n={},r=t.split(/\s*(;|\(|\)|\[|\]|,|:|=)\s*/),i=0;i<r.length;i++){var o=r[i],s=void 0;switch(o){case"(":s={},n.children=[s],e.push(n),n=s;break;case",":s={},e[e.length-1].children.push(s),n=s;break;case")":n=e.pop();break;case":":break;default:var a=r[i-1];if(")"==a||"("==a||","==a)n.name=o;else if(":"==a){void 0===o||u(o);isNaN(o)||(n.branch_length=parseFloat(o))}else if("="==a)switch(r[i-2]){case"D":n.duplication=o;break;case"G":n.gene_id=o;break;case"T":n.taxon_id=o}}}return n}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(86),o=(r=i)&&r.__esModule?r:{default:r};n=o.default.extend({buildDOM:function(){return this.on("new:node",this.buildNode),this.on("new:button",this.buildButton),this.on("new:menu",this.buildMenu),o.default.prototype.buildDOM.call(this)},buildNode:function(t){if(null!=this.g)return t.style.lineHeight=this.g.menuconfig.get("menuItemLineHeight")},buildButton:function(t){if(null!=this.g)return t.style.fontSize=this.g.menuconfig.get("menuFontsize"),t.style.marginLeft=this.g.menuconfig.get("menuMarginLeft"),t.style.padding=this.g.menuconfig.get("menuPadding")},buildMenu:function(t){if(null!=this.g)return t.style.fontSize=this.g.menuconfig.get("menuItemFontsize")}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g=n(15),n=n(14).extend({initialize:function(t){this._nodes=[],this.name=t.name||"",this.el.className+="smenubar"},render:function(){for(var t=this.el.firstChild;t;)this.el.removeChild(t),t=this.el.firstChild;this.el.appendChild(this.buildDOM())},setName:function(t){this.name=t},addNode:function(t,e,n){var r=void 0;null!=n&&(r=n.style),null==this._nodes&&(this._nodes=[]),this._nodes.push({label:t,callback:e,style:r})},getNode:function(e){var n=void 0;return this._nodes.forEach(function(t){t.label===e&&(n=t)}),n},modifyNode:function(t,e,n){t=this.getNode(t);t.callback=e||t.callback,n=n||{},t.style=n.style||t.style},renameNode:function(t,e){t=this.getNode(t);t.label=e||t.label},removeNode:function(t){t=this.getNode(t);this._nodes.splice(this._nodes.indexOf(t),1)},removeAllNodes:function(){this._nodes=[]},buildDOM:function(){var t=document.createElement("span");return t.appendChild(this._buildM({nodes:this._nodes,name:this.name})),t},_buildM:function(t){var e,n,r,i=void 0,o=void 0,s=void 0,a=void 0,u=t.nodes,t=t.name,l=document.createElement("div");l.className="smenu-dropdown smenu-dropdown-tip",l.style.display="none";var c=document.createElement("ul");c.className="smenu-dropdown-menu";for(var h,f=0,d=u.length;f<d;f++){for(s in e=u[f],(a=document.createElement("li")).textContent=e.label,r=e.style)n=r[s],a.style[s]=n;a.addEventListener("click",e.callback),this.trigger("new:node",a),c.appendChild(a)}return this.trigger("new:menu",c),l.appendChild(c),(i=document.createElement("a")).textContent=t,i.className="smenubar_alink",this.trigger("new:button",i),g(i).on("click",(h=this,function(t){return h._showMenu(t,l,i),window.setTimeout(function(){return g(document.body).one("click",function(t){return l.style.display="none"})},5)})),(o=document.createDocumentFragment()).appendChild(l),o.appendChild(i),o},_showMenu:function(t,e,n){e.style.display="block",e.style.position="absolute",n.getBoundingClientRect()}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(88)),i=o(n(89));function o(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){var e=this;return this.g=t.g,this.draw(),this.listenTo(this.g.vis,"change:labels change:metacell change:leftHeader",function(){return e.draw(),e.render()})},draw:function(){this.removeViews(),this.g.vis.get("leftHeader")&&(this.g.vis.get("labels")||this.g.vis.get("metacell"))&&((t=new r.default({model:this.model,g:this.g})).ordering=-50,this.addView("lHeader",t));var t=new i.default({model:this.model,g:this.g});return t.ordering=0,this.addView("rHeader",t)},render:function(){return this.renderSubviews(),this.el.className="biojs_msa_header"}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(44),i=n(14),o=n(65),i=i.extend({className:"biojs_msa_headers",initialize:function(t){return this.g=t.g,this.listenTo(this.g.vis,"change:metacell change:labels",this.render),this.listenTo(this.g.zoomer,"change:labelWidth change:metaWidth",this.render)},render:function(){o.removeAllChilds(this.el);var t=0;return t+=this.g.zoomer.getLeftBlockWidth(),this.el.style.width=t+"px",this.g.vis.get("labels")&&this.el.appendChild(this.labelDOM()),this.g.vis.get("metacell")&&this.el.appendChild(this.metaDOM()),this.el.style.display="inline-block",this.el.style.fontSize=this.g.zoomer.get("markerFontsize"),this},labelDOM:function(){var t,e=r.mk("div");return e.style.width=this.g.zoomer.getLabelWidth(),e.style.display="inline-block",this.g.vis.get("labelCheckbox")&&e.appendChild(this.addEl(".",10)),this.g.vis.get("labelId")&&e.appendChild(this.addEl("ID",this.g.zoomer.get("labelIdLength"))),this.g.vis.get("labelPartition")&&e.appendChild(this.addEl("part",15)),this.g.vis.get("labelName")&&(t=this.addEl("Label"),e.appendChild(t)),e},addEl:function(t,e){var n=document.createElement("span");return n.textContent=t,null!=e&&(n.style.width=e+"px"),n.style.display="inline-block",n},metaDOM:function(){var t=r.mk("div");return t.style.width=this.g.zoomer.getMetaWidth(),t.style.display="inline-block",this.g.vis.get("metaGaps")&&t.appendChild(this.addEl("Gaps",this.g.zoomer.get("metaGapWidth"))),this.g.vis.get("metaIdentity")&&t.appendChild(this.addEl("Ident",this.g.zoomer.get("metaIdentWidth"))),t}});e.default=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(n(90)),i=a(n(92)),o=a(n(93)),s=a(n(109));function a(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){return this.g=t.g,this.blockEvents=!1,this.listenTo(this.g.vis,"change:header",function(){return this.draw(),this.render()}),this.listenTo(this.g.vis,"change",this._setSpacer),this.listenTo(this.g.zoomer,"change:alignmentWidth",this._setWidth),this.listenTo(this.g.zoomer,"change:_alignmentScrollLeft",this._adjustScrollingLeft),this.listenTo(this.g.columns,"change:hidden",function(){return this.draw(),this.render()}),this.draw(),this.g.vis.once("change:loaded",this._adjustScrollingLeft,this)},events:{scroll:"_sendScrollEvent"},draw:function(){var t;if(this.removeViews(),this.g.vis.get("conserv")&&((t=new i.default({model:this.model,g:this.g})).ordering=-20,this.addView("conserv",t)),this.g.vis.get("markers")&&((t=new r.default({model:this.model,g:this.g})).ordering=-10,this.addView("marker",t)),this.g.vis.get("seqlogo")&&((e=new o.default({model:this.model,g:this.g})).ordering=-30,this.addView("seqlogo",e)),this.g.vis.get("gapHeader")){var e=new s.default({model:this.model,g:this.g});return e.ordering=-25,this.addView("gapview",e)}},render:function(){return this.renderSubviews(),this._setSpacer(),this.el.className="biojs_msa_rheader",this.el.style.overflowX="auto",this.el.style.display="inline-block",this._setWidth(),this._adjustScrollingLeft(),this},_sendScrollEvent:function(){return this.blockEvents||this.g.zoomer.set("_alignmentScrollLeft",this.el.scrollLeft,{origin:"header"}),this.blockEvents=!1},_adjustScrollingLeft:function(t,e,n){if(null==(null!=n?n.origin:void 0)||"header"!==n.origin){n=this.g.zoomer.get("_alignmentScrollLeft");return this.blockEvents=!0,this.el.scrollLeft=n}},_setSpacer:function(){return this.el.style.marginLeft=this._getLabelWidth()+"px"},_getLabelWidth:function(){var t=0;return this.g.vis.get("leftHeader")||(t+=this.g.zoomer.getLeftBlockWidth()),t},_setWidth:function(){return this.el.style.width=this.g.zoomer.getAlignmentWidth()+"px"}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(91));var r=n(14),l=n(65),f=n(15),r=r.extend({className:"biojs_msa_marker",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth change:markerStepSize change:markerFontsize",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.manageEvents()},render:function(){l.removeAllChilds(this.el);var t=this.g.zoomer.get("markerFontsize"),e=this.g.zoomer.get("columnWidth"),n=this.g.zoomer.get("stepSize"),r=this.g.zoomer.get("markerStepSize"),i=this.g.columns.get("hidden");this.el.style.fontSize=t;for(var o,s=document.createElement("span"),a=this.model.getMaxLength(),u=0;u<a;u++)0<=i.indexOf(u)?((o=this.markerHidden(u,n))&&s.appendChild(o),u+=n):((o=document.createElement("span")).className="msa-col-header",o.style.width=e+"px",o.style.display="inline-block",o.textContent=(u+1)%r==0?u+1:(u+1)%n==0?".":" ",o.rowPos=u,s.appendChild(o));return this.el.appendChild(s),this},markerHidden:function(t,e){for(var n=this,r=this.g.columns.get("hidden").slice(0),i=!0,o=Math.max(0,t-e);o<=t;o++)i&=0<=r.indexOf(o);if(!i){for(var s=this.model.getMaxLength(),a=0,u=-1,l=t;l<=s&&(0<=u||(u=r.indexOf(l)),0<=r.indexOf(l));l++)a++;var c=h.base({height:10,width:10});c.style.position="relative";e=h.polygon({points:"0,0 5,5 10,0",style:"fill:lime;stroke:purple;stroke-width:1"});return f(e).on("click",function(t){return r.splice(u,a),n.g.columns.set("hidden",r)}),c.appendChild(e),c}},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onclick:function(t){var e=t.target.rowPos,n=this.g.zoomer.get("stepSize");return this.g.trigger("column:click",{rowPos:e,stepSize:n,evt:t})},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize");return this.g.trigger("column:mousein",{rowPos:e,stepSize:n,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos),n=this.g.zoomer.get("stepSize");return this.g.trigger("column:mouseout",{rowPos:e,stepSize:n,evt:t})}});e.default=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function n(t,e){for(var n in e){var r=e[n];t.setAttributeNS(null,n,r)}return t}var r="http://www.w3.org/2000/svg";e.base=function(t){var e=document.createElementNS(r,"svg");return e.setAttribute("width",t.width),e.setAttribute("height",t.height),e},e.line=function(t){var e=document.createElementNS(r,"line");return n(e,t)},e.rect=function(t){var e=document.createElementNS(r,"rect");return n(e,t)},e.polygon=function(t){var e=document.createElementNS(r,"polygon");return n(e,t)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(91));var r=n(14),y=n(65),r=r.extend({className:"biojs_msa_conserv",initialize:function(t){this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.g.stats,"reset",this.render);t=_.extend({},{fillColor:["#660","#ff0"],strokeColor:"#330",maxHeight:20,rectStyler:function(t,e){return t}},this.g.conservationConfig);return this.fillColor=t.fillColor,this.strokeColor=t.strokeColor,this.maxHeight=t.maxHeight,this.rectStyler=t.rectStyler,this.manageEvents()},colorer:function(e){var t,n,r,i=function(){return"none"};return"string"==typeof e?i=function(){return e}:Array.isArray(e)?(2!=e.length&&console.error("ERROR: colorRange array should have exactly two elements",e),t="undefined"!=typeof d3&&!!d3.scale,n="undefined"!=typeof d3_scale,i=t||n?(r=(t?d3.scale.linear():d3_scale.scaleLinear()).domain([0,this.maxHeight]).range(e),function(t){return r(t.height)}):(console.warn("providing a [min/max] range as input requires d3 to be included - only using the first color"),function(t){return e[0]})):console.warn("expected colorRange to be '#rgb' or ['#rgb', '#rgb']",e,"("+(void 0===e?"undefined":o(e))+")"),i},render:function(){var t=this.g.stats.scale(this.g.stats.conservation());y.removeAllChilds(this.el);var e=this.model.getMaxLength(),n=this.g.zoomer.get("columnWidth"),r=this.maxHeight,i=n*(e-this.g.columns.get("hidden").length),o=b.base({height:r,width:i});o.style.display="inline-block",o.style.cursor="pointer";this.rectData;for(var s=this.colorer(this.fillColor),a=this.colorer(this.strokeColor),u=this.rectStyler,l=this.g.zoomer.get("stepSize"),c=this.g.columns.get("hidden"),h=0,f=0;f<e;)if(0<=c.indexOf(f))f+=l;else{i=n*l;for(var d=0,g=l-1,p=0;0<g?p<=g:g<=p;0<g?p++:p--)d+=t[f];var m=r*(d/l),v={x:h,y:r-m,maxheight:r,width:i-n/4,height:m,rowPos:f},m=b.rect(v);m.style.stroke=a(v),m.style.fill=s(v),"function"==typeof u&&u(m,v),m.rowPos=f,o.appendChild(m),h+=i,f+=l}return this.el.appendChild(o),this},_onclick:function(r){var i=this,o=r.target.rowPos,s=this.g.zoomer.get("stepSize");return function(){for(var t=[],e=s-1,n=0;0<e?n<=e:e<=n;0<e?n++:n--)t.push(i.g.trigger("bar:click",{rowPos:o+n,evt:r}));return t}()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("bar:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("bar:mouseout",{rowPos:e,evt:t})}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(94),i=n(14),o=n(65),i=i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:alignmentWidth",this.render),this.listenTo(this.g.colorscheme,"change",function(){var t=this.g.colorscheme.getSelectedScheme();return this.seqlogo.changeColors(t),this.render()}),this.listenTo(this.g.zoomer,"change:columnWidth",function(){return this.seqlogo.column_width=this.g.zoomer.get("columnWidth"),this.render()}),this.listenTo(this.g.stats,"reset",function(){return this.draw(),this.render()}),this.draw()},draw:function(){o.removeAllChilds(this.el),console.log("redraw seqlogo");var t=this.g.stats.conservResidue({scaled:!0}),e={alphabet:"aa",heightArr:t=_.map(t,function(t){return _.pick(t,function(t,e){return"-"!==e})})},t=this.g.colorscheme.getSelectedScheme();return this.seqlogo=new r({model:this.model,g:this.g,data:e,yaxis:!1,scroller:!1,xaxis:!1,height:100,column_width:this.g.zoomer.get("columnWidth"),positionMarker:!1,zoom:1,el:this.el,colors:t})},render:function(){return this.seqlogo.render()}});e.default=i},function(t,e,n){"use strict";t.exports=n(95)},function(t,e,n){"use strict";_=n(11);var r=n(96),i=n(97),o=n(103),s=n(14),a=n(104),u=n(105),l=n(106),c=n(15);t.exports=s.extend({options:{xaxis:!0,yaxis:!0,height:300,column_width:34,debug:!0,scale_height_enabled:!0,scaled_max:!0,zoom_buttons:!0,colorscheme:"default",data:void 0,start:1,end:void 0,zoom:.4,colors:void 0,divider:!1,show_probs:!1,divider_step:5,show_divider:!1,border:!1,settings:!1,scroller:!0,positionMarker:!0},loadDefault:function(t){this.data=t.data,this.display_ali_map=0,this.alphabet=t.data.alphabet||"dna",this.start=t.start,this.zoom=parseFloat(t.zoom)||.4,this.default_zoom=this.zoom,this.column_width=t.column_width,this.height=t.height,this.canvas_width=5e3,this.scale_height_enabled=t.scale_height_enabled,this.scrollme=null,this.previous_target=0,this.rendered=[],this.previous_zoom=0,null==this.data.max_height&&(this.data.max_height=this.calcMaxHeight(this.data.heightArr)),this.data.insert_probs&&this.data.delete_probs||(this.options.show_probs=!1),t.scaled_max?this.data.max_height=t.data.max_height_obs||this.data.max_height||2:this.data.max_height=t.data.max_height_theory||this.data.max_height||2,t.colors?this.changeColors(t.colors):"aa"===this.alphabet?(this.aa_colors=n(107),this.changeColors(this.aa_colors)):(this.dna_colors=n(108),this.changeColors(this.dna_colors))},initialize:function(t){r()?(null==t.data&&(this.el.textContent="No data added."),_.extend(this.options,t),t=this.options,this.loadDefault(t),this.options.show_probs?this.data.processing&&/^observed|weighted/.test(this.data.processing)?(this.show_inserts=0,this.info_content_height=this.height-14):(this.show_inserts=1,this.info_content_height=this.height-44):this.info_content_height=this.height,this.$el=c(this.el),this.initDivs(),this.options.settings&&(t=l(this,t),this.$el.append(t)),u(this.$el,this,this.logo_graphic)):this.el.textContent="Your browser doesn't support canvas."},initDivs:function(){var t=h("div");t.className="logo_graphic",this.logo_graphic=c(t);var e=h("div");e.className="logo_container",e.style.height=this.height,this.container=c(e),this.container.append(t),this.$el.append(e),this.options.divider&&((e=h("div")).className="logo_divider",this.$el.append(e)),this.dom_element=c(t),this.called_on=this.$el,this.options.xaxis&&a.render_x_axis_label.call(this),this.options.yaxis?a.render_y_axis_label.call(this):this.container[0].style.marginLeft="0px"},render:function(){return i.call(this),this},changeColors:function(t){null!=(this.colors=t)&&null!=t.type&&(this.colorscheme="dynamic"),this.buildAlphabet()},buildAlphabet:function(){this.letters={};var t,e,n,r=this.colors;for(e in"dynamic"==this.colorscheme&&(t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),r={},t.forEach(function(t){r[t]=""})),r)r.hasOwnProperty(e)&&(n={color:r[e]},this.letters[e]=new o(e,n))},toggleColorscheme:function(t){var e=this.currentColumn();t?this.colorscheme="default"===t?"default":"consensus":"default"===this.colorscheme?this.colorscheme="consensus":this.colorscheme="default",this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleScale:function(t){var e=this.currentColumn();t?this.data.max_height="obs"===t?this.data.max_height_obs:this.data.max_height_theory:this.data.max_height===this.data.max_height_obs?this.data.max_height=this.data.max_height_theory:this.data.max_height=this.data.max_height_obs,this.rendered=[],this.logoYAxis&&this.logoYAxis.remove(),a.render_y_axis_label.call(this),this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},toggleAliMap:function(t){var e=this.currentColumn();t?this.display_ali_map="model"===t?0:1:1===this.display_ali_map?this.display_ali_map=0:this.display_ali_map=1,a.render_x_axis_label(this),this.rendered=[],this.scrollme.reflow(),this.scrollToColumn(e+1),this.scrollToColumn(e)},currentColumn:function(){var t=this.scrollme.scroller.getValues().left,e=this.column_width*this.zoom,t=t/e,e=this.container.width()/e/2;return Math.ceil(t+e)},changeZoom:function(t){var e,n=.3;return t.target?n=t.target:t.distance&&(n=(parseFloat(this.zoom)-parseFloat(t.distance)).toFixed(1),"+"===t.direction&&(n=(parseFloat(this.zoom)+parseFloat(t.distance)).toFixed(1))),1<n?n=1:n<.1&&(n=.1),this.logo_graphic.width()*n/this.zoom>this.container.width()&&(t.column?(this.zoom=n,this.render({zoom:this.zoom}),this.scrollme.reflow(),e=this.coordinatesFromColumn(t.column),this.scrollme.scroller.scrollTo(e-t.offset)):(t=this.currentColumn(),this.zoom=n,this.render({zoom:this.zoom}),this.scrollme.reflow(),this.scrollToColumn(t))),this.zoom},columnFromCoordinates:function(t){return Math.ceil(t/(this.column_width*this.zoom))},coordinatesFromColumn:function(t){return(t-1)*(this.column_width*this.zoom)+this.column_width*this.zoom/2},scrollToColumn:function(t,e){var n=this.logo_container.width()/2,t=this.coordinatesFromColumn(t);this.scrollme.scroller.scrollTo(t-n,0,e)},calcMaxHeight:function(t){return t.reduce(function(t,e){var n,r=0;for(n in e)r+=e[n];return t<r?r:t},0)}});var h=function(t){return document.createElement(t)}},function(t,e){"use strict";var n=null;t.exports=function(){var t;return n||(t=document.createElement("canvas"),n=!(!t.getContext||!t.getContext("2d"))),n}},function(t,e,n){"use strict";var g=n(98),p=n(102),m=n(15);t.exports=function(t){if(this.data){var e=(t=t||{}).zoom||this.zoom,n=t.target||1,r=(t.scaled,this.dom_element.parent().attr("width")),i=1,o=null,s=null,a=0;if(this.previous_target=n,t.start&&(this.start=t.start),t.end&&(this.end=t.end),e<=.1?e=.1:1<=e&&(e=1),this.zoom=e,o=this.end||this.data.heightArr.length,s=this.start||1,s=1<(s=(o=(o=o>this.data.heightArr.length?this.data.heightArr.length:o)<s?s:o)<s?o:s)?s:1,this.y=this.height-20,this.max_width=this.column_width*(o-s+1),r>this.max_width&&(e=1,this.zoom_enabled=!1),this.zoom=e,this.zoomed_column=this.column_width*e,this.total_width=this.zoomed_column*(o-s+1),e<1)for(;this.total_width<r&&(this.zoom+=.1,this.zoomed_column=this.column_width*this.zoom,this.total_width=this.zoomed_column*(o-s+1),this.zoom_enabled=!1,!(1<=e)););n>this.total_width&&(n=this.total_width),this.dom_element.attr({width:this.total_width+"px"}).css({width:this.total_width+"px"}),this.canvas_width=this.total_width;var u=Math.ceil(this.total_width/this.canvas_width);for(this.columns_per_canvas=Math.ceil(this.canvas_width/this.zoomed_column),this.previous_zoom!==this.zoom&&(this.dom_element.find("canvas").remove(),this.previous_zoom=this.zoom,this.rendered=[]),this.canvases=[],this.contexts=[],a=0;a<u;a++){var l=this.columns_per_canvas*a+s,c=l+this.columns_per_canvas-1;o<c&&(c=o);var h=(c-l+1)*this.zoomed_column;i<h&&(i=h);var f=i*a,d=f+h;n<d+d/2&&f-f/2<n&&(this.canvases[a]=function(t,e,n,r,i){var o=m(t).find("#canv_"+r);o.length||(m(t).append('<canvas class="canvas_logo" id="canv_'+r+'"  height="'+e+'" width="'+n+'" style="left:'+i*r+'px"></canvas>'),o=m(t).find("#canv_"+r));return m(o).attr("width",n).attr("height",e),o[0]}(this.dom_element,this.height,h,a,i),this.contexts[a]=this.canvases[a].getContext("2d"),this.contexts[a].setTransform(1,0,0,1,0,0),this.contexts[a].clearRect(0,0,h,this.height),this.contexts[a].fillStyle="#ffffff",this.contexts[a].fillRect(0,0,d,this.height),12<this.zoomed_column?(d=10<(d=parseInt(10*e,10))?10:d,this.debug&&p.call(this,l,c,a,1),g.call(this,l,c,a,d)):p.call(this,l,c,a))}!this.scrollme&&this.options.scroller&&(this.scrollme=new EasyScroller(this.dom_element[0],{scrollingX:1,scrollingY:0,eventTarget:this.called_on})),1!==n&&this.scrollme.reflow()}}},function(t,e,n){"use strict";var M=n(99),j=n(100),i=n(101);function E(t,e,n,r,i,o,s,a){t.font=i+"px Arial",t.fillStyle=s,t.fillRect(e,n-10,o,14),t.textAlign="center",t.fillStyle=a,t.fillText(r,e+o/2,n)}function O(t,e){var n=e.ralign?e.x+t.zoomed_column:e.x,r=e.ralign?e.x+2:e.x;j(t.contexts[e.context_num],n,t.height-30,-30-t.height,"#dddddd"),j(t.contexts[e.context_num],n,0,5),i(t.contexts[e.context_num],r,10,t.zoomed_column,e.column_num,e.fontsize,e.ralign)}t.exports=function(t,e,n,r){var i,o,s,a,u,l,c,h,f=0,d=t,g=null,p=0,m=Math.abs(this.data.max_height),v=isNaN(this.data.min_height_obs)?0:parseInt(this.data.min_height_obs,10),v=m+Math.abs(v),v=Math.round(100*Math.abs(this.data.max_height)/v),_=Math.round(this.info_content_height*v/100),v=this.info_content_height-_;this.info_content_height,this.info_content_height;for(e+3<=this.end&&(e+=3),p=t;p<=e;p++){if(this.data.mmline&&1===this.data.mmline[p-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(f,10,this.zoomed_column,this.height-40);else{var b=this.data.heightArr[p-1],y=[];if(b){var x=0,w=(b.length,0),S=null;for(w in b){var k=[w,b[w]],z=f+this.zoomed_column/2,C=null;.01<k[1]&&(C=parseFloat(k[1])/this.data.max_height,k=this.info_content_height-2-x,C=(this.info_content_height-2)*C,y[w]=[C,this.zoomed_column,z,k],x+=C)}for(w in b)y[w]&&this.letters[w]&&(S="dynamic"===this.colorscheme?this.colors.getColor(w,{pos:p-1}):"consensus"===this.colorscheme?this.cmap[p-1][w]||"#7a7a7a":null,this.letters[w].draw(this.contexts[n],y[w][0],y[w][1],y[w][2],y[w][3],S))}}g=this.display_ali_map?this.data.ali_map[p-1]:d,this.options.show_divider&&(this.zoom<.7?p%this.options.divider_step==0&&O(this,{context_num:n,x:f,fontsize:10,column_num:g,ralign:!0}):O(this,{context_num:n,x:f,fontsize:r,column_num:g})),this.options.show_probs&&(s=this.contexts[n],o=this.height,l=this.zoomed_column,u=this.data.delete_probs[p-1],i=this.show_inserts,h=c=a=void 0,a=o-4,c="#ffffff",h="#555555",i&&(a=o-35),u<.75?(c="#2171b5",h="#ffffff"):u<.85?c="#6baed6":u<.95&&(c="#bdd7e7"),E(s,f,a,u,r,l,c,h),j(this.contexts[n],f,this.height-15,5),this.show_inserts&&(o=this.contexts[n],s=f,a=this.height,u=this.zoomed_column,l=this.data.insert_probs[p-1],h=c=void 0,c="#ffffff",h="#555555",.1<l?(c="#d7301f",h="#ffffff"):.05<l?c="#fc8d59":.03<l&&(c="#fdcc8a"),E(o,s,a-20,l,r,u,c,h),.03<l&&j(o,s+u,a-30,-30-a,c),l=this.contexts[n],o=this.height-5,s=this.zoomed_column,u=this.data.insert_lengths[p-1],c=a=void 0,a="#ffffff",c="#555555",9<u?(a="#d7301f",c="#ffffff"):7<u?a="#fc8d59":4<u&&(a="#fdcc8a"),E(l,f,o,u,r,s,a,c),j(this.contexts[n],f,this.height-45,5),j(this.contexts[n],f,this.height-30,5))),f+=this.zoomed_column,d++}this.options.show_probs&&(this.show_inserts&&(M(this.contexts[n],this.height-30,this.total_width),M(this.contexts[n],this.height-45,this.total_width)),M(this.contexts[n],this.height-15,this.total_width)),this.options.border&&M(this.contexts[n],0,this.total_width)}},function(t,e){"use strict";t.exports=function(t,e,n){t.beginPath(),t.moveTo(0,e),t.lineTo(n,e),t.lineWidth=1,t.strokeStyle="#999999",t.stroke()}},function(t,e){"use strict";t.exports=function(t,e,n,r,i){i=i||"#999999",t.beginPath(),t.moveTo(e,n),t.lineTo(e,n+r),t.lineWidth=1,t.strokeStyle=i,t.stroke()}},function(t,e){"use strict";t.exports=function(t,e,n,r,i,o,s){t.font=o+"px Arial",t.textAlign=s?"right":"center",t.fillStyle="#666666",t.fillText(i,e+r/2,n)}},function(t,e,n){"use strict";var j=n(99),E=n(100),O=n(101);t.exports=function(t,e,n,r){for(var i,o,s,a,u,l,c,h,f,d=0,g=t,p=null,m=0,v=Math.abs(this.data.max_height)+Math.abs(this.data.min_height_obs),v=Math.round(100*Math.abs(this.data.max_height)/v),_=Math.round(this.info_content_height*v/100),b=(this.info_content_height,10),m=t;m<=e;m++){if(this.data.mmline&&1===this.data.mmline[m-1])this.contexts[n].fillStyle="#cccccc",this.contexts[n].fillRect(d,10,this.zoomed_column,this.height-40);else{var y=this.data.heightArr[m-1],x=0,w=(y.length,0);for(w in y){var S,k,z,C,M=[w,y[w]];.01<M[1]&&(C=parseFloat(M[1])/this.data.max_height,S=d,k=(this.info_content_height-2)*C,z=this.info_content_height-2-x-k,C=null,C="dynamic"===this.colorscheme?this.colors.getColor(M[0],{pos:m-1}):"consensus"===this.colorscheme?this.cmap[m-1][M[0]]||"#7a7a7a":this.colors[M[0]],r?(this.contexts[n].strokeStyle=C,this.contexts[n].strokeRect(S,z,this.zoomed_column,k)):(this.contexts[n].fillStyle=C,this.contexts[n].fillRect(S,z,this.zoomed_column,k)),x+=k)}}this.zoom<.2?b=20:this.zoom<.3&&(b=10),this.options.positionMarker&&m%b==0&&(this.options.show_probs&&E(this.contexts[n],d+this.zoomed_column,this.height-30,parseFloat(this.height),"#dddddd"),E(this.contexts[n],d+this.zoomed_column,0,5),p=this.display_ali_map?this.data.ali_map[m-1]:g,O(this.contexts[n],d-2,10,this.zoomed_column,p,10,!0)),this.options.show_probs&&(i=this.contexts[n],o=d,s=this.height-42,a=this.zoomed_column,u=this.data.insert_probs[m-1],l=this.data.insert_lengths[m-1],c=this.data.delete_probs[m-1],h=this.show_inserts,f=void 0,f="#ffffff",h?(.1<u?f="#d7301f":.05<u?f="#fc8d59":.03<u&&(f="#fdcc8a"),i.fillStyle=f,i.fillRect(o,s+15,a,10),f="#ffffff",9<l?f="#d7301f":7<l?f="#fc8d59":4<l&&(f="#fdcc8a"),i.fillStyle=f,i.fillRect(o,s+30,a,10)):s+=30,f="#ffffff",c<.75?f="#2171b5":c<.85?f="#6baed6":c<.95&&(f="#bdd7e7"),i.fillStyle=f,i.fillRect(o,s,a,10)),this.options.show_probs&&(this.show_inserts?j(this.contexts[n],this.height-45,this.total_width):j(this.contexts[n],this.height-15,this.total_width)),this.options.border&&j(this.contexts[n],0,this.total_width),d+=this.zoomed_column,g++}}},function(t,e){"use strict";t.exports=function(t,e){e=e||{},this.value=t,this.width=parseInt(e.width,10)||100,"W"===this.value&&(this.width+=30*this.width/100),this.height=parseInt(e.height,10)||100,this.color=e.color||"#000000",this.fontSize=e.fontSize||138,this.scaled=function(){},this.draw=function(t,e,n,r,i,o){var s=e/this.height,e=n/this.width,n=t.font;t.transform(e,0,0,s,r,i),t.fillStyle=o||this.color,t.textAlign="center",t.font="bold "+this.fontSize+"px Arial",t.fillText(this.value,0,0),t.setTransform(1,0,0,1,0,0),t.fillStyle="#000000",t.font=n}}},function(t,e){"use strict";t.exports={render_x_axis_label:function(){var t="Model Position";this.display_ali_map&&(t="Alignment Column"),this.called_on.find(".logo_xaxis").remove(),this.called_on.prepend('<div class="logo_xaxis" class="centered" style="margin-left:40px"><p class="xaxis_text" style="width:10em;margin:1em auto">'+t+"</p></div>")},render_y_axis_label:function(){this.dom_element.parent().before('<canvas class="logo_yaxis" height="'+this.options.height+'" width="55"></canvas>');var t=this.called_on.find(".logo_yaxis"),e=(Math.abs(this.data.max_height),isNaN(this.data.min_height_obs)||parseInt(this.data.min_height_obs,10),null),n="Information Content (bits)";(e=t[0].getContext("2d")).beginPath(),e.moveTo(55,1),e.lineTo(40,1),e.moveTo(55,this.info_content_height),e.lineTo(40,this.info_content_height),e.moveTo(55,this.info_content_height/2),e.lineTo(40,this.info_content_height/2),e.lineWidth=1,e.strokeStyle="#666666",e.stroke(),e.fillStyle="#666666",e.textAlign="right",e.font="bold 10px Arial",e.textBaseline="top",e.fillText(parseFloat(this.data.max_height).toFixed(1),38,0),e.textBaseline="middle",e.fillText(parseFloat(this.data.max_height/2).toFixed(1),38,this.info_content_height/2),e.fillText("0",38,this.info_content_height),"score"===this.data.height_calc&&(n="Score (bits)"),e.save(),e.translate(5,this.height/2-20),e.rotate(-Math.PI/2),e.textAlign="center",e.font="normal 12px Arial",e.fillText(n,1,0),e.restore(),e.fillText("occupancy",55,this.info_content_height+7),this.show_inserts&&(e.fillText("ins. prob.",50,280),e.fillText("ins. len.",46,296))}}},function(t,e,n){"use strict";var r=n(15);t.exports=function(e,i,t){e.find(".logo_settings_switch, .logo_settings .close").on("click",function(t){t.preventDefault(),r(".logo_settings").toggle()}),e.find(".logo_reset").on("click",function(t){t.preventDefault(),i.changeZoom({target:i.default_zoom})}),e.find(".logo_change").on("click",function(t){t.preventDefault()}),e.find(".logo_zoomin").on("click",function(t){t.preventDefault(),i.changeZoom({distance:.1,direction:"+"})}),e.find(".logo_zoomout").on("click",function(t){t.preventDefault(),i.changeZoom({distance:.1,direction:"-"})}),e.find(".logo_scale").on("change",function(t){i.toggleScale(this.value)}),e.find(".logo_color").on("change",function(t){i.toggleColorscheme(this.value)}),e.find(".logo_ali_map").on("change",function(t){i.toggleAliMap(this.value)}),e.find(".logo_position").on("change",function(){this.value.match(/^\d+$/m)&&i.scrollToColumn(this.value,1)}),t.on("dblclick",function(t){console.log("dblclick",i),offset=i.logo_graphic.offset(),x=parseInt(t.pageX-offset.left,10),window_position=t.pageX-e.parent().offset().left,col=i.columnFromCoordinates(x),console.log("col",col),current=i.zoom,current<1?i.changeZoom({target:1,offset:window_position,column:col}):i.changeZoom({target:.3,offset:window_position,column:col})}),r(document).on(e.attr("id")+".scrolledTo",function(t,e,n,r){i.render({target:e})}),r(document).on("keydown",function(t){t.ctrlKey||(61!==t.which&&107!==t.which||(zoom+=.1,i.changeZoom({distance:.1,direction:"+"})),109!==t.which&&0!==t.which||(zoom-=.1,i.changeZoom({distance:.1,direction:"-"})))})}},function(t,e,n){"use strict";var f=n(15);t.exports=function(t,e){var n,r,i,o=f('<form class="logo_form"><fieldset><label for="position">Column number</label><input type="text" name="position" class="logo_position"></input><button class="button logo_change">Go</button></fieldset></form>'),s=f('<div class="logo_settings"></div>');s.append('<span class="close">x</span>'),t.scale_height_enabled&&t.data.max_height_obs<t.data.max_height_theory&&(i=c=r=n="",t.data.max_height_obs===t.data.max_height?n="checked":r="checked");var a,u,l,c='<fieldset><legend>Scale</legend><label><input type="radio" name="scale" class="logo_scale" value="obs" '+n+"/>Maximum Observed "+i+'</label></br><label><input type="radio" name="scale" class="logo_scale" value="theory" '+r+"/>Maximum Theoretical "+c+"</label></fieldset>";s.append(c),"score"!==t.data.height_calc&&"aa"===t.data.alphabet&&t.data.probs_arr&&(a=c=null,u=l="","default"===t.colorscheme?c="checked":a="checked",e.help&&(l='<a class="help" href="/help#colors_default" title="Each letter receives its own color."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',u='<a class="help" href="/help#colors_consensus" title="Letters are colored as in Clustalx and Jalview, with colors depending on composition of the column."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),l='<fieldset><legend>Color Scheme</legend><label><input type="radio" name="color" class="logo_color" value="default" '+c+"/>Default "+l+'</label></br><label><input type="radio" name="color" class="logo_color" value="consensus" '+a+"/>Consensus Colors "+u+"</label></fieldset>",s.append(l)),t.data.ali_map&&(u=a=null,h=l="",0===t.display_ali_map?a="checked":u="checked",e.help&&(l='<a class="help" href="/help#coords_model" title="The coordinates along the top of the plot show the model position."><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>',h='<a class="help" href="/help#coords_ali" title="The coordinates along the top of the plot show the column in the alignment associated with the model"><span aria-hidden="true" data-icon="?"></span><span class="reader-text">help</span></a>'),h='<fieldset><legend>Coordinates</legend><label><input type="radio" name="coords" class="logo_ali_map" value="model" '+a+"/>Model "+l+'</label></br><label><input type="radio" name="coords" class="logo_ali_map" value="alignment" '+u+"/>Alignment "+h+"</label></fieldset>",s.append(h));var h=f('<div class="logo_controls"></div>');return t.zoom_enabled&&h.append('<button class="logo_zoomout button">-</button><button class="logo_zoomin button">+</button>'),0<s.children().length&&(h.append('<button class="logo_settings_switch button">Settings</button>'),h.append(s)),o.append(h),o}},function(t,e){"use strict";t.exports={A:"#FF9966",C:"#009999",D:"#FF0000",E:"#CC0033",F:"#00FF00",G:"#f2f20c",H:"#660033",I:"#CC9933",K:"#663300",L:"#FF9933",M:"#CC99CC",N:"#336666",P:"#0099FF",Q:"#6666CC",R:"#990000",S:"#0000FF",T:"#00FFFF",V:"#FFCC33",W:"#66CC66",Y:"#006600"}},function(t,e){"use strict";t.exports={A:"#cbf751",C:"#5ec0cc",G:"#ffdf59",T:"#b51f16",U:"#b51f16"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=function(t){{if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}}(n(91));var r=n(14),g=n(65),r=r.extend({className:"biojs_msa_gapview",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:stepSize change:labelWidth change:columnWidth",this.render),this.listenTo(this.g.vis,"change:labels change:metacell",this.render),this.listenTo(this.g.columns,"change:scaling",this.render),this.listenTo(this.model,"reset",this.render),this.manageEvents()},render:function(){var t=this.g.stats.gaps();g.removeAllChilds(this.el);var e=this.model.getMaxLength(),n=this.g.zoomer.get("columnWidth"),r=n*(e-this.g.columns.get("hidden").length),i=d.base({height:20,width:r});i.style.display="inline-block",i.style.cursor="pointer";for(var o=this.g.zoomer.get("stepSize"),s=this.g.columns.get("hidden"),a=0,u=0;u<e;)if(0<=s.indexOf(u))u+=o;else{r=n*o;for(var l=0,c=o-1,h=0;0<c?h<=c:c<=h;0<c?h++:h--)l+=t[u];var f=l/o*20,f=d.rect({x:a,y:20-f,width:r-n/4,height:f,style:"stroke:red;stroke-width:1;"});f.rowPos=u,i.appendChild(f),a+=r,u+=o}return this.el.appendChild(i),this},_onclick:function(r){var i=this,o=r.target.rowPos,s=this.g.zoomer.get("stepSize");return function(){for(var t=[],e=s-1,n=0;0<e?n<=e:e<=n;0<e?n++:n--)t.push(i.g.trigger("gap:click",{rowPos:o+n,evt:r}));return t}()},manageEvents:function(){var t={};return this.g.config.get("registerMouseClicks")&&(t.click="_onclick"),this.g.config.get("registerMouseHover")&&(t.mousein="_onmousein",t.mouseout="_onmouseout"),this.delegateEvents(t),this.listenTo(this.g.config,"change:registerMouseHover",this.manageEvents),this.listenTo(this.g.config,"change:registerMouseClick",this.manageEvents)},_onmousein:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("gap:mousein",{rowPos:e,evt:t})},_onmouseout:function(t){var e=this.g.zoomer.get("stepSize"*t.rowPos);return this.g.trigger("gap:mouseout",{rowPos:e,evt:t})}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=n(2),r=n(14),i=n(61),a=n(15),r=r.extend({className:"biojs_msa_overviewbox",tagName:"canvas",initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:boxRectWidth change:boxRectHeight change:overviewboxPaddingTop",this.rerender),this.listenTo(this.g.zoomer,"change:alignmentHeight change:alignmentWidth",this.rerender),this.listenTo(this.g.zoomer,"change:overviewboxWidth change:overviewboxHeigth",this.rerender),this.listenTo(this.g.selcol,"add reset change",this.rerender),this.listenTo(this.g.columns,"change:hidden",this.rerender),this.listenTo(this.g.colorscheme,"change:showLowerCase",this.rerender),this.listenTo(this.model,"change",_.debounce(this.rerender,5)),this.color=this.g.colorscheme.getSelectedScheme(),this.listenTo(this.g.colorscheme,"change:scheme",function(){return this.color=this.g.colorscheme.getSelectedScheme(),this.rerender()}),this.dragStart=[]},events:{click:"_onclick",mousedown:"_onmousedown"},rerender:function(){if(!this.g.config.get("manualRendering"))return this.render()},render:function(){this._createCanvas(),this.el.textContent="overview",this.el.style.marginTop=this.g.zoomer.get("overviewboxPaddingTop"),this.ctx.fillStyle="#999999",this.ctx.fillRect(0,0,this.el.width,this.el.height);for(var t=this.model.length,e=this.g.columns.get("hidden"),n=this.g.colorscheme.get("showLowerCase"),r=-this.coords.boxes_size.y,i=0;i<this.coords.boxes.y;i++){for(var o=[],s=[],a=Math.floor(i*this.coords.resid_per_box.y);a<Math.floor((i+1)*this.coords.resid_per_box.y)&&a<t;a++)this.model.at(a)&&(o.push(this.model.at(a).get("seq")),s.push(this.model.at(a).get("hidden")));var u=0;r+=this.coords.boxes_size.y;for(var l=0;l<this.coords.boxes.x;l++){for(var c=[],h=0;h<o.length;h++)for(var f,d=Math.floor(l*this.coords.resid_per_box.x);d<Math.floor((l+1)*this.coords.resid_per_box.x)&&d<o[h].length;d++)s[h]?c.push("grey"):(f=o[h][d],n&&(f=f.toUpperCase()),f=this.color.getColor(f,{pos:d}),0<=e.indexOf(d)&&(f="grey"),null!=f&&c.push(f));0!==c.length&&(this.ctx.fillStyle=this._mode(c),this.ctx.fillRect(u,r,this.coords.boxes_size.x,this.coords.boxes_size.y)),u+=this.coords.boxes_size.x}}return this._drawSelection()},coords:{screen_to_model:function(t,e){e=t*this.resid_per_box[e]/this.boxes_size[e];return Math.floor(e)},model_to_screen:function(t,e){return Math.floor(t*this.boxes_size[e]/this.resid_per_box[e])},updatecoords_transform:function(t){var e=t.g.zoomer.get("boxRectHeight"),n=t.g.zoomer.get("boxRectWidth"),r=t.g.zoomer.get("overviewboxWidth"),i=t.g.zoomer.get("overviewboxHeight"),r="fixed"===r?t.model.getMaxLength()*n:Math.min(t.g.zoomer.get("alignmentWidth")+t.g.zoomer.getLeftBlockWidth(),t.model.getMaxLength()*n),i="fixed"===i?t.model.length*e:Math.min(isNaN(parseInt(i,10))?1e10:parseInt(i,10),t.model.length*e);this.container_size={x:r,y:i},this.boxes_size={x:n,y:e},this.resid_per_box={x:Math.max(1,t.model.getMaxLength()/r*n),y:Math.max(1,t.model.length/i*e)},this.boxes={x:Math.ceil(r/n),y:Math.ceil(i/e)}}},_mode:function(t){return t.sort(function(e,n){return t.filter(function(t){return t===e}).length-t.filter(function(t){return t===n}).length}).pop()},_drawSelection:function(){var r=this;if(!(0<this.dragStart.length)||this.prolongSelection){this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;for(var t=this.g.selcol.length,e=0;e<t;e++)(function(t){var e=r.g.selcol.at(t);if(!e)return;var n=void 0,t=void 0;"column"===e.get("type")?r.ctx.fillRect(r.coords.boxes_size.x*e.get("xStart"),0,r.coords.boxes_size.x*(e.get("xEnd")-e.get("xStart")+1),r.coords.container_size.y):"row"===e.get("type")?(n=r.model.filter(function(t){return t.get("id")===e.get("seqId")})[0],t=r.model.indexOf(n),r.ctx.fillRect(0,r.coords.model_to_screen(t,"y"),r.coords.model_to_screen(n.get("seq").length,"x"),r.coords.boxes_size.y)):"pos"===e.get("type")&&(n=r.model.filter(function(t){return t.get("id")===e.get("seqId")})[0],t=r.model.indexOf(n),r.ctx.fillRect(r.coords.model_to_screen(e.get("xStart"),"x"),r.coords.model_to_screen(t,"y"),r.coords.model_to_screen(e.get("xEnd")-e.get("xStart")+1,"x"),r.coords.boxes_size.y))})(e);return this.ctx.globalAlpha=1}},_onclick:function(t){return this.g.trigger("meta:click",{seqId:this.model.get("id",{evt:t})})},_onmousemove:function(t){if(0!==this.dragStart.length){this.render(),this.ctx.fillStyle="#666666",this.ctx.globalAlpha=.9;var e=this._calcSelection(i.abs(t));return this.ctx.fillRect(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0]),t.preventDefault(),t.stopPropagation()}},_onmousedown:function(t){var e=this;return this.dragStart=i.abs(t),this.dragStartRel=i.rel(t),t.ctrlKey||t.metaKey?this.prolongSelection=!0:this.prolongSelection=!1,a(document.body).on("mousemove.overmove",function(t){return e._onmousemove(t)}),a(document.body).on("mouseup.overup",function(t){return e._onmouseup(t)}),this.dragStart},_calcSelection:function(t){for(var e=[t[0]-this.dragStart[0],t[1]-this.dragStart[1]],n=0;n<=1;n++)e[n]=this.dragStartRel[n]+e[n];for(var r=[[this.dragStartRel[0],e[0]],[this.dragStartRel[1],e[1]]],i=0;i<=1;i++)r[i][1]<r[i][0]&&(r[i]=[r[i][1],r[i][0]]),r[i][0]=Math.max(r[i][0],0);return r},_endSelection:function(t){if(a(document.body).off(".overmove"),a(document.body).off(".overup"),0!==this.dragStart.length){for(var e=this._calcSelection(t),n=0;n<=1;n++)e[0][n]=this.coords.screen_to_model(e[0][n],"x");for(n=0;n<=1;n++)e[1][n]=this.coords.screen_to_model(e[1][n],"y");e[0][1]=Math.min(this.model.getMaxLength()-1,e[0][1]),e[1][1]=Math.min(this.model.length-1,e[1][1]);for(var r=[],i=e[1][0];i<=e[1][1];i++){var o={seqId:this.model.at(i).get("id"),xStart:e[0][0],xEnd:e[0][1]};r.push(new s.possel(o))}return this.dragStart=[],this.prolongSelection?this.g.selcol.add(r):this.g.selcol.reset(r),this.g.zoomer.setLeftOffset(e[0][0]),this.g.zoomer.setTopOffset(e[1][0])}},_onmouseup:function(t){return this._endSelection(i.abs(t))},_onmouseout:function(t){return this._endSelection(i.abs(t))},_createCanvas:function(){return this.coords.updatecoords_transform(this),this.el.height=this.coords.container_size.y,this.el.width=this.coords.container_size.x,this.ctx=this.el.getContext("2d"),this.el.style.overflow="auto",this.el.style.cursor="crosshair"}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u=n(2),r=n(16),o=n(44),r=(n(65),r.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.user,"change:searchText",function(t,e){return this.search(e),this.render()}),this.sel=[],this.selPos=0},events:{scroll:"_sendScrollEvent"},render:function(){this.renderSubviews(),this.el.className="biojs_msa_searchresult";var t=this.g.user.get("searchText");return null!=t&&0<t.length&&(0===this.sel.length?this.el.textContent="no selection found":(this.resultBox=o.mk("div"),this.resultBox.className="biojs_msa_searchresult_ovbox",this.updateResult(),this.el.appendChild(this.resultBox),this.el.appendChild(this.buildBtns()))),this},updateResult:function(){var t="search pattern: "+this.g.user.get("searchText");t+=", selection: "+(this.selPos+1);var e=this.sel[this.selPos];return t+=" (",t+=e.get("xStart")+" - "+e.get("xEnd"),t+=", id: "+e.get("seqId"),t+=")",this.resultBox.textContent=t},buildBtns:function(){var t=this,e=o.mk("button");e.textContent="Prev",e.addEventListener("click",function(){return t.moveSel(-1)});var n=o.mk("button");n.textContent="Next",n.addEventListener("click",function(){return t.moveSel(1)});var r=o.mk("button");r.textContent="All",r.addEventListener("click",function(){return t.g.selcol.reset(t.sel)});var i=o.mk("div");return i.appendChild(e),i.appendChild(n),i.appendChild(r),i.className="biojs_msa_searchresult_row",i},moveSel:function(t){t=this.selPos+t;return t<0||t>=this.sel.length?-1:(this.focus(t),this.selPos=t,this.updateResult())},focus:function(t){var e=this.sel[t],t=e.get("xStart");return this.g.zoomer.setLeftOffset(t),this.g.selcol.reset([e])},search:function(t){var o=new RegExp(t,"gi"),s=[],a=100042;return this.model.each(function(r){var i=r.get("seq");return function(){for(var t=[];n=o.exec(i);){var e=n.index,n={xStart:e,xEnd:e+n[0].length-1,seqId:r.get("id")};s.push(new u.possel(n)),t.push(a=Math.min(e,a))}return t}()}),this.g.selcol.reset(s),100042===a&&(a=0),this.g.zoomer.setLeftOffset(a),this.sel=s}}));e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=n(14),o=n(15),r=i.extend({initialize:function(t){return this.g=t.g,this.listenTo(this.g.zoomer,"change:columnWidth",this.render),this.toggleClass="msa-hide",this.isVisible=!0,this},attributes:{class:"biojs_msa_scale"},events:{"change input":"updateSlider","click button.msa-btn-close":"hide","click button.msa-btn-open":"show","click button[data-action]":"clickButton"},template:(0,r.template)('\t<div class="msa-scale-minimised">\t  <button class="btn msa-btn msa-btn-open">Zoom</button>\t</div>\t<div class="msa-scale-maximised">\t  <button class="btn msa-btn msa-btn-close" style="float:right">&times; close</button>\t  <div>\t  <input type="range" \t    data-provide="slider" \t    min="<%= min %>" \t    max="<%= max %>" \t    step="<%= step %>" \t    value="<%= value %>" \t  >\t  </div>\t  <div class="btngroup msa-btngroup">\t    <button class="btn msa-btn" data-action="smaller"><span class="glyphicon-zoom-out"></span>-</button>\t    <button class="btn msa-btn" data-action="bigger"><span class="glyphicon-zoom-in"></span>+</button>\t    <button class="btn msa-btn" data-action="reset"><span class="glyphicon-repeat"></span>reset</button>\t  </div>\t</div>\t'),render:function(){var t=this.model.getSizeRange(),t={value:this.model.getSize(),min:t[0],max:t[1],step:this.model.step||1};return this.$el.html(this.template(t)),this.isVisible?this.show():this.hide(),this},updateSlider:function(t){t=t.target,t=parseInt(o(t).val());this.model.setSize(t)},clickButton:function(t){console.log("clickButton",this,t);t=t.target,t=o(t).data("action"),this.model[t];return"function"==typeof this.model[t]&&this.model[t](),this},hide:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").removeClass(this.toggleClass),this.$el.find(".msa-scale-maximised").addClass(this.toggleClass)},show:function(){this.isVisible=!1,this.$el.find(".msa-scale-minimised").addClass(this.toggleClass),this.$el.find(".msa-scale-maximised").removeClass(this.toggleClass)}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(3),s=n(67),a=n(114),u=(r=a)&&r.__esModule?r:{default:r};function l(t){return this.msa=t,this}n={guessFileFromText:function(t,e){if(null==t)return console.warn("invalid file format"),["","error"];switch((0,u.default)(t,e)){case"clustal":var n=s.clustal,r="seqs";break;case"fasta":n=s.fasta,r="seqs";break;case"newick":r="newick";break;case"gff":n=s.gff,r="features";break;default:alert("Unknown file format. Please contact us on Github for help.")}return[n,r]},parseText:function(t,e){var n=this.guessFileFromText(t,e),e=i(n,2),n=e[0],e=e[1];return"seqs"!==e?"features"!==e?[t,e]:[n.parseSeqs(t),e]:[n.parse(t),e]},importFiles:function(o){var s=this;return function(){for(var t=[],e=o.length-1,n=0;0<e?n<=e:e<=n;0<e?n++:n--){var r=o[n],i=new FileReader;i.onload=function(t){return s.importFile(t.target.result)},t.push(i.readAsText(r))}return t}()},importFile:function(t,e){var n=this;(e=e||{}).name=t.name;var r=this.parseText(t,e),e=i(r,2),r=e[0],e=e[1];return"error"===e?(alert("An error happened"),"error"):("seqs"===e?(this.msa.seqs.reset(r),this.msa.g.config.set("url","userimport"),this.msa.g.trigger("url:userImport")):"features"===e?this.msa.seqs.addFeatures(r):"newick"===e?this.msa.u.tree.loadTree(function(){return n.msa.u.tree.showTree(t)}):alert("Unknown file!"),t.name)},importURL:function(r,i){var o=this;return r=this.msa.u.proxy.corsURL(r),this.msa.g.config.set("url",r),(0,s.xhr)({url:r,timeout:0},function(t,e,n){return t?console.error(t):"error"!==o.importFile(n,{url:r})?(o.msa.g.trigger("import:url",r),i?i():void 0):void 0})}};(0,o.extend)(l.prototype,n),e.default=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){for(var e=(e.name||e.url||"").split("."),n=e[e.length-1]||"",r=0;r<o.length;r++){var i=o[r](t,n);if(i)return i}return"unknown"};var o=[function(t,e){return("CLUSTAL"===t.substring(0,7)||"clustal"==e||"aln"==e)&&"clustal"},function(t,e){return(">"===t.substring(0,1)||"fasta"==e||"fa"==e)&&"fasta"},function(t,e){return("("===t.substring(0,1)||"nwk"==e)&&"newick"},function(t,e){if(t.length<=10)return!1;t=t.split("\n");return(0<=t[0].indexOf("gff")||0<=e.indexOf("gff")||t[0].indexOf("#")<0&&2===t[0].split("\t").length)&&"gff"}]},function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,r=o(3),i=o(18);(n=i)&&n.__esModule;function s(t){return this.msa=t,this}var a,u={loadTree:function(t){return this.msa.g.package.loadPackages(["msa-tnt","biojs-io-newick"],t)},showTree:function(t){var e,n=window.require("biojs-io-newick"),r=window.require("msa-tnt"),n="string"==typeof t?n.parse_newick(t):t,t=new r.selections;0===this.msa.el.getElementsByClassName("tnt_groupDiv").length?(e=document.createElement("div"),this.msa.el.appendChild(e)):(console.log("A tree already exists. It will be overridden."),(e=this.msa.el.getElementsByClassName("tnt_groupDiv")[0].parentNode).innerHTML="");var i=this.msa.seqs.toJSON();!function t(e){var n;null!=e.children?e.children.forEach(t):null!=(n=i.filter(function(t){return t.name===e.name})[0])&&("number"==typeof n.id?(n.ids=["s"+(n.id+1)],e.name="s"+(n.id+1)):e.name=n.id)}(n);n=r.app({seqs:i,tree:n}),new r.adapters.tree({model:n,el:e,sel:t}),new r.adapters.msa({model:n,sel:t,msa:this.msa});return n.models.forEach(function(t){return delete t.collection,Object.setPrototypeOf(t,o(6).Model.prototype)}),this.msa.seqs.reset(n.models),console.log(this.msa.seqs)},require:(a=function(t){return o(116)(t)},l.toString=function(){return a.toString()},l)};function l(t){return a.apply(this,arguments)}(0,r.extend)(s.prototype,u),e.default=s},function(t,e,n){var r={"./bmath":117,"./bmath.js":117,"./exporter":118,"./exporter.js":118,"./file":113,"./file.js":113,"./index":121,"./index.js":121,"./loader":43,"./loader.js":43,"./proxy":122,"./proxy.js":122,"./recognize":114,"./recognize.js":114,"./seqgen":123,"./seqgen.js":123,"./svg":91,"./svg.js":91,"./tree":115,"./tree.js":115};function i(t){return n(o(t))}function o(t){return r[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}i.keys=function(){return Object.keys(r)},i.resolve=o,(t.exports=i).id=116},function(t,e){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(e,"__esModule",{value:!0});var n=(function(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}(i,null,[{key:"randomInt",value:function(t,e){var n;return null==e&&(t=(n=[0,t])[0],e=n[1]),e<t&&(t=(n=[e,t])[0],e=n[1]),Math.floor(Math.random()*(e-t+1)+t)}},{key:"uniqueId",value:function(){for(var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:8,e="";e.length<t;)e+=Math.random().toString(36).substr(2);return e.substr(0,t)}},{key:"getRandomInt",value:function(t,e){return Math.floor(Math.random()*(e-t+1))+t}}]),i);function i(){!function(t){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this)}e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(67),r=n(3),i=n(119),s=n(120),a={openInJalview:function(t,e){"."===t.charAt(0)&&(t=document.URL.substr(0,document.URL.lastIndexOf("/"))+"/"+t),t.indexOf("http")<0&&(t="http://"+window.location.hostname+t);t="http://www.jalview.org/services/launchApp?open="+(t=encodeURIComponent(t));return t+="&colour="+e,window.open(t,"_blank")},publishWeb:function(t,r){t=o.fasta.write(t.seqs.toJSON()),t=encodeURIComponent(t);return(0,o.xhr)({method:"POST",body:"sprunge="+t,uri:"http://sprunge.biojs.net",headers:{"Content-Type":"application/x-www-form-urlencoded"}},function(t,e,n){n=n.trim();return r(n)})},shareLink:function(t,e){function n(t){if(e)return e("http://msa.biojs.net/app/?seq="+t)}var r=t.g.config.get("importURL");return r?n(r):a.publishWeb(t,n)},saveAsFile:function(t,e){t=o.fasta.write(t.seqs.toJSON()),t=new Blob([t],{type:"text/plain"});return s(t,e)},saveSelection:function(t,e){var n=t.g.selcol.pluck("seqId");if(console.log(n),0<n.length)for(var r=(n=t.seqs.filter(function(t){return 0<=n.indexOf(t.get("id"))})).length-1,i=0;0<r?i<=r:r<=i;0<r?i++:i--)n[i]=n[i].toJSON();else n=t.seqs.toJSON(),console.warn("no selection found");t=o.fasta.write(n),t=new Blob([t],{type:"text/plain"});return s(t,e)},saveAnnots:function(t,e){var n=t.seqs.map(function(t){if(0!==(n=t.get("features")).length){var e=t.get("name");return n.each(function(t){return t.set("seqname",e)}),n.toJSON()}}),n=(0,r.flatten)((0,r.compact)(n));console.log(n);t=o.gff.exportLines(n),t=new Blob([t],{type:"text/plain"});return s(t,e)},saveAsImg:function(t,e){t=t.getView("stage").getView("body").getView("seqblock").el;if(null!=t){t=t.toDataURL("image/png");return s(i(t),e,"image/png")}}};e.default=a},function(t,e){"use strict";var r=window.HTMLCanvasElement&&window.HTMLCanvasElement.prototype,s=window.Blob&&function(){try{return Boolean(new Blob)}catch(t){return!1}}(),a=s&&window.Uint8Array&&function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(t){return!1}}(),u=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,i=(s||u)&&window.atob&&window.ArrayBuffer&&window.Uint8Array&&function(t){for(var e,n=(0<=t.split(",")[0].indexOf("base64")?atob:decodeURIComponent)(t.split(",")[1]),r=new ArrayBuffer(n.length),i=new Uint8Array(r),o=0;o<n.length;o+=1)i[o]=n.charCodeAt(o);return e=t.split(",")[0].split(":")[1].split(";")[0],s?new Blob([a?i:r],{type:e}):((t=new u).append(r),t.getBlob(e))};window.HTMLCanvasElement&&!r.toBlob&&(r.mozGetAsFile?r.toBlob=function(t,e,n){n&&r.toDataURL&&i?t(i(this.toDataURL(e,n))):t(this.mozGetAsFile("blob",e))}:r.toDataURL&&i&&(r.toBlob=function(t,e,n){t(i(this.toDataURL(e,n)))})),t.exports=i},function(t,e,n){(function(t){"use strict";var e="undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(g){if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var p=g.document,m=function(){return g.URL||g.webkitURL||g},v=p.createElementNS("http://www.w3.org/1999/xhtml","a"),_=!g.externalHost&&"download"in v,b=g.webkitRequestFileSystem,y=g.requestFileSystem||b||g.mozRequestFileSystem,x="application/octet-stream",w=0,S=[],t=function(){for(var t=S.length;t--;){var e=S[t];"string"==typeof e?m().revokeObjectURL(e):e.remove()}S.length=0},k=function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var i=t["on"+e[r]];if("function"==typeof i)try{i.call(t,n||t)}catch(t){!function(t){(g.setImmediate||g.setTimeout)(function(){throw t},0)}(t)}}},n=function(r,n){function t(){var t=m().createObjectURL(r);return S.push(t),t}function e(){k(c,"writestart progress write writeend".split(" "))}function i(){!f&&s||(s=t()),a?a.location.href=s:window.open(s,"_blank"),c.readyState=c.DONE,e()}function o(t){return function(){if(c.readyState!==c.DONE)return t.apply(this,arguments)}}var s,a,u,l,c=this,h=r.type,f=!1,d={create:!0,exclusive:!1};if(c.readyState=c.INIT,n=n||"download",_)return s=t(),v.href=s,v.download=n,u=v,(l=p.createEvent("MouseEvents")).initMouseEvent("click",!0,!1,g,0,0,0,0,0,!1,!1,!1,!1,0,null),u.dispatchEvent(l),c.readyState=c.DONE,void e();g.chrome&&h&&h!==x&&(l=r.slice||r.webkitSlice,r=l.call(r,0,r.size,x),f=!0),b&&"download"!==n&&(n+=".download"),h!==x&&!b||(a=g),y?(w+=r.size,y(g.TEMPORARY,w,o(function(t){t.root.getDirectory("saved",d,o(function(t){function e(){t.getFile(n,d,o(function(n){n.createWriter(o(function(e){e.onwriteend=function(t){a.location.href=n.toURL(),S.push(n),c.readyState=c.DONE,k(c,"writeend",t)},e.onerror=function(){var t=e.error;t.code!==t.ABORT_ERR&&i()},"writestart progress write abort".split(" ").forEach(function(t){e["on"+t]=c["on"+t]}),e.write(r),c.abort=function(){e.abort(),c.readyState=c.DONE},c.readyState=c.WRITING}),i)}),i)}t.getFile(n,{create:!1},o(function(t){t.remove(),e()}),o(function(t){(t.code===t.NOT_FOUND_ERR?e:i)()}))}),i)}),i)):i()},e=n.prototype,r=function(t,e){return new n(t,e)};return e.abort=function(){this.readyState=this.DONE,k(this,"abort")},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,g.addEventListener("unload",t,!1),r.unload=function(){t(),g.removeEventListener("unload",t,!1)},r}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||(void 0).content),n=window.define;void 0===n&&void 0!==window.almond&&"define"in window.almond&&(n=window.almond.define),null!=t?t.exports=e:null!=n&&null!=n.amd&&n("saveAs",[],function(){return e})}).call(e,n(4)(t))},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.exporter=e.file=e.seqgen=e.proxy=e.bmath=void 0;var r=a(n(117)),i=a(n(122)),o=a(n(123)),s=a(n(113)),n=a(n(118));function a(t){return t&&t.__esModule?t:{default:t}}e.bmath=r.default,e.proxy=i.default,e.seqgen=o.default,e.file=s.default,e.exporter=n.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(t){return this.g=t.g,this}var i={corsURL:function(t){return 0<=document.URL.indexOf("localhost")&&"/"===t[0]||"."===t.charAt(0)||"/"===t.charAt(0)?t:(this.g.config.get("importProxyStripHttp")&&(t=(t=t.replace("http://","")).replace("https://","")),t=this.g.config.get("importProxy")+t)}};(0,n(3).extend)(r.prototype,i),e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(117),m=(r=i)&&r.__esModule?r:{default:r};var v=n(124).seq,_=n(126),b={_generateSequence:function(t){for(var e="",n=t-1,r=0;0<n?r<=n:n<=r;0<n?r++:r--)e+=b.getRandomChar();return e},getDummySequences:function(t,e){var n=[];null==t&&(t=m.default.getRandomInt(3,5)),null==e&&(e=m.default.getRandomInt(50,200));for(var r=1;1<t?r<=t:t<=r;1<t?r++:r--)n.push(new v(b._generateSequence(e),"seq"+r,"r"+r));return n},getRandomChar:function(t){t=t||"ABCDEFGHIJKLMNOPQRSTUVWXYZ";return t.charAt(Math.floor(Math.random()*t.length))},genConservedSequences:function(t,e,n){var r=[];null==t&&(t=m.default.getRandomInt(3,5)),null==e&&(e=m.default.getRandomInt(50,200)),n=n||"ACDEFGHIKLMNPQRSTVWY---";for(var i=1;1<t?i<=t:t<=i;1<t?i++:i--)r[i-1]="";for(var o=1,s=e-1,a=0;0<s?a<=s:s<=a;0<s?a++:a--){a%3==0&&(o=m.default.getRandomInt(50,100)/100);for(var u=[],l=t-1,c=0;0<l?c<=l:l<=c;0<l?c++:c--){for(var h=0,f=void 0;h<100;){f=b.getRandomChar(n);var d=_(u);if(d.addSeq(f),h++,Math.abs(o-d.scale(d.conservation())[0])<.2)break}r[c]+=f,u.push(f)}}for(var g=[],p=1;1<t?p<=t:t<=p;1<t?p++:p--)g.push(new v(r[p-1],"seq"+p,"r"+p));return g}};e.default=b},function(t,e,n){"use strict";t.exports.seq=n(125)},function(t,e){"use strict";t.exports=function(t,e,n){this.seq=t,this.name=e,this.id=n,this.meta={}}},function(t,e,n){"use strict";function r(t,e){if(!this||this.constructor!==r)return new r(t);if(void 0===t||"string"==typeof t)throw new TypeError("you need to give the seq stat an array");this.resetSeqs(t),this.alphabetSize=4,this._useBackground=!1,this.useGaps=!1,this.ignoredChars=["*"],a.extend(this,e)}var a=n(11);r.prototype.addSeq=function(t){this.seqs.push(t),this._reset()},r.prototype.removeSeq=function(n){"number"==typeof n?this.seqs.splice(n,1):a.each(this.seqs,function(t,e){n===t&&this.seqs.splice(e,1)}.bind(this)),this._reset()},r.prototype.addSeqs=function(t){t.forEach(function(t){this.addSeq(t)}.bind(this))},r.prototype.resetSeqs=function(t){var e;this.seqs=[],!t instanceof Array||"_byId"in t?(e=function(){var t=this.mseqs.pluck("seq");this.resetSeqs(t)},(this.mseqs=t).on("add change reset ",e,this),e.call(this)):(this.addSeqs(t),this._reset(),this.trigger("reset"))};var i=["consensus","frequency","maxLength","ic","gaps"];r.prototype._reset=function(){for(var t=0;t<i.length;t++)this["_"+i[t]]=void 0;this._identity=void 0,this._background=void 0},r.prototype.setBackground=function(t){this._useBackground=t,this._reset()},r.prototype.useBackground=function(){this.setBackground(!0)},r.prototype.setDNA=function(){this.alphabetSize=4},r.prototype.setProtein=function(){this.alphabetSize=20},i.forEach(function(t){r.prototype[t]=function(){return void 0===this["_"+t]&&(this["_"+t]=this[t+"Calc"]()),this["_"+t]}}),r.prototype.identity=function(t){var e;return void 0!==this._identity&&!t||(e=this.identityCalc(t),this._identity=void 0),this._identity||e},r.prototype.background=function(){return void 0!==this.bg?this.bg:(void 0===this._background&&this.backgroundCalc(),this._background)},r.prototype.frequencyCalc=function(t){var r=new Array(this.maxLength()),i=new Array(this.seqs.length),n=this.ignoredChars;return void 0!==t&&t.all&&(n=[]),a.each(this.mseqs.models,function(t){t.attributes.hidden||"Consensus"==t.attributes.id||a.each(t.attributes.seq,function(t,e){0<=n.indexOf(t)||(void 0===r[e]&&(r[e]={}),void 0===r[e][t]&&(r[e][t]=0),r[e][t]++,void 0===i[e]&&(i[e]=0),i[e]++)})}),a.each(r,function(t,n){return a.each(t,function(t,e){return r[n][e]=t/i[n]})}),this._frequency=r},r.prototype.backgroundCalc=function(){var e={},n=0;return a.each(this.mseqs.models,function(t){t.attributes.hidden||"Consensus"==t.attributes.id||a.each(t,function(t){return void 0===e[t]&&(e[t]=0),e[t]++,n++})}),e=a.mapValues(e,function(t){return t/n}),this._background=e},r.prototype.icCalc=function(){var r,t=this.frequency();this._useBackground&&(r=this.background());var i=this.ignoredChars,o=this._useBackground,t=a.map(t,function(t){return a.reduce(t,function(t,e,n){return 0<=i.indexOf(n)?t:(o&&(e/=r[n]),t-e*(Math.log(e)/Math.log(2)))},0)});return this._ic=t},r.prototype.conservation=function(t){var e=this.ic(),n=this.gaps(),r=this;t=t||this.alphabetSize;var i=Math.log(t)/Math.log(2),o=0;return a.map(e,function(t){t=i-t;return r.useGaps&&(t*=1-n[o++]),t})},r.prototype.conservResidue=function(t){var i,e=t?t.alphabetSize:void 0,o=this.ignoredChars,s=void 0!==t&&t.scaled?this.scale(this.conservation(e)):this.conservation(e),e=this.frequency();return a.map(e,function(e,n){i=a.reject(a.keys(e),function(t){return 0<=o.indexOf(t)});var r={};return a.each(i,function(t){r[t]=e[t]*s[n]}),r})},r.prototype.conservResidue2=function(t){var r=this.frequency(),i=this.conservation(t),o=this.background();return a.map(r,function(t,n){return a.map(t,function(t){var e=a.reduce(r[n],function(t,e){return t+e/o[n]},0);return t/o[n]/e*i[n]},0)})},r.prototype.scale=function(t,e){e=e||this.alphabetSize;var n=Math.log(e)/Math.log(2);return a.map(t,function(t){return t/n})},r.prototype.maxLengthCalc=function(){return 0===this.seqs.length?0:a.max(this.seqs,function(t){return t.length}).length},r.prototype.consensusCalc=function(){var n=new Array(this.maxLength());return a.each(this.mseqs.models,function(t){t.attributes.hidden||"Consensus"==t.attributes.id||a.each(t.attributes.seq,function(t,e){void 0===n[e]&&(n[e]={}),void 0===n[e][t]&&(n[e][t]=0),n[e][t]++})}),this._consensus=a.reduce(n,function(t,e){var n=a.keys(e);return t+a.max(n,function(t){return e[t]})},""),void 0!==this.mseqs.models[0]&&"Consensus"==this.mseqs.models[0].attributes.id&&(this.mseqs.models[0].attributes.seq=this._consensus),this._consensus},r.prototype.identityCalc=function(t){var i=t||this.consensus();return this._identity=this.seqs.map(function(t){for(var e=0,n=0,r=0;r<t.length;r++)"-"!==t[r]&&"-"!==i[r]&&(n++,t[r]===i[r]&&e++);return e/n}),this._identity},r.prototype.gapsCalc=function(){var t=this.maxLength();if(t<=1||void 0===t)return[];var n=new Array(this.maxLength());return a.each(this.seqs,function(t){a.each(t,function(t,e){void 0===n[e]&&(n[e]={g:0,t:0}),t="-"===t?"g":"t",n[e][t]++})}),this._gaps=a.map(n,function(t){return t.g/(t.g+t.t)}),this._gaps},a.mixin({mapValues:function(t,e){return a.object(a.keys(t),a.map(t,e))}}),n(57).mixin(r.prototype),t.exports=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(19);Object.defineProperty(e,"seq",{enumerable:!0,get:function(){return a(r).default}});var i=n(18);Object.defineProperty(e,"seqcol",{enumerable:!0,get:function(){return a(i).default}});var o=n(21);Object.defineProperty(e,"feature",{enumerable:!0,get:function(){return a(o).default}});var s=n(20);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"featurecol",{enumerable:!0,get:function(){return a(s).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(129);Object.defineProperty(e,"defaultmenu",{enumerable:!0,get:function(){return o(r).default}});var i=n(85);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"menubuilder",{enumerable:!0,get:function(){return o(i).default}})},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=g(n(130)),i=g(n(131)),o=g(n(132)),s=g(n(133)),a=g(n(134)),u=g(n(135)),l=g(n(136)),c=g(n(137)),h=g(n(138)),f=g(n(139)),d=g(n(140));function g(t){return t&&t.__esModule?t:{default:t}}n=n(16).extend({initialize:function(t){if(!t.msa)throw new Error("No msa instance provided. Please provide .msa");if(this.msa=t.msa,this.msa.g.menuconfig=new d.default(t.menu),this.addView("10_import",new r.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("15_ordering",new u.default({model:this.msa.seqs,g:this.msa.g})),this.addView("20_filter",new i.default({model:this.msa.seqs,g:this.msa.g})),this.addView("30_selection",new o.default({model:this.msa.seqs,g:this.msa.g})),this.addView("40_vis",new s.default({model:this.msa.seqs,g:this.msa.g})),this.addView("50_color",new a.default({model:this.msa.seqs,g:this.msa.g})),this.addView("70_extra",new l.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("80_export",new c.default({model:this.msa.seqs,g:this.msa.g,msa:this.msa})),this.addView("90_help",new h.default({g:this.msa.g})),this.msa.g.config.get("debug"))return this.addView("95_debug",new f.default({g:this.msa.g}))},render:function(){return this.renderSubviews(),this.el.setAttribute("class","smenubar"),this.el.appendChild(document.createElement("p"))}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85),o=(r=i)&&r.__esModule?r:{default:r};var s=n(44),o=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var n=this,e=this.msa,r=s.mk("input");r.type="file",r.style.display="none",r.multiple=!0,r.addEventListener("change",function(){var t=r.files||[];return e.u.file.importFiles(t)}),this.el.appendChild(r);var i="(Fasta, Clustal, GFF, Jalview features, Newick)";return this.setName("Import"),this.addNode("URL",function(t){var e=prompt("URL "+i,"http://rostlab.org/~goldberg/clustalw2-I20140818-215249-0556-53699878-pg.clustalw");if(5<e.length)return n.msa.u.file.importURL(e,function(){})}),this.addNode("From file "+i,function(){return r.click()}),this.addNode("Drag & Drop",function(){return alert("Yep. Just drag & drop your file "+i)}),this.el.appendChild(this.buildDOM()),this}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85);n=((r=i)&&r.__esModule?r:{default:r}).default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var a=this;return this.setName("Filter"),this.addNode("Hide columns by threshold",function(t){var e=prompt("Enter threshold (in percent)",20);e/=100;for(var n=a.model.getMaxLength(),r=[],i=a.g.stats.scale(a.g.stats.conservation()),o=n-1,s=0;s<=o;s++)i[s]<e&&r.push(s);return a.g.columns.set("hidden",r)}),this.addNode("Hide columns by selection",function(){var t=a.g.columns.get("hidden").concat(a.g.selcol.getAllColumnBlocks({maxLen:a.model.getMaxLength(),withPos:!0}));return a.g.selcol.reset([]),a.g.columns.set("hidden",t)}),this.addNode("Hide columns by gaps",function(){var t=prompt("Enter threshold (in percent)",20);t/=100;for(var e=a.model.getMaxLength(),i=[],n=e-1,r=0;r<=n;r++)!function(e){var n=0,r=0;a.model.each(function(t){return"-"===t.get("seq")[e]&&n++,r++}),t<n/r&&i.push(e)}(r);return a.g.columns.set("hidden",i)}),this.addNode("Hide seqs by identity",function(){var e=prompt("Enter threshold (in percent)",20);return e/=100,a.model.each(function(t){if(t.get("identity")<e)return t.set("hidden",!0)})}),this.addNode("Hide seqs by selection",function(){var e=a.g.selcol.where({type:"row"}).map(function(t){return t.get("seqId")});return a.g.selcol.reset([]),a.model.each(function(t){if(0<=e.indexOf(t.get("id")))return t.set("hidden",!0)})}),this.addNode("Hide seqs by gaps",function(){var r=prompt("Enter threshold (in percent)",40);return a.model.each(function(t,e){var n=t.get("seq").reduce(function(t,e){return"-"===e?++t:void 0},0);if(r<n)return t.set("hidden",!0)})}),this.addNode("Reset",function(){return a.g.columns.set("hidden",[]),a.model.each(function(t){if(t.get("hidden"))return t.set("hidden",!1)})}),this.el.appendChild(this.buildDOM()),this}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85);n=((r=i)&&r.__esModule?r:{default:r}).default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var r=this;return this.setName("Selection"),this.addNode("Find Motif (supports RegEx)",function(){var t=prompt("your search","D");return r.g.user.set("searchText",t)}),this.addNode("Invert columns",function(){return r.g.selcol.invertCol(function(){var t=[],e=r.model.getMaxLength(),n=0;if(0<=e)for(;n<=e;)t.push(n++);else for(;e<=n;)t.push(n--);return t}())}),this.addNode("Invert rows",function(){return r.g.selcol.invertRow(r.model.pluck("id"))}),this.addNode("Reset",function(){return r.g.selcol.reset()}),this.el.appendChild(this.buildDOM()),this}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85),o=(r=i)&&r.__esModule?r:{default:r};var s=n(65),o=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.vis,"change",this.render)},render:function(){var t=this;this.removeAllNodes(),this.setName("Vis.elements");for(var e,n=this.getVisElements(),r=0;r<n.length;r++)e=n[r],this._addVisEl(e);return this.addNode("Reset",function(){return t.g.vis.set("labels",!0),t.g.vis.set("sequences",!0),t.g.vis.set("metacell",!0),t.g.vis.set("conserv",!0),t.g.vis.set("labelId",!0),t.g.vis.set("labelName",!0),t.g.vis.set("labelCheckbox",!1),t.g.vis.set("seqlogo",!1),t.g.vis.set("gapHeader",!1),t.g.vis.set("leftHeader",!0),t.g.vis.set("metaGaps",!0),t.g.vis.set("metaIdentity",!0),t.g.vis.set("metaLinks",!0)}),s.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},_addVisEl:function(t){var e,n=this,r={};return this.g.vis.get(t.id)?(e="Hide ",r.color="red"):(e="Show ",r.color="green"),this.addNode(e+t.name,function(){return n.g.vis.set(t.id,!n.g.vis.get(t.id))},{style:r})},getVisElements:function(){var t=[];return t.push({name:"residues indices",id:"markers"}),t.push({name:"ID/Label",id:"labels"}),t.push({name:"meta info (Gaps/Ident)",id:"metacell"}),t.push({name:"overview panel",id:"overviewbox"}),t.push({name:"sequence logo",id:"seqlogo"}),t.push({name:"gap weights",id:"gapHeader"}),t.push({name:"conservation weights",id:"conserv"}),t.push({name:"scale slider",id:"scaleslider"}),t.push({name:"Label",id:"labelName"}),t.push({name:"ID",id:"labelId"}),t.push({name:"gaps %",id:"metaGaps"}),t.push({name:"identity score",id:"metaIdentity"}),t}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85),o=(r=i)&&r.__esModule?r:{default:r};var s=n(65),o=o.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.listenTo(this.g.colorscheme,"change",function(){return this.render()})},render:function(){var t=this.setName("Color scheme");this.removeAllNodes();for(var e,n=this.getColorschemes(),r=0;r<n.length;r++)e=n[r],this.addScheme(t,e);return this.grey(t),s.removeAllChilds(this.el),this.el.appendChild(this.buildDOM()),this},addScheme:function(t,e){var n=this,r={};return this.g.colorscheme.get("scheme")===e.id&&(r.backgroundColor="#77ED80"),this.addNode(e.name,function(){n.g.colorscheme.set("scheme",e.id)},{style:r})},getColorschemes:function(){var t=[];return t.push({name:"Taylor",id:"taylor"}),t.push({name:"Buried",id:"buried"}),t.push({name:"Cinema",id:"cinema"}),t.push({name:"Clustal",id:"clustal"}),t.push({name:"Clustal2",id:"clustal2"}),t.push({name:"Helix",id:"helix"}),t.push({name:"Hydrophobicity",id:"hydro"}),t.push({name:"Lesk",id:"lesk"}),t.push({name:"MAE",id:"mae"}),t.push({name:"Nucleotide",id:"nucleotide"}),t.push({name:"Purine",id:"purine"}),t.push({name:"PID",id:"pid"}),t.push({name:"Strand",id:"strand"}),t.push({name:"Turn",id:"turn"}),t.push({name:"Zappo",id:"zappo"}),t.push({name:"No color",id:"foo"}),t},grey:function(t){}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85),o=(r=i)&&r.__esModule?r:{default:r};var s=n(65),o=o.default.extend({initialize:function(t){return this.g=t.g,this.order="ID",this.el.style.display="inline-block"},setOrder:function(t){return this.order=t,this.render()},render:function(){this.setName("Sorting"),this.removeAllNodes();for(var t,e=this.getComparators(),n=0;n<e.length;n++)t=e[n],this._addNode(t);var r=this.buildDOM();return s.removeAllChilds(this.el),this.el.appendChild(r),this},_addNode:function(t){var e=this,n=t.text,r={};return n===this.order&&(r.backgroundColor="#77ED80"),this.addNode(n,function(){return null!=t.precode&&t.precode(),e.model.comparator=t.comparator,e.model.sort(),e.setOrder(t.text)},{style:r})},getComparators:function(){var r=this,t=[];t.push({text:"ID ↑",comparator:"id"}),t.push({text:"ID ↓",comparator:function(t,e){return-(""+t.get("id")).localeCompare(""+e.get("id"),[],{numeric:!0})}}),t.push({text:"Label ↑",comparator:"name"}),t.push({text:"Label ↓",comparator:function(t,e){return-t.get("name").localeCompare(e.get("name"))}}),t.push({text:"Seq ↑",comparator:"seq"}),t.push({text:"Seq ↓",comparator:function(t,e){return-t.get("seq").localeCompare(e.get("seq"))}});function e(){return r.ident=r.g.stats.identity()}function n(){return r.gaps={},r.model.each(function(t){var e=t.attributes.seq;return r.gaps[t.id]=(e.reduce(function(t,e){return"-"===e?++t:void 0}),0/e.length)})}return t.push({text:"Identity ↑",comparator:function(t,e){var n=r.ident[t.id]-r.ident[e.id];return console.log(r.ident[t.id],r.ident[e.id]),0<n?1:n<0?-1:0},precode:e}),t.push({text:"Identity ↓",comparator:function(t,e){e=r.ident[t.id]-r.ident[e.id];return 0<e?-1:e<0?1:0},precode:e}),t.push({text:"Gaps ↑",comparator:function(t,e){e=r.gaps[t.id]-r.gaps[e.id];return 0<e?1:e<0?-1:0},precode:n}),t.push({text:"Gaps ↓",comparator:function(t,e){e=r.gaps[t.id]-r.gaps[e.id];return e<0?1:0<e?-1:0},precode:n}),t.push({text:"Consensus to top",comparator:function(t){return!t.get("ref")}}),t}});e.default=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(85)),i=o(n(19));o(n(43));function o(t){return t&&t.__esModule?t:{default:t}}n(70);r=r.default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block",this.msa=t.msa},render:function(){var e=this;this.setName("Extras");var n=this.g.stats;this.msa;return this.addNode("Add consensus seq",function(){var t=n.consensus(),t=new i.default({seq:t,id:"0c",name:"Consenus"});return e.model.add(t),e.model.setRef(t),e.model.comparator=function(t){return!t.get("ref")},e.model.sort()}),this.addNode("Jump to a column",function(){var t=prompt("Column","20");if(!(t<0||t>e.model.getMaxLength()||isNaN(t)))return e.g.zoomer.setLeftOffset(t);alert("invalid column")}),this.el.appendChild(this.buildDOM()),this}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o(n(85)),i=o(n(118));function o(t){return t&&t.__esModule?t:{default:t}}n(67).fasta.write;r=r.default.extend({initialize:function(t){return this.g=t.g,this.msa=t.msa,this.el.style.display="inline-block"},render:function(){var e=this;return this.setName("Export"),this.addNode("Share view (URL)↪",function(){return i.default.shareLink(e.msa,function(t){return window.open(t,"_blank")})}),this.addNode("View in Jalview",function(){var t=e.g.config.get("url");return null==t?alert("Sequence weren't imported via an URL"):t.indexOf("localhost")?i.default.publishWeb(e.msa,function(t){return i.default.openInJalview(t,e.g.colorscheme.get("scheme"))}):i.default.openInJalview(t,e.g.colorscheme.get("scheme"))}),this.addNode("Export alignment (FASTA)",function(){return i.default.saveAsFile(e.msa,"all.fasta")}),this.addNode("Export alignment (URL)",function(){return i.default.publishWeb(e.msa,function(t){return window.open(t,"_blank")})}),this.addNode("Export selected sequences (FASTA)",function(){return i.default.saveSelection(e.msa,"selection.fasta")}),this.addNode("Export features (GFF)",function(){return i.default.saveAnnots(e.msa,"features.gff3")}),this.addNode("Export MSA image (PNG)",function(){return i.default.saveAsImg(e.msa,"biojs-msa.png")}),this.el.appendChild(this.buildDOM()),this}});e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85);n=((r=i)&&r.__esModule?r:{default:r}).default.extend({initialize:function(t){return this.g=t.g},render:function(){return this.setName("Help"),this.addNode("About the project",function(){return window.open("https://github.com/wilzbach/msa")}),this.addNode("Report issues",function(){return window.open("https://github.com/wilzbach/msa/issues")}),this.addNode("User manual",function(){return window.open("https://github.com/wilzbach/msa/wiki/User-manual")}),this.el.style.display="inline-block",this.el.appendChild(this.buildDOM()),this}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=n(85);n=((r=i)&&r.__esModule?r:{default:r}).default.extend({initialize:function(t){return this.g=t.g,this.el.style.display="inline-block"},render:function(){var t=this;return this.setName("Debug"),this.addNode("Get the code",function(){return window.open("https://github.com/wilzbach/msa")}),this.addNode("Toggle mouseover events",function(){return t.g.config.set("registerMouseHover",!t.g.config.get("registerMouseHover")),t.g.onAll(function(){return console.log(arguments)})}),this.addNode("Minimized width",function(){return t.g.zoomer.set("alignmentWidth",600)}),this.addNode("Minimized height",function(){return t.g.zoomer.set("alignmentHeight",120)}),this.el.appendChild(this.buildDOM()),this}});e.default=n},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6).Model,n=r.extend({constructor:function(t,e){return"small"==t&&(t=this.small),r.apply(this,[t])},small:{menuFontsize:"12px"},defaults:{menuFontsize:"14px",menuItemFontsize:"14px",menuItemLineHeight:"14px",menuMarginLeft:"3px",menuPadding:"3px 4px 3px 4px"}});e.default=n},function(t,e,n){var r=n(142);"string"==typeof r&&(r=[[t.id,r,""]]);n(144)(r,{});r.locals&&(t.exports=r.locals)},function(t,e,n){(t.exports=n(143)()).push([t.id,"/* BASIC */\n\n.biojs_msa_div {\n\n}\n\n.biojs_msa_stage {\n    cursor: default;\n    line-height: normal;\n    font-family: Helvetica;\n}\n\n.biojs_msa_seqblock {\n    cursor: move;\n}\n\n.biojs_msa_layer{\n    display: block;\n    white-space: nowrap;\n}\n\n.biojs_msa_labels {\n    color:black;\n    display: inline-block;\n    white-space: nowrap;\n    cursor: pointer;\n    vertical-align:middle;\n    overflow: hidden;\n    text-overflow: clip;\n    /*margin:auto; */\n    text-align: left;\n}\n\n.biojs_msa_header {\n    white-space: nowrap;\n    text-align: left;\n}\n\n.biojs_msa_labelrow:before {\n    content: '';\n    display: inline-block;\n    width: 0;\n    height: 100%;\n    vertical-align: middle;\n}\n\n.biojs_msa_labelrow{\n    height: 100%;\n}\n\n.biojs_msa_labelblock::-webkit-scrollbar, .biojs_msa_rheader::-webkit-scrollbar{\n    // FIX scrollbars on Mac\n    -webkit-appearance: none;\n    width: 7px;\n    height: 7px;\n}\n.biojs_msa_labelblock::-webkit-scrollbar-thumb, .biojs_msa_rheader::-webkit-scrollbar-thumb{\n    border-radius: 4px;\n    background-color: rgba(0,0,0,.5);\n    box-shadow: 0 0 1px rgba(255,255,255,.5);\n}\n\n/* END BASIC */\n/* Marker */\n\n.biojs_msa_marker {\n  color: #999;\n  white-space: nowrap;\n}\n\n.biojs_msa_marker .msa-col-header {\n  cursor: pointer;\n  cursor: pointer;\n  text-align: center;\n}\n\n.biojs_msa_marker .msa-col-header:hover {\n  color: #f00;\n}\n\n/* END Marker */\n/* Menubar */\n\n.smenubar .smenubar_alink {\n    background: #3498db;\n    background-image: -webkit-linear-gradient(top, #3498db, #2980b9);\n    background-image: -moz-linear-gradient(top, #3498db, #2980b9);\n    background-image: -ms-linear-gradient(top, #3498db, #2980b9);\n    background-image: -o-linear-gradient(top, #3498db, #2980b9);\n    background-image: linear-gradient(to bottom, #3498db, #2980b9);\n    -webkit-border-radius: 28;\n    -moz-border-radius: 28;\n    border-radius: 28px;\n    font-family: Arial;\n    color: #ffffff;\n    padding: 3px 10px 3px 10px;\n    margin-left: 10px;\n    text-decoration: none;\n}\n.smenubar {\n    display: inline-block;\n}\n\n.smenubar .smenubar_alink:hover {\n    cursor: pointer;\n}\n\n\n/* jquery dropdown CSS */\n\n.smenu-dropdown {\n    position: absolute;\n    z-index: 9;\n    display: none;\n    margin-left: 5px;\n    margin-top: 22px;\n}\n\n.smenu-dropdown .smenu-dropdown-menu,\n.smenu-dropdown .smenu-dropdown-panel {\n    min-width: 160px;\n    max-width: 360px;\n    list-style: none;\n    background: #FFF;\n    border: solid 1px #DDD;\n    border: solid 1px rgba(0, 0, 0, .2);\n    border-radius: 6px;\n    box-shadow: 0 5px 10px rgba(0, 0, 0, .2);\n    overflow: visible;\n    padding: 4px 0;\n    margin: 0;\n}\n\n.smenu-dropdown .smenu-dropdown-panel {\n    padding: 10px;\n}\n\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-menu,\n.smenu-dropdown.smenu-dropdown-scroll .smenu-dropdown-panel {\n    max-height: 358px;\n    overflow: auto;\n}\n\n.smenu-dropdown .smenu-dropdown-menu li {\n    display: block;\n    color: #555;\n    text-decoration: none;\n    line-height: 18px;\n    padding: 3px 15px;\n    white-space: nowrap;\n}\n\n.smenu-dropdown .smenu-dropdown-menu li:hover {\n    background-color: #08C;\n    color: #FFF;\n    cursor: pointer;\n}\n\n.smenu-dropdown .smenu-dropdown-menu .smenu-dropdown-divider {\n    font-size: 1px;\n    border-top: solid 1px #E5E5E5;\n    padding: 0;\n    margin: 5px 0;\n}\n\n/* END Menubar */\n\n.biojs_msa_div {\n  position: relative;\n}\n\n.biojs_msa_scale {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  background-color: #fff;\n  box-shadow: 0 2px 3px #999;\n  border-radius: 3px;\n  margin: 5px 0 0 auto;\n  padding: 5px;\n  text-align: center;\n}\n.biojs_msa_scale .msa-btngroup {\n  margin: 5px auto 0;\n}\n.biojs_msa_scale [type=\"range\"] {\n  cursor: pointer;\n}\n\n.biojs_msa_scale .msa-scale-minimised {\n}\n.biojs_msa_scale .msa-scale-minimised {\n}\n.biojs_msa_scale .msa-btn-close {\n  text-align: right;\n  font-size: 0.8em;\n  padding: 2px;\n}\n.biojs_msa_scale .msa-btn-open {\n  background-color: #fff;\n}\n\n.biojs_msa_scale .msa-hide {\n  display: none;\n}\n\n.msa-btn {\n  cursor: pointer;\n  font-size: 1.1em;\n  display: inline-block;\n  padding: 2px 8px;\n  margin-bottom: 0;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  box-sizing: border-box;\n}\n.msa-btn:hover {\n  background-color: #ddd;\n}\n",""])},function(t,e){"use strict";t.exports=function(){var s=[];return s.toString=function(){for(var t=[],e=0;e<this.length;e++){var n=this[e];n[2]?t.push("@media "+n[2]+"{"+n[1]+"}"):t.push(n[1])}return t.join("")},s.i=function(t,e){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var i=this[r][0];"number"==typeof i&&(n[i]=!0)}for(r=0;r<t.length;r++){var o=t[r];"number"==typeof o[0]&&n[o[0]]||(e&&!o[2]?o[2]=e:e&&(o[2]="("+o[2]+") and ("+e+")"),s.push(o))}},s}},function(t,e,n){function r(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}var u={},i=r(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),o=r(function(){return document.head||document.getElementsByTagName("head")[0]}),a=null,l=0,s=[];function c(t,e){for(var n=0;n<t.length;n++){var r=t[n],i=u[r.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](r.parts[o]);for(;o<r.parts.length;o++)i.parts.push(p(r.parts[o],e))}else{for(var s=[],o=0;o<r.parts.length;o++)s.push(p(r.parts[o],e));u[r.id]={id:r.id,refs:1,parts:s}}}}function h(t){for(var e=[],n={},r=0;r<t.length;r++){var i=t[r],o=i[0],i={css:i[1],media:i[2],sourceMap:i[3]};n[o]?n[o].parts.push(i):e.push(n[o]={id:o,parts:[i]})}return e}function f(t,e){var n=o(),r=s[s.length-1];if("top"===t.insertAt)r?r.nextSibling?n.insertBefore(e,r.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),s.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(e)}}function d(t){t.parentNode.removeChild(t);t=s.indexOf(t);0<=t&&s.splice(t,1)}function g(t){var e=document.createElement("style");return e.type="text/css",f(t,e),e}function p(e,t){var n,r,i,o,s;return i=t.singleton?(s=l++,n=a=a||g(t),r=_.bind(null,n,s,!1),_.bind(null,n,s,!0)):e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(o=t,(s=document.createElement("link")).rel="stylesheet",f(o,s),r=function(t,e){var n=e.css,e=e.sourceMap;e&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */");e=new Blob([n],{type:"text/css"}),n=t.href;t.href=URL.createObjectURL(e),n&&URL.revokeObjectURL(n)}.bind(null,n=s),function(){d(n),n.href&&URL.revokeObjectURL(n.href)}):(n=g(t),r=function(t,e){var n=e.css,e=e.media;e&&t.setAttribute("media",e);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),function(){d(n)}),r(e),function(t){t?t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap||r(e=t):i()}}t.exports=function(t,s){void 0===(s=s||{}).singleton&&(s.singleton=i()),void 0===s.insertAt&&(s.insertAt="bottom");var a=h(t);return c(a,s),function(t){for(var e=[],n=0;n<a.length;n++){var r=a[n];(i=u[r.id]).refs--,e.push(i)}t&&c(h(t),s);for(var i,n=0;n<e.length;n++)if(0===(i=e[n]).refs){for(var o=0;o<i.parts.length;o++)i.parts[o]();delete u[i.id]}}};var m,v=(m=[],function(t,e){return m[t]=e,m.filter(Boolean).join("\n")});function _(t,e,n,r){n=n?"":r.css;t.styleSheet?t.styleSheet.cssText=v(e,n):(r=document.createTextNode(n),(n=t.childNodes)[e]&&t.removeChild(n[e]),n.length?t.insertBefore(r,n[e]):t.appendChild(r))}}]);